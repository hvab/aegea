!function(){"use strict";function e(){this.init()}e.prototype={init:function(){var e=this||y;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||y;if(e=parseFloat(e),t.ctx||d(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,y.ctx.currentTime);for(var a=0;a<t._howls.length;a++)if(!t._howls[a]._webAudio)for(var r=t._howls[a]._getSoundIds(),o=0;o<r.length;o++){var n=t._howls[a]._soundById(r[o]);n&&n._node&&(n._node.volume=n._volume*e)}return t}return t._volume},mute:function(e){var t=this||y;t.ctx||d(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,y.ctx.currentTime);for(var a=0;a<t._howls.length;a++)if(!t._howls[a]._webAudio)for(var r=t._howls[a]._getSoundIds(),o=0;o<r.length;o++){var n=t._howls[a]._soundById(r[o]);n&&n._node&&(n._node.muted=!!e||n._muted)}return t},unload:function(){for(var e=this||y,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,d()),e},codecs:function(e){return(this||y)._codecs[e.replace(/^x-/,"")]},_setup:function(){var t=this||y;if(t.state=t.ctx&&t.ctx.state||"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||y,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var a=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!a&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!a,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||y,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),a=!!("ontouchend"in window||t._navigator&&0<t._navigator.maxTouchPoints||t._navigator&&0<t._navigator.msMaxTouchPoints);if(!t._mobileEnabled&&t.ctx&&(e||a)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var r=function(){y._autoResume();var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),t}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&y.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var a=0;a<e._howls[t]._sounds.length;a++)if(!e._howls[t]._sounds[a]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&y.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};function t(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")}var y=new e;t.prototype={init:function(e){var t=this;return y.ctx||d(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=y.usingWebAudio&&!t._html5,void 0!==y.ctx&&y.ctx&&y.mobileAutoEnable&&y._enableMobileAudio(),y._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(y.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var a=0;a<e._src.length;a++){var r,o;if(e._format&&e._format[a])r=e._format[a];else{if("string"!=typeof(o=e._src[a])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=(r=(r=/^data:audio\/([^;,]+);/i.exec(o))||/\.([^.]+)$/.exec(o.split("?",1)[0]))&&r[1].toLowerCase()}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&y.codecs(r)){t=e._src[a];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new n(e),e._webAudio&&i(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(a,r){var o=this,e=null;if("number"==typeof a)e=a,a=null;else{if("string"==typeof a&&"loaded"===o._state&&!o._sprite[a])return null;if(void 0===a){a="__default";for(var t=0,n=0;n<o._sounds.length;n++)o._sounds[n]._paused&&!o._sounds[n]._ended&&(t++,e=o._sounds[n]._id);1===t?a=null:e=null}}var l=e?o._soundById(e):o._inactiveSound();if(!l)return null;if(e&&!a&&(a=l._sprite||"__default"),"loaded"!==o._state){l._sprite=a,l._ended=!1;var i=l._id;return o._queue.push({event:"play",action:function(){o.play(i)}}),i}if(e&&!l._paused)return r||o._loadQueue("play"),l._id;o._webAudio&&y._autoResume();var s=Math.max(0,0<l._seek?l._seek:o._sprite[a][0]/1e3),c=Math.max(0,(o._sprite[a][0]+o._sprite[a][1])/1e3-s),u=1e3*c/Math.abs(l._rate);l._paused=!1,l._ended=!1,l._sprite=a,l._seek=s,l._start=o._sprite[a][0]/1e3,l._stop=(o._sprite[a][0]+o._sprite[a][1])/1e3,l._loop=!(!l._loop&&!o._sprite[a][2]);var d=l._node;if(o._webAudio){var p=function(){o._refreshBuffer(l);var e=l._muted||o._muted?0:l._volume;d.gain.setValueAtTime(e,y.ctx.currentTime),l._playStart=y.ctx.currentTime,void 0===d.bufferSource.start?l._loop?d.bufferSource.noteGrainOn(0,s,86400):d.bufferSource.noteGrainOn(0,s,c):l._loop?d.bufferSource.start(0,s,86400):d.bufferSource.start(0,s,c),u!=1/0&&(o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),u)),r||setTimeout(function(){o._emit("play",l._id)},0)};"running"===y.state?p():(o.once("resume",p),o._clearTimer(l._id))}else{var g=function(){d.currentTime=s,d.muted=l._muted||o._muted||y._muted||d.muted,d.volume=l._volume*y.volume(),d.playbackRate=l._rate;try{var e=d.play();if("undefined"!=typeof Promise&&e instanceof Promise){o._playLock=!0;var t=function(){o._playLock=!1,r||o._emit("play",l._id)};e.then(t,t)}else r||o._emit("play",l._id);if(d.paused)return void o._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");"__default"!==a?o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),u):(o._endTimers[l._id]=function(){o._ended(l),d.removeEventListener("ended",o._endTimers[l._id],!1)},d.addEventListener("ended",o._endTimers[l._id],!1))}catch(e){o._emit("playerror",l._id,e)}},k=window&&window.ejecta||!d.readyState&&y._navigator.isCocoonJS;if(3<=d.readyState||k)g();else{var f=function(){g(),d.removeEventListener(y._canPlayEvent,f,!1)};d.addEventListener(y._canPlayEvent,f,!1),o._clearTimer(l._id)}}return l._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var a=t._getSoundIds(e),r=0;r<a.length;r++){t._clearTimer(a[r]);var o=t._soundById(a[r]);if(o&&!o._paused&&(o._seek=t.seek(a[r]),o._rateSeek=0,o._paused=!0,t._stopFade(a[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var a=this;if("loaded"!==a._state)return a._queue.push({event:"stop",action:function(){a.stop(e)}}),a;for(var r=a._getSoundIds(e),o=0;o<r.length;o++){a._clearTimer(r[o]);var n=a._soundById(r[o]);n&&(n._seek=n._start||0,n._rateSeek=0,n._paused=!0,n._ended=!0,a._stopFade(r[o]),n._node&&(a._webAudio?n._node.bufferSource&&(void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),a._cleanBuffer(n._node)):isNaN(n._node.duration)&&n._node.duration!==1/0||(n._node.currentTime=n._start||0,n._node.pause())),t||a._emit("stop",n._id))}return a},mute:function(e,t){var a=this;if("loaded"!==a._state)return a._queue.push({event:"mute",action:function(){a.mute(e,t)}}),a;if(void 0===t){if("boolean"!=typeof e)return a._muted;a._muted=e}for(var r=a._getSoundIds(t),o=0;o<r.length;o++){var n=a._soundById(r[o]);n&&(n._muted=e,n._interval&&a._stopFade(n._id),a._webAudio&&n._node?n._node.gain.setValueAtTime(e?0:n._volume,y.ctx.currentTime):n._node&&(n._node.muted=!!y._muted||e),a._emit("mute",n._id))}return a},volume:function(){var e,t,a,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]?0<=r._getSoundIds().indexOf(o[0])?t=parseInt(o[0],10):e=parseFloat(o[0]):2<=o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),!(void 0!==e&&0<=e&&e<=1))return(a=t?r._soundById(t):r._sounds[0])?a._volume:0;if("loaded"!==r._state)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var n=0;n<t.length;n++)(a=r._soundById(t[n]))&&(a._volume=e,o[2]||r._stopFade(t[n]),r._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,y.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*y.volume()),r._emit("volume",a._id));return r},fade:function(e,t,a,r){var o=this;if("loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(e,t,a,r)}}),o;o.volume(e,r);for(var n=o._getSoundIds(r),l=0;l<n.length;l++){var i=o._soundById(n[l]);if(i){if(r||o._stopFade(n[l]),o._webAudio&&!i._muted){var s=y.ctx.currentTime,c=s+a/1e3;i._volume=e,i._node.gain.setValueAtTime(e,s),i._node.gain.linearRampToValueAtTime(t,c)}o._startFadeInterval(i,e,t,a,n[l],void 0===r)}}return o},_startFadeInterval:function(t,a,r,o,e,n){var l=this,i=a,s=r-a,c=Math.abs(s/.01),u=Math.max(4,0<c?o/c:o),d=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var e=(Date.now()-d)/o;d=Date.now(),i+=s*e,i=Math.max(0,i),i=Math.min(1,i),i=Math.round(100*i)/100,l._webAudio?t._volume=i:l.volume(i,t._id,!0),n&&(l._volume=i),(r<a&&i<=r||a<r&&r<=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,l.volume(r,t._id),l._emit("fade",t._id))},u)},_stopFade:function(e){var t=this,a=t._soundById(e);return a&&a._interval&&(t._webAudio&&a._node.gain.cancelScheduledValues(y.ctx.currentTime),clearInterval(a._interval),a._interval=null,t.volume(a._fadeTo,e),a._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,a,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(a=r._soundById(parseInt(o[0],10)))&&a._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var n=r._getSoundIds(t),l=0;l<n.length;l++)(a=r._soundById(n[l]))&&(a._loop=e,r._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=e)&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop));return r},rate:function(){var e,t,a,r=this,o=arguments;if(0===o.length)t=r._sounds[0]._id;else if(1===o.length){0<=r._getSoundIds().indexOf(o[0])?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(a=r._soundById(t))?a._rate:r._rate;if("loaded"!==r._state)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var n=0;n<t.length;n++)if(a=r._soundById(t[n])){a._rateSeek=r.seek(t[n]),a._playStart=r._webAudio?y.ctx.currentTime:a._playStart,a._rate=e,r._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(e,y.ctx.currentTime):a._node&&(a._node.playbackRate=e);var l=r.seek(t[n]),i=1e3*((r._sprite[a._sprite][0]+r._sprite[a._sprite][1])/1e3-l)/Math.abs(a._rate);!r._endTimers[t[n]]&&a._paused||(r._clearTimer(t[n]),r._endTimers[t[n]]=setTimeout(r._ended.bind(r,a),i)),r._emit("rate",a._id)}return r},seek:function(){var e,t,a=this,r=arguments;if(0===r.length)t=a._sounds[0]._id;else if(1===r.length){0<=a._getSoundIds().indexOf(r[0])?t=parseInt(r[0],10):a._sounds.length&&(t=a._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return a;if("loaded"!==a._state)return a._queue.push({event:"seek",action:function(){a.seek.apply(a,r)}}),a;var o=a._soundById(t);if(o){if(!("number"==typeof e&&0<=e)){if(a._webAudio){var n=a.playing(t)?y.ctx.currentTime-o._playStart:0,l=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(l+n*Math.abs(o._rate))}return o._node.currentTime}var i=a.playing(t);if(i&&a.pause(t,!0),o._seek=e,o._ended=!1,a._clearTimer(t),i&&a.play(t,!0),!a._webAudio&&o._node&&(o._node.currentTime=e),i&&!a._webAudio){var s=function(){a._playLock?setTimeout(s,0):a._emit("seek",t)};setTimeout(s,0)}else a._emit("seek",t)}return a},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var a=0;a<this._sounds.length;a++)if(!this._sounds[a]._paused)return!0;return!1},duration:function(e){var t=this._duration,a=this._soundById(e);return a&&(t=this._sprite[a._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,a=0;a<t.length;a++){if(t[a]._paused||e.stop(t[a]._id),!e._webAudio)/MSIE |Trident\//.test(y._navigator&&y._navigator.userAgent)||(t[a]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[a]._node.removeEventListener("error",t[a]._errorFn,!1),t[a]._node.removeEventListener(y._canPlayEvent,t[a]._loadFn,!1);delete t[a]._node,e._clearTimer(t[a]._id);var r=y._howls.indexOf(e);0<=r&&y._howls.splice(r,1)}var o=!0;for(a=0;a<y._howls.length;a++)if(y._howls[a]._src===e._src){o=!1;break}return l&&o&&delete l[e._src],y.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function(e,t,a,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:a,fn:t,once:r}:{id:a,fn:t}),this},off:function(e,t,a){var r=this,o=r["_on"+e],n=0;if("number"==typeof t&&(a=t,t=null),t||a)for(n=0;n<o.length;n++){var l=a===o[n].id;if(t===o[n].fn&&l||!t&&l){o.splice(n,1);break}}else if(e)r["_on"+e]=[];else{var i=Object.keys(r);for(n=0;n<i.length;n++)0===i[n].indexOf("_on")&&Array.isArray(r[i[n]])&&(r[i[n]]=[])}return r},once:function(e,t,a){return this.on(e,t,a,1),this},_emit:function(e,t,a){for(var r=this,o=r["_on"+e],n=o.length-1;0<=n;n--)o[n].id&&o[n].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,a)}.bind(r,o[n].fn),0),o[n].once&&r.off(e,o[n].fn,o[n].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(0<t._queue.length){var a=t._queue[0];a.event===e&&(t._queue.shift(),t._loadQueue()),e||a.action()}return t},_ended:function(e){var t=this,a=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[a][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=y.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),y._autoSuspend()),t._webAudio||r||t.stop(e._id),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var a=t._soundById(e);a&&a._node&&a._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new n(e)},_drain:function(){var e=this,t=e._pool,a=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&a++;for(r=e._sounds.length-1;0<=r;r--){if(a<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),a--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],a=0;a<this._sounds.length;a++)t.push(this._sounds[a]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=y.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,y.ctx.currentTime),this},_cleanBuffer:function(e){if(y._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=y._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var n=function(e){this._parent=e,this.init()};n.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++y._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,a=y._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),e._node.gain.setValueAtTime(a,y.ctx.currentTime),e._node.paused=!0,e._node.connect(y.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(y._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=a*y.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++y._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(y._canPlayEvent,this._loadFn,!1)}};var l={},i=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void u(t);if(/^data:[^;]+;base64,/.test(e)){for(var a=atob(e.split(",")[1]),r=new Uint8Array(a.length),o=0;o<a.length;++o)r[o]=a.charCodeAt(o);c(r.buffer,t)}else{var n=new XMLHttpRequest;n.open("GET",e,!0),n.withCredentials=t._xhrWithCredentials,n.responseType="arraybuffer",n.onload=function(){var e=(n.status+"")[0];"0"===e||"2"===e||"3"===e?c(n.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+n.status+".")},n.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},s(n)}},s=function(t){try{t.send()}catch(e){t.onerror()}},c=function(e,t){y.ctx.decodeAudioData(e,function(e){e&&0<t._sounds.length&&(l[t._src]=e,u(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},d=function(){try{"undefined"!=typeof AudioContext?y.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?y.ctx=new webkitAudioContext:y.usingWebAudio=!1}catch(e){y.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(y._navigator&&y._navigator.platform),t=y._navigator&&y._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=t?parseInt(t[1],10):null;if(e&&a&&a<9){var r=/safari/.test(y._navigator&&y._navigator.userAgent.toLowerCase());(y._navigator&&y._navigator.standalone&&!r||y._navigator&&!y._navigator.standalone&&!r)&&(y.usingWebAudio=!1)}y.usingWebAudio&&(y.masterGain=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),y.masterGain.gain.setValueAtTime(y._muted?0:1,y.ctx.currentTime),y.masterGain.connect(y.ctx.destination)),y._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:y,Howl:t}}),"undefined"!=typeof exports&&(exports.Howler=y,exports.Howl=t),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=y,window.Howl=t,window.Sound=n):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=y,global.Howl=t,global.Sound=n)}(),function(d){"use strict";var e,u={},p=d(),a=null,g={isMobile:(e=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))),hasRequestAnimationFrame:"function"==typeof window.requestAnimationFrame,formatTime:function(e,t){if("number"!=typeof e)return e;var a=(t?Math.floor:Math.round)(e),r=a%60,o=(a-r)%3600/60,n=(a-r-60*o)/3600;return(n?n+":":"")+(n&&o<10?"0"+o:o)+":"+(r<10?"0"+r:r)},makeSeconds:function(e){if("number"==typeof e)return e;if(null==e)return 0;for(var t=(e=e.replace(",",".")).split(":").reverse(),a=0,r=0;r<t.length;r++)a+=Math.abs(parseInt(t[r]))*Math.pow(60,r);return+a},getSkinName:function(e){var t="",a=e.attr("class"),r=a?a.indexOf("jouele-skin-"):-1;return 0<r&&(t=a.substr(r+12,0<a.indexOf(" ",r)?a.indexOf(" ",r):a.length)),t},getFirstJouele:function(){var e,t=d(".jouele").add(".jouele-control").filter(".jouele_first:not(.jouele_broken)").eq(0);if(0===t.length)for(var a=0;a<d.Jouele.playlist.length;a++){for(var r=0;r<d.Jouele.playlist[a].length;r++)if(d.Jouele.playlist[a][r]instanceof h&&d.Jouele.playlist[a][r].getTrack()&&!d.Jouele.playlist[a][r].getTrack().player.isBroken){e=d.Jouele.playlist[a][r];break}if(e)break}else e=t.data("jouele");return e},getEventPoint:function(e){var t,a;return t=e.originalEvent.touches&&0<e.originalEvent.touches.length&&void 0!==e.originalEvent.touches[0]&&e.originalEvent.touches[0].clientX?e.originalEvent.touches[0].clientX:e.originalEvent.changedTouches&&0<e.originalEvent.changedTouches.length&&void 0!==e.originalEvent.changedTouches[0]&&e.originalEvent.changedTouches[0].clientX?e.originalEvent.changedTouches[0].clientX:e.pageX,(a=Math.round((t-p.offset().left)/p.width()*100*1e4)/1e4)<0?a=0:100<a&&(a=100),a},getInstance:function(){return 0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()?d.Jouele.history[0]:g.getFirstJouele()},showWarning:function(e){var t=!1;return"undefined"!=typeof console&&"function"==typeof console.warn&&(console.warn(e),t=!0),t},showError:function(e){var t=!1;return"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(e),t=!0),t}},t=function(e){if(32!==e.keyCode||"INPUT"===e.target.nodeName||"TEXTAREA"===e.target.nodeName||"SELECT"===e.target.nodeName||"OPTION"===e.target.nodeName||"BUTTON"===e.target.nodeName||void 0!==d(e.target).attr("contenteditable")&&"false"!==d(e.target).attr("contenteditable"))return!0;if(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()&&!d.Jouele.history[0].getTrack().player.isPaused&&(d.Jouele.history[0].getTrack().player.isPlaying||null!==d.Jouele.history[0].getTrack().player.seekTime||null!==d.Jouele.history[0].getTrack().player.seekPosition||d.Jouele.history[0].getTrack().player.isStarted&&!d.Jouele.history[0].getTrack().player.isLoaded)){if(!d.Jouele.options.pauseOnSpace)return!1;d.Jouele.options.scrollOnSpace||e.preventDefault(),d.Jouele.history[0].pause()}else{if(!d.Jouele.options.playOnSpace)return!1;if(d.Jouele.options.scrollOnSpace||e.preventDefault(),0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack())d.Jouele.history[0].play();else{var t=g.getFirstJouele();t&&t instanceof h&&t.play()}}},r=function(e){if(0===p.length)return!0;var t;if(!((t=p.data("jouele")?p.data("jouele"):p.data("jouele-destroyed")?p.data("jouele-destroyed"):g.getInstance())instanceof h)||!t.getTrack()||t.getTrack().player.isBroken)return p=d(),!0;if(p.data("jouele-destroyed")&&0<t.$control.length)return t.$control.removeData("jouele-destroyed"),p=d(),!0;switch(e.type){case"mouseup":case"touchend":case"touchcancel":t.getTrack().player.seekingOnTimeline.isSeeking=!1,t.getTrack().player.seekingOnTimeline.seekingInstance=!1;var a=g.getEventPoint(e);t.getTrack().player.seekingOnTimeline.seekingPosition=a,t.seek.call(t,a),t.getTrack().player.seekingOnTimeline.seekingPosition=null,p=d();break;case"mousemove":case"touchmove":if(!t.getTrack().player.seekingOnTimeline.isSeeking)return!0;t.getTrack().player.seekingOnTimeline.seekingPosition=g.getEventPoint(e),f.updateState.call(t)}},k={show:function(e){var t=this;if(t.getTrack().player.preloaderTimeout||t.getTrack().player.seekingOnTimeline.isSeeking)return t;var a=e||50;return t.getTrack().player.preloaderTimeout=setTimeout(function(){if(t.getTrack().player.seekingOnTimeline.isSeeking||t.isPaused())return t.getTrack().player.preloaderTimeout=null,t;f.updateControlsClasses.call(t,"jouele-is-buffering","add")},a),t},hide:function(){var e=this;return e.getTrack().player.preloaderTimeout&&(clearTimeout(e.getTrack().player.preloaderTimeout),e.getTrack().player.preloaderTimeout=null,f.updateControlsClasses.call(e,"jouele-is-buffering","remove")),e}},f={updateLength:function(){var e=this,t=null,a=null;return e.getTotalTime()?t=e.getTotalTime():e.getOptions().length&&(t=e.getOptions().length),e.getTrack().player.howler?a=e.getTrack().player.howler.duration():0<g.makeSeconds(e.getOptions().length)&&(a=g.makeSeconds(e.getOptions().length)),a&&(null!==t&&a!==t&&e.getTrack().player.seekTime===t&&(e.getTrack().player.seekTime=Math.round(100*parseFloat(a))/100),e.getTrack().player.totalTime=a,e.getTrack().player.remainingTime=a-e.getTrack().player.elapsedTime),e.getTrack().player.isBroken&&(e.getTrack().player.totalTime=0,e.getTrack().player.elapsedTime=0,e.getTrack().player.remainingTime=0),f.updateTimeDisplay.call(e),e},updateTitle:function(){var a=this,e=d.trim(a.getOptions().title),t={title:d()};return e&&a.getTrack()&&e!==a.getTrack().player.title&&(a.getTrack().player.title=e),a.getTrack()&&(t.title=a.getTrack().controls.title),d.each(t.title.add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===a.getTrack()||0===d.Jouele.history.length&&(!a.getTrack()||a.getTrack().player.isStarted||a.getTrack().player.seekTime||a.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls.title:""),function(e,t){d(t).html(a.getTrack()?a.getTrack().player.title:"")}),a.getTrack()&&!a.getTrack().player.isBroken||d.each(d.Jouele.controls.title,function(e,t){d(t).html("")}),a},updateTimeline:function(){var e=this,a=0,t={position:d(),elapsed:d(),remaining:d()};return!e.getTrack()||e.getTrack().player.isBroken?a=0:null!==e.getTrack().player.seekingOnTimeline.seekingPosition?a=e.getTrack().player.seekingOnTimeline.seekingPosition:null!==e.getTrack().player.seekPosition?a=e.getTrack().player.seekPosition:null!==e.getTrack().player.seekTime?e.getTotalTime()&&(a=e.getTrack().player.seekTime/(e.getTotalTime()/100)):e.getTotalTime()&&(a=e.getTrack().player.howler.seek()/(e.getTotalTime()/100)),a=Math.round(100*parseFloat(a))/100,e.getTrack()&&(t.position=e.getTrack().controls.position,t.elapsed=e.getTrack().controls.elapsed,t.remaining=e.getTrack().controls.remaining),d.each(t.position.add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===e.getTrack()||0===d.Jouele.history.length&&(!e.getTrack()||e.getTrack().player.isStarted||e.getTrack().player.seekTime||e.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls.position:""),function(e,t){d(t).css("left",a+"%").trigger("jouele:position",a)}),d.each(t.elapsed.add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===e.getTrack()||0===d.Jouele.history.length&&(!e.getTrack()||e.getTrack().player.isStarted||e.getTrack().player.seekTime||e.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls.elapsed:""),function(e,t){d(t).css("width",a+"%").trigger("jouele:position",a)}),d.each(t.remaining.add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===e.getTrack()||0===d.Jouele.history.length&&(!e.getTrack()||e.getTrack().player.isStarted||e.getTrack().player.seekTime||e.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls.remaining:""),function(e,t){d(t).css("width",100-a+"%").trigger("jouele:position",100-a)}),e},updateTimeDisplay:function(e){var i=this,t={"time-total":d(),"time-elapsed":d(),"time-remaining":d(),seek:d()},s="",o="",n="",a=null;return function e(){if(i.getTrack())return i.getTotalTime()||i.getTrack().player.isBroken?(s=g.makeSeconds(i.getTotalTime()),a=null!==i.getTrack().player.seekingOnTimeline.seekingPosition?i.getTotalTime()*(i.getTrack().player.seekingOnTimeline.seekingPosition/100):null):i.getOptions().length&&(s=g.makeSeconds(i.getOptions().length),a=null!==i.getTrack().player.seekingOnTimeline.seekingPosition?g.makeSeconds(i.getOptions().length)*(i.getTrack().player.seekingOnTimeline.seekingPosition/100):null),o=null!==a?g.makeSeconds(a):null!==i.getTrack().player.seekPosition?i.getTotalTime()?g.makeSeconds(Math.round(i.getTotalTime()*(i.getTrack().player.seekPosition/100)*100)/100):0:null!==i.getTrack().player.seekTime?g.makeSeconds(i.getTrack().player.seekTime):i.getTrack().player.isPlaying?null!==i.getTrack().player.howler&&"unloaded"!==i.getTrack().player.howler.state()&&"number"==typeof i.getTrack().player.howler.seek()?g.makeSeconds(i.getTrack().player.howler.seek()):0:g.makeSeconds(null!==i.getTrack().player.howler&&"unloaded"!==i.getTrack().player.howler.state()&&"number"==typeof i.getTrack().player.howler.seek()?i.getTrack().player.howler.seek():0),o=i.getTrack().player.isBroken?0:Math.round(100*o)/100,n=s?Math.round(100*(s-g.makeSeconds(o)))/100:0,0!==o||i.getTrack().player.isBroken||0===i.getTrack().player.elapsedTime||null!==a||null!==i.getTrack().player.seekPosition||null!==i.getTrack().player.seekTime?(i.getTrack().player.remainingTime=n,i.getTrack().player.elapsedTime=o,1):(i.getTrack().player.elapsedTime=0,void e());s=0}()&&(s||!i.getTrack()||i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)&&function(){i.getTrack()&&(t["time-total"]=i.getTrack().controls["time-total"],t["time-elapsed"]=i.getTrack().controls["time-elapsed"],t["time-remaining"]=i.getTrack().controls["time-remaining"],t.seek=i.getTrack().controls.seek);var l=g.makeSeconds(g.formatTime(o,!e))>s?g.formatTime(o,!0):g.formatTime(o,!e),r=g.formatTime(g.makeSeconds(s)-g.makeSeconds(l),!0);d.each(t["time-total"].add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===i.getTrack()||!i.getTrack()||i.getTrack().player.isBroken||0===d.Jouele.history.length&&(i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls["time-total"]:""),function(e,t){var a=d(t);i.getTrack()&&!i.getTrack().player.isBroken&&s?(a.text(g.formatTime(s,!0)),a.trigger("jouele:totaltime",s)):(a.text(""),a.trigger("jouele:totaltime",0))}),d.each(t["time-elapsed"].add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===i.getTrack()||!i.getTrack()||i.getTrack().player.isBroken||0===d.Jouele.history.length&&(i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls["time-elapsed"]:""),function(e,t){var a=d(t);i.getTrack()&&!i.getTrack().player.isBroken&&s?(a.text(l),a.trigger("jouele:elapsedtime",o)):(a.text(""),a.trigger("jouele:elapsedtime",0))}),d.each(t["time-remaining"].add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===i.getTrack()||!i.getTrack()||i.getTrack().player.isBroken||0===d.Jouele.history.length&&(i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls["time-remaining"]:""),function(e,t){var a=d(t);i.getTrack()&&!i.getTrack().player.isBroken&&s?(a.text(r),a.trigger("jouele:remainingtime",n)):(a.text(""),a.trigger("jouele:remainingtime",0))}),d.each(t.seek.add(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===i.getTrack()||!i.getTrack()||0===d.Jouele.history.length&&(i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)?d.Jouele.controls.seek:""),function(e,t){var a=d(t);if(a.attr("data-range")&&i.getTrack()&&(i.getTrack().player.isStarted||i.getTrack().player.seekTime||i.getTrack().player.seekingOnTimeline.isSeeking)){var r=g.makeSeconds(a.data("range-start")),o=g.makeSeconds(a.data("range-end")),n=g.makeSeconds(l);i.getTrack()&&!i.getTrack().player.isBroken&&s?r<=n&&n<=o?a.addClass("jouele-is-within").trigger("jouele:rangein"):a.removeClass("jouele-is-within").trigger("jouele:rangeout"):(a.removeClass("jouele-is-within"),a.trigger("jouele:rangeout"))}})}(),i},updateState:function(e){return f.updateTimeline.call(this),f.updateTimeDisplay.call(this,e),this},requestAnimationFrameProgress:function(e,t){var a=this,r=function(){"function"==typeof t&&t.call(a),f.updateState.call(a,e),a.getTrack().player.updateStateTimer=requestAnimationFrame(r)};return requestAnimationFrame(r)},cancelAnimationFrame:function(){return cancelAnimationFrame(this.getTrack().player.updateStateTimer),this},updateControlsClasses:function(a,r){var e=this;return d.each(e.getTrack().controls,function(e,t){"add"===r?t.addClass(a):"remove"===r&&t.removeClass(a)}),"jouele-is-unavailable"!==a&&"jouele-is-available"!==a&&"jouele-is-loaded"!==a&&(0<d.Jouele.history.length&&d.Jouele.history[0].getTrack()===e.getTrack()||0===d.Jouele.history.length&&(e.getTrack().player.isStarted||e.getTrack().player.seekTime||e.getTrack().player.seekingOnTimeline.isSeeking))&&d.each(d.Jouele.controls,function(e,t){"add"===r?t.addClass(a):"remove"===r&&t.removeClass(a)}),e}},n={createJouele:function(e,t){var a="",r="";if(e.hasClass("jouele")&&e.attr("href")?(a=e.attr("href"),r=e.html()):e.hasClass("jouele-control")&&(a=e.attr("data-href"),r=e.attr("data-title")),e.hasClass("jouele")){if(!a)return g.showError("Please include `href` attribute into your Jouele link"),this}else{if(!e.hasClass("jouele-control"))return this;if(!a)return n.pushControl(e,!0),this}return new h(e,d.extend({},{length:0,repeat:!1,hideTimelineOnPause:!1,skin:"",href:"",title:"",spaceControl:!1,pauseOnSpace:!1,playOnSpace:!1,scrollOnSpace:!0},t,e.data(),{skin:g.getSkinName(e),href:a,title:r})),e},createTrack:function(e){return{player:{href:e,howler:null,title:"",isPlaying:!1,isPlayed:!1,isPaused:!1,isLoaded:!1,isStarted:!1,isBroken:!1,isEnded:!1,totalTime:0,elapsedTime:0,remainingTime:0,updateStateTimer:null,seekTime:null,seekPosition:null,preloaderTimeout:null,seekingOnTimeline:{isSeeking:!1,seekingPosition:null,seekingInstance:!1},callbacks:{},play:function(){var a=this;return a instanceof h||(0<d.Jouele.tracks[a.href].instances.length?a=d.Jouele.tracks[a.href].instances[0]:void 0!==d.Jouele.tracks[a.href].controls.play&&0<d.Jouele.tracks[a.href].controls.play.length?a=d.Jouele.tracks[a.href].controls.play.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls["play-pause"]&&0<d.Jouele.tracks[a.href].controls["play-pause"].length?a=d.Jouele.tracks[a.href].controls["play-pause"].eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.seek&&0<d.Jouele.tracks[a.href].controls.seek.length?a=d.Jouele.tracks[a.href].controls.seek.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.timeline&&0<d.Jouele.tracks[a.href].controls.timeline.length?a=d.Jouele.tracks[a.href].controls.timeline.eq(0).data("jouele"):d.each(d.Jouele.tracks[a.href].controls,function(e,t){return a=t.data("jouele"),!1})),y.play.call(a)},pause:function(){var a=this;return a instanceof h||(0<d.Jouele.tracks[a.href].instances.length?a=d.Jouele.tracks[a.href].instances[0]:void 0!==d.Jouele.tracks[a.href].controls.pause&&0<d.Jouele.tracks[a.href].controls.pause.length?a=d.Jouele.tracks[a.href].controls.pause.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls["play-pause"]&&0<d.Jouele.tracks[a.href].controls["play-pause"].length?a=d.Jouele.tracks[a.href].controls["play-pause"].eq(0).data("jouele"):d.each(d.Jouele.tracks[a.href].controls,function(e,t){return a=t.data("jouele"),!1})),y.pause.call(a)},playFrom:function(e){var a=this;return a instanceof h||(0<d.Jouele.tracks[a.href].instances.length?a=d.Jouele.tracks[a.href].instances[0]:void 0!==d.Jouele.tracks[a.href].controls.seek&&0<d.Jouele.tracks[a.href].controls.seek.length?a=d.Jouele.tracks[a.href].controls.seek.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.timeline&&0<d.Jouele.tracks[a.href].controls.timeline.length?a=d.Jouele.tracks[a.href].controls.timeline.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.play&&0<d.Jouele.tracks[a.href].controls.play.length?a=d.Jouele.tracks[a.href].controls.play.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls["play-pause"]&&0<d.Jouele.tracks[a.href].controls["play-pause"].length?a=d.Jouele.tracks[a.href].controls["play-pause"].eq(0).data("jouele"):d.each(d.Jouele.tracks[a.href].controls,function(e,t){return a=t.data("jouele"),!1})),y.playFrom.call(a,e)},seek:function(e){var a=this;return a instanceof h||(0<d.Jouele.tracks[a.href].instances.length?a=d.Jouele.tracks[a.href].instances[0]:void 0!==d.Jouele.tracks[a.href].controls.seek&&0<d.Jouele.tracks[a.href].controls.seek.length?a=d.Jouele.tracks[a.href].controls.seek.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.timeline&&0<d.Jouele.tracks[a.href].controls.timeline.length?a=d.Jouele.tracks[a.href].controls.timeline.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls.play&&0<d.Jouele.tracks[a.href].controls.play.length?a=d.Jouele.tracks[a.href].controls.play.eq(0).data("jouele"):void 0!==d.Jouele.tracks[a.href].controls["play-pause"]&&0<d.Jouele.tracks[a.href].controls["play-pause"].length?a=d.Jouele.tracks[a.href].controls["play-pause"].eq(0).data("jouele"):d.each(d.Jouele.tracks[a.href].controls,function(e,t){return a=t.data("jouele"),!1})),y.seek.call(a,e)}},controls:{"play-pause":d(),play:d(),pause:d(),"time-total":d(),"time-elapsed":d(),"time-remaining":d(),timeline:d(),elapsed:d(),remaining:d(),position:d(),seek:d(),title:d()},instances:[]}},getPlaylistIndex:function(){var a,r=this;if(d(".jouele-playlist").add(".jouele:not(.jouele-playlist .jouele):not(.jouele_destroyed)").add(".jouele-control[data-href]:not(.jouele .jouele-control):not(.jouele-playlist .jouele-control):not(.jouele_destroyed)").each(function(e,t){return 0<r.getPlaylistDOM().length&&r.getPlaylistDOM()[0]===t||r.$link&&r.$link[0]===t||r.$control&&r.$control[0]===t?(a=e,!1):void 0}),0<r.getPlaylistDOM().length){var o,n,e,t=r.getPlaylistDOM().find(".jouele[href]:not(.jouele_destroyed)"),l=r.getPlaylistDOM().find(".jouele_inited"),i=r.getPlaylistDOM().find(".jouele-control[data-href]:not(.jouele .jouele-control):not(.jouele_destroyed)");if(t.add(l).add(i).each(function(e,t){var a=d(t);if(a.hasClass("jouele_inited")&&(n=a.data("jouele")),r.$link&&t===r.$link[0]||r.$control&&t===r.$control[0])return o=e,!1}),d.isArray(d.Jouele.playlist[a]))if(d.Jouele.playlist[a][0].getPlaylistDOM()[0]!==r.getPlaylistDOM()[0])d.Jouele.playlist.splice(a,0,[r]);else{for(var s=0;s<d.Jouele.playlist[a].length;s++)if(d.Jouele.playlist[a][s]===n){e=s;break}void 0===d.Jouele.playlist[a][e+1]?0===o?d.Jouele.playlist[a].splice(0,0,r):d.Jouele.playlist[a].push(r):d.Jouele.playlist[a].splice(e+1,0,r)}else d.Jouele.playlist[a]=[r]}else d.Jouele.playlist.splice(a,0,[r]);return a},checkOptions:function(e){var t=e;return g.makeSeconds(e.length)||(t.length=0),"boolean"!=typeof e.repeat&&(t.repeat=!1),"boolean"!=typeof e.hideTimelineOnPause&&(t.hideTimelineOnPause=!1),"boolean"!=typeof e.spaceControl&&(t.spaceControl=!1),"boolean"!=typeof e.pauseOnSpace&&(t.pauseOnSpace=!1),"boolean"!=typeof e.playOnSpace&&(t.playOnSpace=!1),"boolean"!=typeof e.scrollOnSpace&&(t.scrollOnSpace=!0),t},checkNewOptions:function(e,t){var a=t;return""===d.trim(t.title)&&(a.title=e.title),g.makeSeconds(t.length)||(a.length=e.length),"boolean"!=typeof t.repeat&&(a.repeat=e.repeat),"boolean"!=typeof t.hideTimelineOnPause&&(a.hideTimelineOnPause=e.hideTimelineOnPause),"boolean"!=typeof t.spaceControl&&(a.spaceControl=e.spaceControl),"boolean"!=typeof t.pauseOnSpace&&(a.pauseOnSpace=e.pauseOnSpace),"boolean"!=typeof t.playOnSpace&&(a.playOnSpace=e.playOnSpace),"boolean"!=typeof t.scrollOnSpace&&(a.scrollOnSpace=e.scrollOnSpace),a},checkGlobalOptions:function(){var e=this;return(e.getOptions().pauseOnSpace||e.getPlaylistDOM().attr("data-pause-on-space"))&&(d.Jouele.options.pauseOnSpace=!0),(e.getOptions().playOnSpace||e.getPlaylistDOM().attr("data-play-on-space"))&&(d.Jouele.options.playOnSpace=!0),e.getOptions().scrollOnSpace&&!e.getPlaylistDOM().attr("data-scroll-on-space")||(d.Jouele.options.scrollOnSpace=!1),(e.getOptions().spaceControl||e.getPlaylistDOM().attr("data-space-control"))&&(d.Jouele.options.pauseOnSpace=!0,d.Jouele.options.playOnSpace=!0,d.Jouele.options.scrollOnSpace=!1),e},pushControl:function(a,t){var r=t?void 0:this,o=t?d.Jouele.controls:this.getTrack().controls,e=a.attr("data-type");switch(e){case"time-toggle":"true"===a.attr("data-remaining")?o["time-remaining"]=o["time-remaining"].add(a):(a.attr("data-remaining","false"),o["time-elapsed"]=o["time-elapsed"].add(a)),a.off("click.jouele").on("click.jouele",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;"true"===a.attr("data-remaining")?(d.each(o["time-remaining"],function(e,t){a[0]===t&&o["time-remaining"].splice(e,1)}),o["time-elapsed"]=o["time-elapsed"].add(a),a.attr("data-remaining","false")):(d.each(o["time-elapsed"],function(e,t){a[0]===t&&o["time-elapsed"].splice(e,1)}),o["time-remaining"]=o["time-remaining"].add(a),a.attr("data-remaining","true")),f.updateTimeDisplay.call(r)}).addClass("jouele-is-interactive");break;case"seek":var n=a.attr("data-to"),l=a.attr("data-range");if(l){var i=0<l.indexOf("…")?l.indexOf("…"):l.indexOf("..."),s=0<l.indexOf("…")?l.indexOf("…")+1:l.indexOf("...")+3,c=g.formatTime(g.makeSeconds(l.substr(0,i)),!0),u=g.formatTime(g.makeSeconds(l.substr(s)),!0);a.data({"range-start":c,"range-end":u})}a.off("click.jouele").on("click.jouele",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;if(n&&r.getTrack().player.playFrom.call(r,n),l){var e=0<l.indexOf("…")?l.indexOf("…"):l.indexOf("...");n||r.getTrack().player.playFrom.call(r,l.substr(0,e))}}).addClass("jouele-is-interactive");break;case"timeline":a.off("mousedown.jouele touchstart.jouele").on("mousedown.jouele touchstart.jouele",function(e){if("mousedown"===e.type&&1!==e.which)return!1;if(!((r=t?g.getInstance():r)instanceof h))return!1;if(r.getTrack().player.seekingOnTimeline.isSeeking=!0,r.getTrack().player.seekingOnTimeline.seekingInstance=r,p=a,!r.getTrack().player.howler){if(!y.createHowler.call(r))return y.breakPlayer.call(r),!1;r.getTrack().player.howler.load(),r.getTrack().player.isStarted=!0}r.getTrack().player.seekingOnTimeline.seekingPosition=g.getEventPoint(e),f.updateState.call(r),f.updateTitle.call(r)}).addClass("jouele-is-interactive");break;case"play-pause":a.off("click.jouele").on("click.jouele",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;!r.getTrack().player.isPaused&&r.getTrack().player.isStarted?r.getTrack().player.pause.call(r):r.getTrack().player.play.call(r)}).addClass("jouele-is-interactive");break;case"play":a.off("click.jouele").on("click.jouele",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;r.getTrack().player.play.call(r)}).addClass("jouele-is-interactive");break;case"pause":a.off("click.jouele").on("click.jouele",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;r.getTrack().player.pause.call(r)}).addClass("jouele-is-interactive");break;case"title":a.off("jouele:title").on("jouele:title",function(){if(!((r=t?g.getInstance():r)instanceof h))return!1;a.html(r.getTrack().player.title)})}return void 0!==o[e]&&0<o[e].length?o[e]=o[e].add(a):o[e]=a,a.addClass(t?"":"jouele-is-available").addClass("jouele_inited"),r},createJoueleDOM:function(){var e=this,t=d(document.createElement("div")),a=d(document.createElement("div")),r=d(document.createElement("div"));return e.$container=t.data("jouele",e).addClass("jouele jouele_inited"+(!0===e.$link.data("first")?" jouele_first":"")+(e.getOptions().hideTimelineOnPause?" jouele_timeline_hide":"")+(e.getOptions().skin?" jouele-skin-"+e.getOptions().skin:"")),e.$container.append(a.addClass("jouele-info").append([d(document.createElement("div")).addClass("jouele-info-time").append(d(document.createElement("div")).addClass("jouele-info-time__current jouele-control").attr("data-href",e.getHref()).attr("data-type","time-elapsed").text(e.getTotalTime()?"0:00":""),d(document.createElement("div")).addClass("jouele-info-time__total jouele-control").attr("data-href",e.getHref()).attr("data-type","time-total").text(e.getTotalTime()?g.formatTime(g.makeSeconds(e.getTotalTime()),!0):"")),d(document.createElement("div")).addClass("jouele-info-control").append(d(document.createElement("div")).addClass("jouele-info-control-button").append(d(document.createElement("span")).addClass("jouele-info-control-button-icon jouele-info-control-button-icon_unavailable").html('<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><g class="jouele-svg-color"><path d="m4 6.7l3.8 3.7-3.8 2.1z"/><path d="m.2 2.2l.6-.5 11 11.1-.5.5z"/><path d="m4 4.3v-.8l8 4.5-2.7 1.5z"/></g></svg>'),d(document.createElement("a")).attr("href",e.getHref()).addClass("jouele-info-control-link jouele-hidden").append(d(document.createElement("span")).addClass("jouele-info-control-button-icon jouele-info-control-button-icon_play jouele-control jouele-hidden").attr("data-href",e.getHref()).attr("data-type","play-pause").html('<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><path class="jouele-svg-color" d="m4 3.5l8 4.5-8 4.5z"/></svg>'))),d(document.createElement("div")).addClass("jouele-info-control-text jouele-control").attr("data-href",e.getHref()).attr("data-type","title"))]),r.addClass("jouele-progress").append(d(document.createElement("div")).addClass("jouele-progress-line jouele-control").attr("data-href",e.getHref()).attr("data-type","timeline").append(d(document.createElement("div")).addClass("jouele-progress-line-bar_base"),d(document.createElement("div")).addClass("jouele-progress-line-bar_play jouele-control").attr("data-href",e.getHref()).attr("data-type","elapsed"),d(document.createElement("div")).addClass("jouele-progress-line-lift jouele-hidden jouele-control").attr("data-href",e.getHref()).attr("data-type","position")))).promise().done(function(){n.initInnerControls.call(e)}),e},insertJoueleDOM:function(){var e=this;return e.$container&&(e.$container.find(".jouele-hidden").removeClass("jouele-hidden"),e.$container.find(".jouele-info-control-button-icon_unavailable").addClass("jouele-hidden"),e.$container.find(".jouele-info-control-link").off("click.jouele").on("click.jouele",function(e){e.preventDefault()}),e.$link.after(e.$container),e.$link.detach()),e},findPlaylistInDOM:function(){return void 0!==this.$control&&0<this.$control.length?this.$control.parents(".jouele-playlist").eq(0):this.$link.parents(".jouele-playlist").eq(0)},initInnerControls:function(){var e=this;return d.each(e.$container.find(".jouele-control"),function(){n.createJouele(d(this),e.getOptions())}),e},pushToHistory:function(){var e=this;return(0===d.Jouele.history.length||d.Jouele.history[0].getTrack()!==e.getTrack()||d.Jouele.history[0].getTrack()===e.getTrack()&&e.getTrack().player.isPaused&&d.Jouele.history[0]!==e)&&(d.Jouele.history.unshift(e),d.each(e.getTrack().controls.title.add(d.Jouele.controls.title),function(e,t){d(t).trigger("jouele:title")})),e}},y={createHowler:function(){var t=this;return t.getTrack().player.howler=new Howl({src:[t.getHref()],format:["mp3"],html5:!0,preload:!1,loop:t.getOptions().repeat,onloaderror:function(){function e(){t.getTrack().player.isPlayed?t.pause():y.breakPlayer.call(t)}!t.getTrack()||"object"==typeof t.getTrack().player.callbacks&&"function"==typeof t.getTrack().player.callbacks.onloaderror&&!1===t.getTrack().player.callbacks.onloaderror()||e()},onload:function(){!t.getTrack()||"object"==typeof t.getTrack().player.callbacks&&"function"==typeof t.getTrack().player.callbacks.onload&&!1===t.getTrack().player.callbacks.onload()||y.Events.onLoad.call(t)},onplay:function(){!t.getTrack()||"object"==typeof t.getTrack().player.callbacks&&"function"==typeof t.getTrack().player.callbacks.onplay&&!1===t.getTrack().player.callbacks.onplay()||y.Events.onPlay.call(t)},onpause:function(){!t.getTrack()||"object"==typeof t.getTrack().player.callbacks&&"function"==typeof t.getTrack().player.callbacks.onpause&&!1===t.getTrack().player.callbacks.onpause()||y.Events.onPause.call(t)},onseek:function(){if(t.getTrack()){if(t.getTrack().player.howler._sounds[0]._ended&&0===t.getTrack().player.howler.seek())return!0;if(t.getTrack().player.isEnded)return!0;("object"!=typeof t.getTrack().player.callbacks||"function"!=typeof t.getTrack().player.callbacks.onseek||!1!==t.getTrack().player.callbacks.onseek())&&y.Events.onSeek.call(t)}},onend:function(){!t.getTrack()||"object"==typeof t.getTrack().player.callbacks&&"function"==typeof t.getTrack().player.callbacks.onend&&!1===t.getTrack().player.callbacks.onend()||y.Events.onEnd.call(t)}}),f.updateTimeDisplay.call(t),t},play:function(){var e=this;if(e.getTrack().player.isPlaying)return e;if(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()&&d.Jouele.history[0].getTrack().player!==e.getTrack().player&&(d.Jouele.history[0].getTrack().player.isPaused||d.Jouele.history[0].pause()),!e.getTrack().player.howler&&!y.createHowler.call(e))return y.breakPlayer.call(e),e;if(n.pushToHistory.call(e),y.Interface.makeInterfacePlay.call(e),e.getTrack().player.isLoaded?e.getTrack().player.howler.play():e.getTrack().player.isStarted||e.getTrack().player.howler.load(),e.getTrack().player.isStarted=!0,k.show.call(e),e.getTrack().player.howler._sounds.length<1)return e;if(g.hasRequestAnimationFrame)e.getTrack().player.updateStateTimer&&f.cancelAnimationFrame.call(e),e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=f.requestAnimationFrameProgress.call(e,!0));else{var t=Math.round(1e3*(Math.ceil(e.getTrack().player.howler.seek())-e.getTrack().player.howler.seek()))/1e3;setTimeout(function(){f.updateState.call(e,!0),e.getTrack().player.updateStateTimer&&clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=setInterval(function(){f.updateState.call(e,!0)},1e3))},1e3*t)}return e},pause:function(){var e=this;return!e.getTrack().player.howler||e.getTrack().player.isPaused||(k.hide.call(e),y.Interface.makeInterfacePause.call(e),e.getTrack().player.seekingOnTimeline.isSeeking=!1,e.getTrack().player.seekingOnTimeline.seekingInstance=!1,e.getTrack().player.howler&&e.getTrack().player.howler.pause()),e},playFrom:function(e){var t=this;if(!e)return t;if(t.getTotalTime()&&g.makeSeconds(e)>t.getTotalTime()&&(e=t.getTotalTime()),g.makeSeconds(e)<0&&(e=0),t.getTrack().player.seekTime=g.makeSeconds(e),f.updateState.call(t),0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()&&d.Jouele.history[0].getTrack().player!==t.getTrack().player&&(d.Jouele.history[0].getTrack().player.isPaused||d.Jouele.history[0].pause()),!t.getTrack().player.howler&&!y.createHowler.call(t))return y.breakPlayer.call(t),t;if(t.getTrack().player.isEnded=!1,t.getTrack().player.isLoaded&&t.getTotalTime()?(k.show.call(t,200),t.getTrack().player.howler.seek(t.getTrack().player.seekTime)):(t.getTrack().player.isStarted||t.getTrack().player.howler.load(),k.show.call(t)),n.pushToHistory.call(t),y.Interface.makeInterfacePlay.call(t),t.getTrack().player.isStarted=!0,t.getTrack().player.isLoaded){var a,r=t.getTrack().player.howler.seek();setTimeout(function(){t.getTrack()&&r===t.getTrack().player.howler.seek()&&k.show.call(t),a=setInterval(function(){t.getTrack()&&r===t.getTrack().player.howler.seek()||(k.hide.call(t),clearTimeout(a))},50)},100),f.updateState.call(t)}return t},seek:function(e){var t=this,a=Math.round(100*parseFloat(e))/100;if(isNaN(a))return t;if(100<a&&(a=100),a<0&&(a=0),t.getTrack().player.seekPosition=a,0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()&&d.Jouele.history[0].getTrack().player!==t.getTrack().player&&(d.Jouele.history[0].getTrack().player.isPaused||d.Jouele.history[0].pause()),!t.getTrack().player.howler&&!y.createHowler.call(t))return y.breakPlayer.call(t),t;if(n.pushToHistory.call(t),y.Interface.makeInterfacePlay.call(t),t.getTrack().player.isEnded=!1,t.getTotalTime()?(t.getTrack().player.seekTime=Math.round(t.getTotalTime()*(a/100)*100)/100,t.getTrack().player.isLoaded?(t.getTrack().player.howler.seek(t.getTrack().player.seekTime),t.getTrack().player.seekTime===t.getTotalTime()?(setTimeout(function(){t.getTrack().player.howler._playLock&&t.getTrack().player.howler._emit.call(t.getTrack().player.howler,"seek",t.getTrack().player.howler._sounds[0])},500),k.show.call(t,500)):k.show.call(t,200)):(t.getTrack().player.isStarted||t.getTrack().player.howler.load(),k.show.call(t))):(t.getTrack().player.isStarted||t.getTrack().player.howler.load(),k.show.call(t)),t.getTrack().player.isStarted=!0,f.updateState.call(t),t.getTrack().player.isLoaded&&t.getTrack().player.seekTime!==t.getTotalTime()){var r,o=t.getTrack().player.howler.seek();setTimeout(function(){t.getTrack()&&o===t.getTrack().player.howler.seek()&&k.show.call(t),r=setInterval(function(){t.getTrack()&&o===t.getTrack().player.howler.seek()||(k.hide.call(t),clearTimeout(r))},50)},100),f.updateState.call(t)}return t},playNext:function(){var e=this;if(e.getOptions().repeat)return e.getTrack().player.isPlayed||e.play(),e;if(g.isMobile)return e;for(var t=0;t<d.Jouele.history[0].getPlaylist().length;t++)if(d.Jouele.history[0].getPlaylist()[t].getTrack()===d.Jouele.history[0].getTrack()){if(d.Jouele.history[0].getPlaylist()[t+1]instanceof h&&d.Jouele.history[0].getPlaylist()[t+1].getTrack()===d.Jouele.history[0].getTrack())continue;break}return d.Jouele.history[0].getPlaylist()[t+1]instanceof h?d.Jouele.history[0].getPlaylist()[t+1].play():d.Jouele.history[0].getPlaylistDOM().data("repeat")&&d.Jouele.history[0].getPlaylist()[0]instanceof h&&d.Jouele.history[0].getPlaylist()[0].play(),e},destroy:function(){var o=this,e=void 0!==o.$control&&0<o.$control.length;if((e&&o.getTrack().player.seekingOnTimeline.seekingInstance===o||!e&&o.getTrack().player.seekingOnTimeline.seekingInstance===o.$container.find(".jouele-control[data-type=timeline]").data("jouele"))&&(o.getTrack().player.seekingOnTimeline.isSeeking=!1,o.getTrack().player.seekingOnTimeline.seekingInstance=!1,o.getTrack().player.seekingOnTimeline.seekingPosition=null,o.getTrack().player.isLoaded||f.updateState.call(o),!o.getTrack().player.isStarted||o.getTrack().player.isPlaying||o.getTrack().player.isPlayed||y.Interface.makeInterfacePause.call(o)),e){var t="time-toggle"===o.$control.attr("data-type"),a=t?"true"===o.$control.attr("data-remaining")?"time-remaining":"time-elapsed":o.$control.attr("data-type");o.getTrack().controls[a]=o.getTrack().controls[a].filter(function(e,t){return!(t===o.$control[0])}),t&&(o.getTrack().controls["time-toggle"]=o.getTrack().controls["time-toggle"].filter(function(e,t){return!(t===o.$control[0])})),0<p.length&&p===o.$control&&o.$control.data("jouele-destroyed",o),o.$control.off(".jouele").removeData("jouele").removeData("range-start").removeData("range-end").removeClass("jouele-is-available jouele-is-loaded jouele-is-paused jouele-is-buffering jouele-is-within jouele-is-playing jouele-is-interactive")}else{for(var r=0;r<o.getTrack().instances.length;r++)if(o.getTrack().instances[r]===o){o.getTrack().instances.splice(r,1);break}d.each(o.getTrack().controls,function(e,t){o.getTrack().controls[e]=t.filter(function(e,t){var a=d(t),r=!1;return a.data("jouele")instanceof h&&"function"==typeof a.data("jouele").getParentJouele&&(r=a.data("jouele").getParentJouele()===o),!r})}),0<p.length&&p.data("jouele").getParentJouele()===o&&p.data("jouele-destroyed",o)}for(var n=0;n<o.getPlaylist().length;n++)if(o.getPlaylist()[n]===o){o.getPlaylist().splice(n,1);break}if(0===o.getPlaylist().length)for(var l=0;l<d.Jouele.playlist.length;l++)if(d.Jouele.playlist[l]===o.getPlaylist()){d.Jouele.playlist.splice(l,1);break}var i=!1;if(0===o.getTrack().instances.length&&d.each(o.getTrack().controls,function(e,t){if(0!==t.length)return i=!1;i=!0}),i){var s=function(){o.getTrack().player.updateStateTimer&&(g.hasRequestAnimationFrame?f.cancelAnimationFrame.call(o):clearInterval(o.getTrack().player.updateStateTimer),o.getTrack().player.updateStateTimer=null),k.hide.call(o),o.getTrack().player.howler&&(o.getTrack().player.howler.unload(),o.getTrack().player.howler=void 0),delete u[o.getTrack().player.href],f.updateState.call(o),f.updateTitle.call(o)};if(o.getTrack().player.isPlaying){var c=o.getTrack().player.callbacks.onpause;o.getTrack().player.callbacks.onpause=function(){return c&&c(),s(),!1},o.pause()}else o.getTrack().player.isStarted&&y.Interface.makeInterfacePause.call(o),s()}return e?(o.$control.removeClass("jouele_inited").addClass("jouele_destroyed"),o.$control):(o.$container.after(o.$link).detach(),o.$link.removeData("jouele").addClass("jouele_destroyed"),o.$link)},breakPlayer:function(){var e=this;e.getTrack().player.isBroken=!0,e.getTrack().player.updateStateTimer&&(g.hasRequestAnimationFrame?f.cancelAnimationFrame.call(e):clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.updateStateTimer=null),e.getTrack().player.seekingOnTimeline.isSeeking=!1,e.getTrack().player.seekingOnTimeline.seekingInstance=!1,e.getTrack().player.seekingOnTimeline.seekingPosition=null,e.getTrack().player.seekTime=null,e.getTrack().player.seekPosition=null,k.hide.call(e),f.updateTimeDisplay.call(e),d.each(e.getTrack().instances,function(e,t){t.$container&&(t.$container.addClass("jouele_broken"),t.$container.find(".jouele-info-control-button-icon_unavailable").removeClass("jouele-hidden"),t.$container.find(".jouele-info-control-link").addClass("jouele-hidden").off("click.jouele"))}),d.each(e.getTrack().controls,function(e,t){t.off(".jouele")}),f.updateControlsClasses.call(e,"jouele-is-available","remove"),f.updateControlsClasses.call(e,"jouele-is-loaded","remove"),f.updateControlsClasses.call(e,"jouele-is-paused","remove"),f.updateControlsClasses.call(e,"jouele-is-buffering","remove"),f.updateControlsClasses.call(e,"jouele-is-within","remove"),f.updateControlsClasses.call(e,"jouele-is-playing","remove"),f.updateControlsClasses.call(e,"jouele-is-interactive","remove"),f.updateControlsClasses.call(e,"jouele-is-unavailable","add");for(var t=0;t<d.Jouele.history.length;t++)d.Jouele.history[t].getTrack()===e.getTrack()&&(d.Jouele.history.splice(t,1),t--);for(var a=0;a<d.Jouele.playlist.length;a++){for(var r=0;r<d.Jouele.playlist[a].length;r++)d.Jouele.playlist[a][r]instanceof h&&d.Jouele.playlist[a][r].getTrack()===e.getTrack()&&(d.Jouele.playlist[a].splice(r,1),r--);0===d.Jouele.playlist[a].length&&(d.Jouele.playlist.splice(a,1),a--)}return f.updateState.call(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()?d.Jouele.history[0]:e),f.updateLength.call(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()?d.Jouele.history[0]:e),f.updateTitle.call(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()?d.Jouele.history[0]:e),e},Interface:{makeInterfacePause:function(){var e=this;return e.getTrack().player.isPaused=!0,e.getTrack().player.isPlaying=!1,f.updateControlsClasses.call(e,"jouele-is-paused","add"),f.updateControlsClasses.call(e,"jouele-is-playing","remove"),e},makeInterfacePlay:function(){return this.getTrack().player.isPaused=!1,f.updateControlsClasses.call(this,"jouele-is-paused","remove"),f.updateControlsClasses.call(this,"jouele-is-playing","add"),this}},Events:{onPause:function(){var e=this;return e.getTrack().player.updateStateTimer&&(g.hasRequestAnimationFrame?f.cancelAnimationFrame.call(e):clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.updateStateTimer=null),y.Interface.makeInterfacePause.call(e),e.getTrack().player.seekingOnTimeline.isSeeking=!1,e.getTrack().player.seekingOnTimeline.seekingInstance=!1,e.getTrack().player.seekTime=null,e.getTrack().player.seekPosition=null,a=null,e},onPlay:function(){var e=this;if(0<d.Jouele.history.length&&void 0!==d.Jouele.history[0].getTrack()&&d.Jouele.history[0].getTrack().player!==e.getTrack().player&&(d.Jouele.history[0].getTrack().player.isPaused||d.Jouele.history[0].pause()),e.getTrack().player.isPaused)return e.getTrack().player.howler&&e.getTrack().player.howler.pause(),e;if(y.Interface.makeInterfacePlay.call(e),e.getTrack().player.isPlaying=!0,e.getTrack().player.isPlayed=!0,e.getTrack().player.seekTime=null,e.getTrack().player.seekPosition=null,e.getTrack().player.isEnded=!1,f.updateControlsClasses.call(e,"jouele-is-playing","add"),f.updateState.call(e),k.hide.call(e),g.hasRequestAnimationFrame)e.getTrack().player.updateStateTimer&&f.cancelAnimationFrame.call(e),e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=f.requestAnimationFrameProgress.call(e,!0,function(){e.getTrack().player.howler&&(a&&a===e.getTrack().player.howler.seek()?k.show.call(e,200):k.hide.call(e),a=e.getTrack().player.howler.seek())}));else{var t=Math.round(1e3*(Math.ceil(e.getTrack().player.howler.seek())-e.getTrack().player.howler.seek()))/1e3;setTimeout(function(){f.updateState.call(e,!0),e.getTrack().player.updateStateTimer&&clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=setInterval(function(){e.getTrack().player.howler&&(a&&a===e.getTrack().player.howler.seek()?k.show.call(e,200):k.hide.call(e),a=e.getTrack().player.howler.seek()),f.updateState.call(e,!0)},1e3))},1e3*t)}return e},onSeek:function(){var e=this;if(null!==e.getTrack().player.seekTime&&e.getTrack().player.seekTime!==e.getTotalTime()&&100!==e.getTrack().player.seekPosition&&.01<Math.abs(e.getTrack().player.howler.seek()-e.getTrack().player.seekTime))return y.seek.call(e),e;if(e.getTrack().player.isPaused&&e.getTrack().player.howler&&!e.getTrack().player.howler._sounds[0]._ended)return e.getTrack().player.howler&&!e.getTrack().player.howler._sounds[0]._paused&&e.getTrack().player.howler.pause(),e;if(e.getTrack().player.isPlaying||k.show.call(e,200),e.getTrack().player.updateStateTimer&&(g.hasRequestAnimationFrame?f.cancelAnimationFrame.call(e):clearInterval(e.getTrack().player.updateStateTimer)),e.getTrack().player.seekTime===e.getTotalTime())return e.getTrack().player.isPlayed?e.getTrack().player.isPlaying&&(e.getTrack().player.howler._sounds[0]._paused=!1):e.getTrack().player.isPlayed=!0,e.getTrack().player.howler._ended.call(e.getTrack().player.howler,e.getTrack().player.howler._sounds[0]),e;if(f.updateState.call(e),g.hasRequestAnimationFrame)e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=f.requestAnimationFrameProgress.call(e,!0,function(){e.getTrack().player.howler&&(a&&a===e.getTrack().player.howler.seek()?k.show.call(e,200):k.hide.call(e),a=e.getTrack().player.howler.seek())}));else{var t=Math.round(1e3*(Math.ceil(e.getTrack().player.howler.seek())-e.getTrack().player.howler.seek()))/1e3;setTimeout(function(){f.updateState.call(e,!0),e.getTrack().player.updateStateTimer&&clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.isPaused||(e.getTrack().player.updateStateTimer=setInterval(function(){e.getTrack().player.howler&&(a&&a===e.getTrack().player.howler.seek()?k.show.call(e,200):k.hide.call(e),a=e.getTrack().player.howler.seek()),f.updateState.call(e,!0)},1e3))},1e3*t)}return e.getTrack().player.isPlaying&&(e.getTrack().player.seekTime=null,e.getTrack().player.seekPosition=null),void 0===d.Jouele.history[0].getTrack()||d.Jouele.history[0].getTrack().player!==e.getTrack().player||e.getTrack().player.isPlaying&&e.getTrack().player.isStarted||y.play.call(e),e},onEnd:function(){var e=this;return k.hide.call(e),e.getTrack().player.updateStateTimer&&(g.hasRequestAnimationFrame?f.cancelAnimationFrame.call(e):clearInterval(e.getTrack().player.updateStateTimer),e.getTrack().player.updateStateTimer=null),e.getTrack().player.seekingOnTimeline.seekingPosition=100,f.updateState.call(e),e.getOptions().repeat||y.Interface.makeInterfacePause.call(e),e.getTrack().player.seekingOnTimeline.isSeeking=!1,e.getTrack().player.seekingOnTimeline.seekingInstance=!1,e.getTrack().player.seekingOnTimeline.seekingPosition=null,e.getTrack().player.seekTime=null,e.getTrack().player.seekPosition=null,e.getTrack().player.isEnded=!0,y.playNext.call(e),e},onLoad:function(){var e=this;return e.getTrack().player.isLoaded=!0,f.updateLength.call(e),f.updateControlsClasses.call(e,"jouele-is-loaded","add"),e.getTrack().player.seekingOnTimeline.isSeeking||(0<e.getTrack().player.seekPosition?e.getTrack().player.isPaused?(e.getTrack().player.seekTime=Math.round(e.getTotalTime()*(e.getTrack().player.seekPosition/100)*100)/100,e.getTrack().player.howler.seek(e.getTrack().player.seekTime)):y.seek.call(e,e.getTrack().player.seekPosition):e.getTrack().player.seekTime?e.getTrack().player.isPaused?e.getTrack().player.howler.seek(e.getTrack().player.seekTime):y.playFrom.call(e,e.getTrack().player.seekTime):e.getTrack().player.isPaused||y.play.call(e)),f.updateState.call(e),e}}},h=function(e,t){void 0===u[t.href]&&(u[t.href]=n.createTrack(t.href)),t=n.checkOptions(t);var a,r=d(),o=[];if(this.getOptions=function(){return t},this.getHref=function(){return this.getOptions().href},this.getTrack=function(){return u[this.getHref()]},this.getTitle=function(){return void 0!==this.getTrack()?this.getTrack().player.title:""},this.getTotalTime=function(){return void 0!==this.getTrack()?this.getTrack().player.totalTime:0},this.getElapsedTime=function(){return void 0!==this.getTrack()?this.getTrack().player.elapsedTime:0},this.getRemainingTime=function(){return void 0!==this.getTrack()?this.getTrack().player.remainingTime:0},this.getPlaylistDOM=function(){return r},this.getPlaylist=function(){return o},this.isPlaying=function(){return void 0!==this.getTrack()&&this.getTrack().player.isPlaying},this.isPlayed=function(){return void 0!==this.getTrack()&&this.getTrack().player.isPlayed},this.isPaused=function(){return void 0!==this.getTrack()&&this.getTrack().player.isPaused},this.isBroken=function(){return void 0!==this.getTrack()&&this.getTrack().player.isBroken},this.setOptions=function(e){return void 0===this.getTrack()||(t=d.extend(t,n.checkNewOptions(t,e)),this.getTrack().player.howler&&this.getTrack().player.howler.loop(t.repeat),f.updateTitle.call(this)),this},this.play=function(){return void 0!==this.getTrack()?this.getTrack().player.play.call(this):this},this.pause=function(){return void 0!==this.getTrack()?this.getTrack().player.pause.call(this):this},this.playFrom=function(e){return void 0!==this.getTrack()?this.getTrack().player.playFrom.call(this,e):this},this.seek=function(e){return void 0!==this.getTrack()?this.getTrack().player.seek.call(this,e):this},this.destroy=function(){return void 0!==this.getTrack()?y.destroy.call(this):this},e.hasClass("jouele")&&e.attr("href"))this.$container=null,this.$link=e,r=n.findPlaylistInDOM.call(this),o=d.Jouele.playlist[n.getPlaylistIndex.call(this)],this.getTrack().instances.push(this),f.updateLength.call(this),n.createJoueleDOM.call(this),f.updateTitle.call(this),n.checkGlobalOptions.call(this),n.insertJoueleDOM.call(this);else{if(!e.hasClass("jouele-control")||!e.attr("data-href"))return this;if(this.$control=e,f.updateLength.call(this),f.updateTitle.call(this),n.pushControl.call(this,e),0===this.$control.parents(".jouele").length)r=n.findPlaylistInDOM.call(this),o=d.Jouele.playlist[n.getPlaylistIndex.call(this)],n.checkGlobalOptions.call(this);else{a=this.$control.parents(".jouele").eq(0).data("jouele"),this.getParentJouele=function(){return a},this.getPlaylistDOM=function(){return a.getPlaylistDOM()},this.getPlaylist=function(){return a.getPlaylist()}}}return e.removeClass("jouele_destroyed"),e.data("jouele",this),this};d.Jouele={tracks:u,playlist:[],history:[],controls:{"play-pause":d(),play:d(),pause:d(),"time-total":d(),"time-elapsed":d(),"time-remaining":d(),timeline:d(),elapsed:d(),remaining:d(),position:d(),seek:d(),title:d()},options:{pauseOnSpace:!1,playOnSpace:!1,scrollOnSpace:!0},helpers:{formatTime:g.formatTime,makeSeconds:g.makeSeconds},version:"3.0.7-beta.2"},d(document).off("keydown.jouele").on("keydown.jouele",t),d(document).off("mouseup.jouele touchend.jouele touchcancel.jouele mousemove.jouele touchmove.jouele").on("mouseup.jouele touchend.jouele touchcancel.jouele mousemove.jouele touchmove.jouele",r),d.fn.jouele=function(t){var a;return"undefined"==typeof Howl?(g.showError("Please include `howler.js 2.0.15` into your page — it is necessary for Jouele"),this):1===this.length&&(a=this.data("jouele"))instanceof h?"string"==typeof t&&void 0!==a[t]&&"function"==typeof a[t]&&"number"!=typeof a[t].nodeType?a[t].call(a):this:this.each(function(){var e=d(this);if(a=e.data("jouele"),!e.hasClass("jouele")&&!e.hasClass("jouele-control"))return g.showError("Please add `jouele` or `jouele-control` class to this element"),this;e.data("jouele")||n.createJouele(e,t)})};d(function(){d("a.jouele[href]").add(".jouele-control[data-type]").jouele()})}(jQuery);