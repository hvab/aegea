$&&$(function(){!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21)}([function(e,t,n){"use strict";function r(e){function t(e){"function"==typeof e?l?(n.off(l+".e2NiceError").on(l+".e2NiceError",function(){n.off(l+".e2NiceError"),e()}),n.addClass(o)):(n.addClass(o),e()):n.addClass(o)}var n=$(".e2-nice-error"),r=n.find(".e2-nice-error-inner"),o="e2-nice-error_hidden",s={en:{"er--js-server-error":"Server error","er--js-appears-offline":"The connection appears to be offline","er--js-connection-timeout":"Server does not respond for too long","er--js-file-upload-not-supported":"The browser does not support file upload","er--js-no-files-to-upload":"No files to upload","er--js-can-upload-only-one-file":"Only one file may be uploaded here","er--supported-only-png-jpg-gif":"Only png, jpg, & gif images are supported","er--unsupported-file":"Only png, jpg, gif, & svg images, mp4 & mov videos, and mp3 audio files are supported"},ru:{"er--js-server-error":"Ошибка на сервере","er--js-appears-offline":"Похоже, что нет интернета","er--js-connection-timeout":"Сервер не отвечает слишком долго","er--js-file-upload-not-supported":"Браузер не поддерживает загрузку файлов","er--js-no-files-to-upload":"Нет файлов для загрузки","er--js-can-upload-only-one-file":"Можно загрузить только одно изображение","er--supported-only-png-jpg-gif":"Поддерживаются только изображения png, jpg и gif","er--unsupported-file":"Поддерживаются только изображения png, jpg, gif и svg, видео mp4 и mov и аудиофайлы mp3"},fr:{"er--js-server-error":"Erreur sur le serveur","er--js-appears-offline":"La connexion semble être hors ligne","er--js-connection-timeout":"Le serveur ne répond pas trop longtemps","er--js-file-upload-not-supported":"Le navigateur ne prend pas en charge le téléchargement de fichiers","er--js-no-files-to-upload":"Aucun fichier à télécharger","er--js-can-upload-only-one-file":"Un seul fichier peut être téléchargé ici","er--supported-only-png-jpg-gif":"Seules les images png, jpg et gif sont prises en charge","er--unsupported-file":"Seuls les images png, jpg, gif et svg, vidéos mp4 et mov et les fichiers audio mp3 sont pris en charge"},be:{"er--js-server-error":"Памылка на серверы","er--js-appears-offline":"Падобна на тое, што няма інтэрнэту","er--js-connection-timeout":"Сервер не адказвае занадта доўга","er--js-file-upload-not-supported":"Браўзэр не падтрымлівае загрузку файлаў","er--js-no-files-to-upload":"Няма файлаў для загрузкі","er--js-can-upload-only-one-file":"Можна загрузіць толькі адна выява","er--supported-only-png-jpg-gif":"Падтрымлiваюцца толькi выявы png, jpg i gif","er--unsupported-file":"Падтрымлiваюцца толькi выявы png, jpg, gif i svg, відэа mp4 і mov i аудыёфайлы mp3"},uk:{"er--js-server-error":"Помилка на сервері","er--js-appears-offline":"Схоже, що немає інтернету","er--js-connection-timeout":"Сервер не відповідає занадто довго","er--js-file-upload-not-supported":"Браузер не підтримує завантаження файлів","er--js-no-files-to-upload":"Немає файлів для завантаження","er--js-can-upload-only-one-file":"Можна завантажити лише одне зображення","er--supported-only-png-jpg-gif":"Підтримуються лише зображення png, jpg і gif","er--unsupported-file":"Підтримуються лише зображення png, jpg, gif і svg, відео mp4 і mov і аудіофайли mp3"}},l=(0,i.default)();!function(){var i=e.message?e.message:"",l=$("html").attr("lang")||"en";if(i&&(void 0!==s[l][e.message]?i=s[l][e.message]:void 0!==s.en[e.message]&&(i=s.en[e.message]),n.hasClass(o)?r.html(i).promise().done(function(){n.removeClass(o),$(document).on("mousedown.e2NiceError keydown.e2NiceError",function(){$(document).off(".e2NiceError"),t()})}):t(function(){r.html(i).promise().done(function(){n.removeClass(o),$(document).on("mousedown.e2NiceError keydown.e2NiceError",function(){$(document).off(".e2NiceError"),t()})})})),"object"===a(e.debug)&&"object"===("undefined"==typeof console?"undefined":a(console))){var d,u;"function"==typeof window.getComputedStyle&&"function"==typeof window.getComputedStyle(document.documentElement).getPropertyValue&&(d=window.getComputedStyle(document.documentElement).getPropertyValue("--errorColor"),u=window.getComputedStyle(document.documentElement).getPropertyValue("--backgroundColor")),"function"==typeof console.log&&("string"==typeof e.debug.message?console.log("%c "+e.debug.message+" ","background: "+(d||"#D20D19")+"; color: "+(u||"#fff")+";"):"string"==typeof i&&console.log("%c "+i+" ","background: "+(d||"#D20D19")+"; color: "+(u||"#fff")+";")),"function"==typeof console.dir&&"function"==typeof console.log&&"object"===a(e.debug.data)&&$.each(e.debug.data,function(e,t){if("object"===(void 0===t?"undefined":a(t))&&t instanceof FormData&&"function"==typeof t.entries){console.log(e);var n=!0,r=!1,o=void 0;try{for(var i,s=t.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;console.dir(l[1])}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}}else console.log(e),console.dir(t)})}}()}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.localStorage,a=function(){if(void 0===r)return!1;try{return r.setItem("test","test"),r.removeItem("test"),!0}catch(e){return!1}}();t.localStorage=r,t.isLocalStorageAvailable=a},function(e,t,n){"use strict";function r(e){var t={type:"post",timeout:1e4,dataType:"json",cache:!1},n=e.success,r=e.error,o=e.complete,s=e.abort;delete e.success,delete e.error,delete e.complete,delete e.abort;var l=$.ajax($.extend(t,e));return l.done(function(t,o,s){"object"===(void 0===t?"undefined":a(t))?!0===t.success?"function"==typeof n&&n(t,o,s):("object"===a(t.error)?"string"==typeof t.error.message?(0,i.default)({message:t.error.message,debug:{data:{requestData:e.data,response:t}}}):(0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response.error.message` is not available",data:{requestData:e.data,response:t}}}):(0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response.error` is not an object",data:{requestData:e.data,response:t}}}),"function"==typeof r&&r(s,o)):((0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response` is not an object",data:{requestData:e.data,response:t}}}),"function"==typeof r&&r(s,o))}),l.fail(function(e,t){if("object"===(void 0===e?"undefined":a(e))&&"number"==typeof e.status&&"string"==typeof t)if(0===e.status){if("abort"===t)return"function"==typeof s&&s(e,t),!1;"timeout"===t?(0,i.default)({message:"er--js-connection-timeout"}):(0,i.default)({message:"er--js-appears-offline"})}else e.status>=400?(0,i.default)({message:"er--js-server-error",debug:{message:"Server responded with HTTP status code "+e.status,data:{jqXHR:e}}}):200===e.status&&"parsererror"===t?(0,i.default)({message:"er--js-server-error",debug:{message:"Server response is not JSON",data:{jqXHR:e}}}):(0,i.default)({message:"er--js-server-error",debug:{message:"Unexpected server response HTTP status code "+e.status,data:{jqXHR:e}}});else(0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: jqXHR is not an object or it does not contain required fields",data:{jqXHR:e}}});"function"==typeof r&&r(e,t)}),l.always(function(){"function"==typeof o&&o(arguments)}),l}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";function r(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e];return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){var n=e.find("animateTransform"),r=e.find("circle.e2-progress");n.length&&(t?"indefinite"!==n[0].getAttribute("repeatCount")&&(n[0].setAttribute("repeatCount","indefinite"),n[0].beginElement()):n[0].setAttribute("repeatCount","1"),r.length&&(0,o.default)(r,0,!0))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r},function(e,t,n){"use strict";function r(e,t,n){if("number"==typeof t){var r=Math.max(Math.min(t,.9),.1);n&&e.attr("class","e2-progress e2-progress_notransition"),e[0].style.strokeDashoffset=Math.floor(245-245*r),n&&e.attr("class","e2-progress")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mac:/Macintosh/.test(navigator.userAgent),iosdevice:/(iPad)|(iPhone)/.test(navigator.userAgent),touchdevice:function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var e=" -webkit- -moz- -o- -ms- ".split(" "),t=["(",e.join("touch-enabled),("),"heartz",")"].join("");return function(e){return"function"==typeof window.matchMedia&&window.matchMedia(e).matches}(t)}()}},function(e,t,n){"use strict";function r(e,t,n){var r=void 0,a={event:"keydown",target:document,prevent:!1};n=d(n,a),Array.isArray(e)?(r=[],f.default.mac||(e=e.map(function(e){return e.replace("Cmd","Ctrl")})),e.forEach(function(e){return r.push(o(e,t,n))})):(f.default.mac||(e=e.replace("Cmd","Ctrl")),r=o(e,t,n));var i="string"==typeof n.target?document.querySelector(n.target):n.target;Array.isArray(r)?r.forEach(function(r,a){c[e[a]]||(c[e[a]]=[]),i.addEventListener(n.event,r,!1),c[e[a]].push({event:n.event,elem:i,fn:t,realFn:r})}):(c[e]||(c[e]=[]),i.addEventListener(n.event,r,!1),c[e].push({event:n.event,elem:i,fn:t,realFn:r}))}function a(e,t,n){function r(e){c[e]&&c[e].slice().reverse().forEach(function(e,r,a){e.fn!==t||n.target&&e.elem!==n.target||(e.elem.removeEventListener(e.event,e.realFn,!1),a.splice(a.length-1-r,1))})}n=n||{},Array.isArray(e)?e.forEach(r):r(e)}function o(e,t,n){return e=l(e).split("+"),function(r){i(r,e)&&(t(r),n.prevent&&(r.preventDefault(),r.stopPropagation()))}}function i(e,t){var n=s(e.keyCode),r={enter:13},a={},o=["shift","ctrl","alt","cmd"],i=0;o.forEach(function(e){a[e]={wanted:!1,pressed:!1}}),e.shiftKey&&(a.shift.pressed=!0),e.ctrlKey&&(a.ctrl.pressed=!0),e.altKey&&(a.alt.pressed=!0),e.metaKey&&(a.cmd.pressed=!0);for(var l=0;l<t.length;l++){var d=t[l];o.indexOf(d)>-1?(i++,a[d].wanted=!0):(d.length>1&&r[d]===e.keyCode||n===d)&&i++}return t.length===i&&Object.keys(a).reduce(function(e,t){return e&&a[t].wanted===a[t].pressed},!0)}function s(e){switch(e){case 91:case 93:return"MetaKey";case 188:return",";case 190:return".";case 219:return"[";case 221:return"]";default:return String.fromCharCode(e).toLowerCase()}}function l(e){return e.toLowerCase().replace(/\s/g,"")}function d(e,t){if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.unbindKeys=t.bindKeys=void 0;var u=n(6),f=function(e){return e&&e.__esModule?e:{default:e}}(u),c={};t.bindKeys=r,t.unbindKeys=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=this,t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode("::selection { background: transparent; }")),x.forEach(function(r){function a(){function r(){function o(){e.selectionStart=a,e.selectionEnd=i,t.removeChild(n)}t.appendChild(n),setTimeout(o,10),(0,y.unbindKeys)(g,r,{target:e})}var a=e.selectionStart,i=e.selectionEnd,g=["Cmd+Z","Ctrl+Z"];if("inline"!==s||-1===e.value.substring(a,i).indexOf("\n")){var v=d({name:o,pattern:l,text:e.value,start:a,end:i,isConsequent:!0});console.log(v),v.isWrapped?m({name:o,pattern:l,elem:e,start:a,end:i,parsed:v,prefix:u,nextPrefix:f,suffix:c}):p({name:o,pattern:l,elem:e,start:a,end:i,parsed:v,prefix:u,nextPrefix:f,suffix:c}),(0,y.bindKeys)(g,r,{target:e}),$(e).on("input",function(){(0,y.unbindKeys)(g,r,{target:e})})}}var o=r.name,i=r.keys,s=r.type,l=r.regexp,d=r.parse,u=r.prefix,f=r.nextPrefix,c=r.suffix,p=r.wrap,m=r.unwrap;(0,y.bindKeys)(i,a,{target:e,prevent:!0})})}function o(e){var t=e.elem,n=e.text,r=e.start,a=e.end,o=e.nextStart,i=e.nextEnd;t.selectionStart=r,t.selectionEnd=a,document.execCommand("insertText",!1,n),$(t).trigger("input"),t.selectionStart=o,t.selectionEnd=i}function i(e){var t=e.pattern,n=e.text,r=e.start,a=e.end,o=e.isConsequent,i=g({text:n,start:r,end:a}),s=i.value,l=i.start,d=m({text:s,start:r-l,end:a-l,pattern:t,isConsequent:o});if(!d)return{isWrapped:!1};var u=d.value.split(d.unwrappedValue);return h({},d,{isWrapped:!0,realStart:d.start+l,realEnd:d.end+l,prefixLength:u[0].length,suffixLength:u[1].length})}function s(e){var t=e.elem,n=e.start,r=e.end,a=e.prefix,i=e.suffix,s=v({elem:t,start:n,end:r});o({elem:t,text:""+a+s.value+i,start:s.start,end:s.end,nextStart:n+a.length,nextEnd:r+a.length})}function l(e){var t=e.elem,n=e.start,r=e.end,a=e.parsed,i=a.realStart,s=a.realEnd,l=a.unwrappedValue,d=a.prefixLength,u=a.suffixLength;if(!l.length)return void o({elem:t,text:l,start:i,end:s,nextStart:i,nextEnd:i});var f=i+d,c=s-u,p=n-f,m=r-c;p<0&&(m-=p,p=0),m>0&&(m=0),o({elem:t,text:l,start:i,end:s,nextStart:i+p,nextEnd:i+l.length+m})}function d(e){var t=e.elem,n=e.start,r=e.end,a=e.prefix,i=e.suffix,s=v({elem:t,start:n,end:r}),l=s.value,d=void 0;s.value?C.test(s.value)?(l=""+a+s.value+" "+i,d=s.end+a.length+1):(l=a+" "+s.value+i,d=s.start+a.length):(l=a+" "+i,d=n+a.length),o({elem:t,text:l,start:s.start,end:s.end,nextStart:d,nextEnd:d})}function u(e){var t=e.elem,n=e.start,r=e.end,a=e.parsed,o=a.realStart,i=a.unwrappedValue,s=a.prefixLength,d=i.split(" "),u=o+s;d.length>1&&C.test(d[0])?(t.selectionStart=u,t.selectionEnd=u+d[0].length):l({elem:t,start:n,end:r,parsed:a})}function f(e){var t=e.text,n=e.start,a=e.end,o=e.pattern,i=x.filter(function(e){return"block"===e.type}),s=t.split("\n").reduce(function(e,t){var s=e.lastIndex,l=s+t.length;if(!(s<=n&&l>=n||s>=n&&l<=a||s<=a&&l>=a))return h({},e,{lastIndex:l+1});var d=i.reduce(function(e,n){if(e)return e;n.regexp.lastIndex=0;var r=n.regexp.exec(t);if(r){var a=r[0],o=r[1],i=r.index,l=r.index+a.length;return{value:a,wrappedBy:n.name,unwrappedValue:o,prefixLength:a.length-o.length,start:i+s,end:l+s}}},null),u=d||{value:t,start:s,end:l};return o.lastIndex=0,{lines:[].concat(r(e.lines),[u]),lastIndex:l+1,isWrapped:e.isWrapped&&o.test(u.value)}},{lines:[],lastIndex:0,isWrapped:!0});return delete s.lastIndex,s}function c(e){var t=e.elem,n=e.start,a=e.end,i=e.prefix,s=e.pattern,l=e.nextPrefix,d=e.parsed.lines,u=d.reduce(function(e,t){var n=""+i+t.value;return s.lastIndex=0,s.test(t.value)&&l?n=""+l+t.value:t.unwrappedValue&&(n=""+i+t.unwrappedValue),[].concat(r(e),[n])},[]).join("\n"),f=d[0].start,c=d[d.length-1].end,p=n-f,m=a-c;m<f-c&&(m+=f-c-m);var g=f,v=f+u.length;o({elem:t,text:u,start:f,end:c,nextStart:g+p+i.length,nextEnd:v+m})}function p(e){var t=e.elem,n=e.start,a=e.end,i=e.pattern,s=e.parsed.lines,l=s.reduce(function(e,t){return i.lastIndex=0,[].concat(r(e),[i.test(t.value)?t.unwrappedValue:t.value])},[]).join("\n"),d=s[0].start,u=s[s.length-1].end,f=d+s[0].prefixLength,c=u,p=n-f,m=a-c;p<0&&(p=0),m<f-c&&(m+=f-c-m),o({elem:t,text:l,start:d,end:u,nextStart:d+p,nextEnd:d+l.length+m})}function m(e){var t=e.text,n=e.start,r=e.end,a=e.pattern,o=e.isConsequent,i=void 0,s=[];for(console.log(t,n,r),a.lastIndex=0;null!==(i=a.exec(t));){console.log(i);var l=i[0],d=i[1],u=i.index,f=i.index+l.length;u<=n&&f>=r&&s.push({value:l,unwrappedValue:d,start:u,end:f}),o&&(a.lastIndex=i.index+1)}return s.length?(s.sort(function(e,t){return e.value.length-t.value.length}),s[0]):null}function g(e){var t=e.text,n=e.start,r=e.end;for(n-=1;"\n"!==t[n]&&n>0;)n--;for(0!==n&&n++;"\n"!==t[r]&&r<t.length;)r++;return{value:t.substring(n,r),start:n,end:r}}function v(e){var t=e.elem,n=e.start,r=e.end,a=n,o=r,i=t.value.substr(n,r-n);if(n===r){var s=g({text:t.value,start:n,end:r}),l=s.value,d=s.start,u=m({text:l,start:n-d,end:r-d,pattern:/[^\s]+/g});u&&(a=u.start+d,o=u.end+d,i=u.value)}return{start:a,end:o,value:i}}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=n(7),b={type:"inline",parse:i,wrap:s,unwrap:l},w={type:"block",parse:f,wrap:c,unwrap:p},x=[h({},b,{name:"bold",keys:"Cmd+B",regexp:/\*\*([^\s]{0,2}|[^\s].*?[^\s])\*\*/g,prefix:"**",suffix:"**"}),h({},b,{name:"italic",keys:"Cmd+I",regexp:/\/\/([^\s]{0,2}|[^\s].*?[^\s])\/\//g,prefix:"//",suffix:"//"}),h({},b,{name:"link",keys:"Cmd+K",regexp:/\(\(\s*(.*?)\s*\)\)/g,prefix:"((",suffix:"))",wrap:d,unwrap:u}),h({},w,{name:"header",keys:"Cmd+Alt+1",regexp:/^[^\S\n]*#[^\S\n]*([^#].*)$/g,prefix:"# "}),h({},w,{name:"subheader",keys:"Cmd+Alt+2",regexp:/^[^\S\n]*##[^\S\n]*([^#].*)$/g,prefix:"## "}),h({},w,{name:"remove headers",keys:"Cmd+Alt+0",regexp:/^[^\S\n]*#{1,2}[^\S\n]*([^#].*)$/g,wrap:p}),h({},w,{name:"increase quote level",keys:"Cmd+]",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",nextPrefix:">",unwrap:c}),h({},w,{name:"decrease quote level",keys:"Cmd+[",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",wrap:function(){}})],C=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!\/\\\w]*))?)/;t.default=a},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(window.FormData){var t=new window.FormData;t.append("file",e.file),(0,i.default)({url:e.url,data:t,timeout:0,contentType:!1,processData:!1,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&"function"==typeof e.progress&&t.upload.addEventListener("progress",e.progress,!1),t},success:e.success,error:e.error})}else(0,l.default)({message:"er--js-file-upload-not-supported"})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=r(o),s=n(0),l=r(s);t.default=a},function(e,t,n){"use strict";function r(e,t){var n="",r=e.lastIndexOf("."),o="object"===(void 0===t?"undefined":a(t))?t:/^gif|jpe?g|png|svg|mp3$/i;return-1!==r&&(n=e.substr(r+1)),o.test(n)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),i=n(22),s=r(i),l=n(3),d=r(l),u=n(2),f=r(u),c=n(5),p=r(c),m=n(4),g=r(m),v=n(23),h=r(v),y=n(24),b=r(y),w=n(25),x=r(w),C=n(26),_=r(C),j=n(27),S=r(j),E=n(28),k=r(E),O=n(11),P=r(O),A=n(29),M=r(A),T=n(0),L=r(T),I=n(12),N=r(I);(0,s.default)(),(0,b.default)(),(0,h.default)(),(0,x.default)(),(0,M.default)(),(0,_.default)(),(0,S.default)(),(0,k.default)(),function(){!function(){function e(e){var t=e.originalEvent.dataTransfer;if(t&&(!t.types.contains||t.types.contains("Files"))&&(!t.types.indexOf||-1!==t.types.indexOf("Files"))){t.dropEffect&&(t.dropEffect="copy");var n=$(this);return n.addClass("e2-external-drop-target-dragover"),n.hasClass("e2-external-drop-target-altable")&&e.altKey?n.addClass("e2-external-drop-target-dragover-alt"):n.removeClass("e2-external-drop-target-dragover-alt"),!1}}function t(){return $(this).removeClass("e2-external-drop-target-dragover e2-external-drop-target-dragover-alt"),!1}$(".e2-external-drop-target").on("dragover dragenter",e).on("dragleave drop",t)}(),function(){function e(e){var t,r=e.originalEvent.dataTransfer;return r&&r.files?r.files.length>1?((0,L.default)({message:"er--js-can-upload-only-one-file",debug:{data:{event:e,files:r.files}}}),!1):(t=r.files[0],(0,N.default)(t.name,/^gif|jpe?g|png$/i)?void n($(this),t):((0,L.default)({message:"er--supported-only-png-jpg-gif",debug:{data:{file:t}}}),!1)):((0,L.default)({message:"er--js-no-files-to-upload",debug:{data:{event:e,dataTransfer:r}}}),!1)}function t(e){return!!e.target.files.length&&(n($(e.delegateTarget),e.target.files[0]),!1)}function n(e,t){var n=e.data("href");m=!e.hasClass(i),o.each(function(){var t=$(this),n=t.find(".e2-user-picture-container-link"),r=m?t.find(".e2-user-picture-image"):t.find(".e2-user-picture-placeholder"),o=t.find(".e2-user-picture-spinner");t[0]===e[0]?a?(r.off(a+".uploadUserPic").one(a+".uploadUserPic",function(){t.hasClass(s)&&(t.addClass(l),(0,g.default)(o,1))}),t.addClass(s)):t.hasClass(s)&&(t.addClass(l),(0,g.default)(o,1)):t.addClass(s),n.attr("data-href",n.attr("href")).removeAttr("href")}),(0,P.default)({file:t,url:n,progress:function(t){t.lengthComputable&&o.each(function(){var n=$(this),r=n.find("circle.e2-progress");n[0]===e[0]&&(0,p.default)(r,t.loaded/t.total)})},success:function(t){if(o.each(function(){var n=$(this),r=n.find(".e2-user-picture-container-link"),a=n.find(".e2-user-picture-spinner");void 0!==t.data&&void 0!==t.data["new-image-src"]||(n.removeClass(s),r.attr("href",r.attr("data-href")).removeAttr("data-href"),n[0]===e[0]&&(n.removeClass(l),(0,g.default)(a,0)))}),void 0===t.data||void 0===t.data["new-image-src"])return(0,L.default)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:t}}}),!1;m=!0;var n;o.each(function(){var r=$(this),a=r.find(".e2-user-picture-container-link"),o=r.find("img"),d=r.find(".e2-user-picture-spinner");void 0===n?(o.one("load",function(){r.removeClass(i).removeClass(s),a.attr("href",a.attr("data-href")).removeAttr("data-href"),r[0]===e[0]&&(r.removeClass(l),(0,g.default)(d,0))}),o.attr("src",t.data["new-image-src"]+"?"+Date.now()),n=o):n.one("load",function(){o.attr("src",n.attr("src")),r.removeClass(i).removeClass(s),a.attr("href",a.attr("data-href")).removeAttr("data-href"),r[0]===e[0]&&(r.removeClass(l),(0,g.default)(d,0))})})},error:function(){o.each(function(){var t=$(this),n=t.find(".e2-user-picture-container-link"),r=t.find(".e2-user-picture-spinner");t.removeClass(s),n.attr("href",n.attr("data-href")).removeAttr("data-href"),t[0]===e[0]&&(t.removeClass(l),(0,g.default)(r,0))})}})}function r(e){var t=$(e.delegateTarget),n=$(e.currentTarget).attr("data-href");o.each(function(){var e=$(this),n=e.find(".e2-user-picture-container-link");t[0]===e[0]&&e.addClass(u),n.attr("data-href",n.attr("href")).removeAttr("href")}),(0,f.default)({url:n,success:function(){m=!1,o.each(function(){function e(){t.addClass(i).removeClass(c).removeClass(u),r.attr("src",""),n.attr("href",n.attr("data-href")).removeAttr("data-href")}var t=$(this),n=t.find(".e2-user-picture-container-link"),r=t.find("img");a?(t.off(a+".removeUserPic").one(a+".removeUserPic",function(){e()}),t.addClass(c)):e()})},error:function(){o.each(function(){var e=$(this),t=e.find(".e2-user-picture-container-link");e.removeClass(u),t.attr("href",t.attr("data-href")).removeAttr("data-href")})}})}var a=(0,d.default)(),o=$(".e2-user-picture-container"),i="e2-user-picture-container_empty",s="e2-user-picture-container_uploading",l="e2-user-picture-container_showspinner",u="e2-user-picture-container_deleting",c="e2-user-picture-container_deleted",m=!o.eq(0).hasClass(i);o.on("drop",e),o.on("change",".e2-user-picture-input",t),o.on("click",".e2-user-picture-remove",r)}(),function(){if(o.isLocalStorageAvailable&&document.e2.localCopies){var e=$("#e2-drafts-item"),t=e.find(".e2-unsaved-led"),n=$("#e2-new-note-item .e2-unsaved-led"),r=$("#e2-notes-unsaved"),a=$("#e2-nothing-message"),i=$("#form-note"),s=document.e2.localCopies.getList(),l=document.e2.localCopies.doesCopyExist("new"),d=i?$("#note-id").val():null,u="new"!==d&&document.e2.localCopies.doesCopyExist(d),f=Object.keys(s).length;if(l&&f--,u&&f--,t&&f>0&&(e.show(),t.show()),n&&l&&n.show(),r&&a){var c=document.e2.localCopies.getName("new");s.hasOwnProperty(c)&&delete s[c];for(var p in s)"false"===s[p].isPublished&&($("#e2-draft-"+p+" .e2-unsaved-led").show(),delete s[p]);if(Object.keys(s).length){for(var m in s){var g=document.e2.localCopies.get(m);if(g){var v=$("#e2-unsaved-note-prototype").clone(!0);v.attr("id",null),$(".e2-admin-link",v).attr("href",g.link),$("u",v).html(g.title),v.attr("style",""),r.append(v)}}r.show(),a.hide()}}}}()}(),function(){var e=function(e,t){t?(e.addClass("e2-admin-item_thinking"),(0,g.default)(e,1)):((0,g.default)(e,0),e.removeClass("e2-admin-item_thinking"))},t=function(e,t){t?e.addClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled"):e.removeClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled")},n=function(n,r,a){if(n.blur(),n.hasClass("e2-admin-item_disabled"))return!0;if(n.hasClass("e2-popup-menu-widget-item_disabled"))return!0;var o=n.hasClass("e2-admin-item_on")?"on":"off",i=void 0!==n.data("e2-js-action")&&n.data("e2-js-action").indexOf("couple-trigger")>=0;n.removeClass("e2-admin-item_on"),e(n,1),t(n,1),(0,f.default)({url:n.attr("href"),data:"result=ajaxresult",success:function(e){if(void 0===e.data||void 0===e.data["flag-now-on"])return(0,L.default)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:e}}}),"on"===o&&n.addClass("e2-admin-item_on"),!1;e.data["flag-now-on"]?(n.addClass("e2-admin-item_on"),r(n,e.data["new-href"])):(n.removeClass("e2-admin-item_on"),a(n,e.data["new-href"]))},error:function(){"on"===o&&n.addClass("e2-admin-item_on"),i&&n.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM")},complete:function(){e(n,0),t(n,0)}})},r=function(e){var t={"toggle-favourite":function(){n(e,function(e,t){e.attr("href",t).parents(".e2-note").addClass("e2-note-favourite")},function(e,t){e.attr("href",t).parents(".e2-note").removeClass("e2-note-favourite")})},"toggle-pinned":function(){n(e,function(e,t){e.attr("href",t)},function(e,t){e.attr("href",t)})},"toggle-important":function(){n(e,function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").addClass("e2-comment-piece-marked")},function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").removeClass("e2-comment-piece-marked")})},"removed-href":function(){n(e,function(e,t){},function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-author").addClass("e2-comment-author-removed"),n.find(".e2-comment-meta, .e2-comment-content").slideUp(333),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideUp(333),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"removed"})})},"replaced-href":function(){n(e,function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-content, .e2-comment-meta").slideDown(333),n.find(".e2-comment-author").removeClass("e2-comment-author-removed"),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideDown(333),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"recovered"})},function(e,t){})},"couple-trigger":function(){e.trigger("E2_ADMIN_COUPLE_WILL_THINK")}},r=!0,a=e.data("e2-js-action");return a&&$.each(a.split(","),function(e,n){"function"==typeof t[n]&&(r=!1,t[n]())}),r};$(".e2-admin-item").add(".e2-popup-menu-widget-item").on("click",function(){return r($(this))})}(),function(){var e=function(e){if(e.length){var t=e.find(".e2-admin-couple-item");e.find('[data-e2-js-action*="couple-trigger"]').on("E2_ADMIN_COUPLE_CHANGE_ITEM",function(n,r){(0,g.default)(e.find(".e2-admin-couple-spinner"),0),"object"===(void 0===r?"undefined":a(r))&&"string"==typeof r.response&&(t.addClass("e2-admin-couple-item_hidden"),e.find(".e2-admin-couple-item_"+r.response).removeClass("e2-admin-couple-item_hidden")),e.removeClass("e2-admin-couple_thinking")}).on("E2_ADMIN_COUPLE_WILL_THINK",function(){(0,g.default)(e.find(".e2-admin-couple-spinner"),1),e.addClass("e2-admin-couple_thinking")})}};$(".e2-admin-couple").each(function(){e($(this))}),$(document).on("E2_ADMIN_COUPLE_INIT",function(t,n){void 0!==n.$couple&&e(n.$couple)})}()},function(e,t,n){"use strict";function r(){a.isLocalStorageAvailable&&(document.e2.localCopies={_lsKey:"copies-info",_lsPrefix:"copy-",_cookieName:document.e2.cookiePrefix+"local_copies",getListName:function(){return this._lsKey},getPrefix:function(){return this._lsPrefix},getName:function(e){return this._lsPrefix+e},save:function(e,t){a.localStorage.setItem(this.getName(e),JSON.stringify(t)),this.addToList(e,t)},remove:function(e){a.localStorage.removeItem(this.getName(e)),this.removeFromList(e)},get:function(e,t,n){var r=!1;try{if(!(r=JSON.parse(a.localStorage.getItem(this.getName(e)))))return!1}catch(e){return!1}return n&&t&&this.isCopyOutdated(r,t,n)?(this.remove(e),!1):r},getList:function(){try{return JSON.parse(a.localStorage.getItem(this._lsKey))||{}}catch(e){return{}}},addToList:function(e,t){var n=this.getList();n.hasOwnProperty(e)||(n[e]={isPublished:t.isPublished,timestamp:t.timestamp},a.localStorage.setItem(this._lsKey,JSON.stringify(n)),this.updateCookie(n))},removeFromList:function(e){var t=this.getList();t.hasOwnProperty(e)&&(delete t[e],a.localStorage.setItem(this._lsKey,JSON.stringify(t)),this.updateCookie(t))},doesCopyExist:function(e){return a.localStorage.hasOwnProperty(this.getName(e))},isCopyOutdated:function(e,t,n){if(!t||!n)return!1;var r=+e.timestamp,a=(new Date).getTime(),o=n-a;return Math.abs(o)>216e6&&(t-=o),r<=t},checkOutdatedCopies:function(){var e=document.e2.noteLastModifiedsById||{},t=this.getList();for(var n in t)"new"!==n&&(e.hasOwnProperty(n)?this.isCopyOutdated(t[n],1e3*e[n],1e3*document.e2.serverTime)&&this.remove(n):this.remove(n))},generateCookie:function(){document.cookie.match(new RegExp("(?:^|; )"+this._cookieName.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"))||this.updateCookie()},updateCookie:function(e){e=e||this.getList();var t=[];for(var n in e)"new"!==n&&t.push(n);if(t.length)document.cookie=this._cookieName+"="+t.join(",")+";path=/";else{var r=new Date;r.setTime(r.getTime()-1),document.cookie=this._cookieName+'="";path=/;expires='+r.toUTCString()}}},document.e2.localCopies.checkOutdatedCopies(),document.e2.localCopies.generateCookie())}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=r},function(e,t,n){"use strict";function r(){var e=$(".e2-note");e.length&&a.isLocalStorageAvailable&&function(e){for(var t=0;t<e.length;t++){var n=e.eq(t).data("note-id").toString();document.e2.localCopies.doesCopyExist(n)&&$('.e2-note[data-note-id="'+n+'"] .e2-unsaved-led').show()}}(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=r},function(e,t,n){"use strict";function r(){function e(){S||(l.off("ajaxError",e),E=setInterval(i,3e3),window.addEventListener("beforeunload",i),window.addEventListener("pagehide",n),l.on("submit",t).on("ajaxError",e),m.on("input",r),S=!0)}function t(){clearInterval(E),n(),window.removeEventListener("pagehide",n),l.off("submit",t),m.off("input",r),S=!1}function n(){window.removeEventListener("beforeunload",i)}function r(){m[0].selectionEnd&&(j=m[0].selectionEnd)}function o(){var e=document.e2.localCopies.get(d.val(),w,x);if(e){e.caretPosition&&m.one("autosized",function(){if("function"==typeof window.getCaretCoordinates){var t=window.getCaretCoordinates(m[0],e.caretPosition);window.scrollTo(0,m.position().top+t.top-15)}}),document.queryCommandSupported("insertText")?(p.focus().select(),document.execCommand("insertText",!1,e.title),p.trigger("input"),m.addClass("e2-textarea-autosize_off").focus().select(),document.execCommand("insertText",!1,e.text),m.removeClass("e2-textarea-autosize_off").trigger("input")):(p.val(e.title).trigger("input"),m.val(e.text).trigger("input"));var t=e.tags?e.tags.slice():[];if(t.length&&g.find("option").each(function(e,n){var r=t.indexOf(n.text);r>-1&&t.splice(r,1)}),t.length){var n=void 0,r=function e(){if(!g.hasClass("chzn-done"))return void(n=setTimeout(e,500));clearTimeout(n);var r=$("#tags_chzn .search-field input");t.forEach(function(e){r.val(e+","),r.trigger({type:"keyup",which:191})})};n=setTimeout(r,500)}g.val(e.tags).trigger("input"),y.val(e.summary),b.empty().html(e.images.reduce(function(e,t){return void 0!==t.src&&t.src?e+'<div class="e2-uploaded-image"><div class="e2-uploaded-image-inner"><img src="'+t.src+'" alt="'+t.alt+'" width="'+t.width+'" height="'+t.height+'"></div></div>':""},"")),(e.alias&&v.val()!==e.alias||h.val()!==e.stamp)&&(v.val(e.alias).trigger("change"),h.val(e.stamp).trigger("change"),$(".e2-note-time-and-url").slideToggle()),f.show(),c.show(),e.caretPosition&&(m.focus(),m[0].selectionStart=m[0].selectionEnd=j=e.caretPosition)}}function i(){var e=f.is(":visible");if(e||_){_=e;var t=s();if(!t.images.length&&!t.title.trim()&&!t.text.trim())return void document.e2.localCopies.remove(t.id);document.e2.localCopies.save(t.id,t)}}function s(){for(var e=b.find(".e2-uploaded-image"),t=d.val(),n=p.val(),r=m.val(),a=[],o=void 0,i=0;i<e.length;i++)o=e.eq(i).find("img"),a.push({src:o.attr("src"),alt:o.attr("alt"),width:o.width(),height:o.height()});return{id:t,title:n,text:r,tags:g.val(),images:a,alias:"new"!==C&&v.val(),stamp:h.val(),summary:y.val(),timestamp:(new Date).getTime(),link:window.location.pathname,isPublished:u.val(),caretPosition:j}}var l=$("#form-note");if(a.isLocalStorageAvailable&&l){var d=$("#note-id"),u=$("#is-note-published"),f=$("#livesave-button"),c=$("#livesave-button + .e2-unsaved-led"),p=$("#title"),m=$("#text"),g=$("#tags"),v=$("#alias"),h=$("#stamp"),y=$("#summary"),b=$("#e2-uploaded-images"),w=1e3*+$("#note-timestamp").val(),x=1e3*+$("#server-time").val(),C=d.val(),_=f.is(":visible"),j=null,S=!1,E=null;document.e2.localCopies.loadLocalCopy=o,document.e2.localCopies.initLocalSaver=e,document.e2.localCopies.destroyLocalSaver=t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){e=e||{},(0,c.default)({url:f.find("#e2-note-livesave-action").attr("href"),data:f.serialize(),success:function(t){if(void 0===t.data||void 0===t.data.status)return(0,m.default)({message:"er--js-server-error",debug:{message:"Server response malformed",data:{response:t}}}),!1;"function"==typeof e.onAjaxSuccess&&e.onAjaxSuccess(),"created"===t.data.status?(window.history.replaceState&&(window.history.replaceState(null,"",t.data["note-edit-url"]),$(".e2-admin-menu-new-selected").hide(),$(".e2-admin-menu-new").show()),p.val(t.data.id),a(),"function"==typeof e.onCreated&&e.onCreated(t),v=null):"saved"===t.data.status&&($("#alias").val(t.data["new-alias"]),window.history.replaceState&&window.history.replaceState(null,"",t.data["note-edit-url"]),a(),"function"==typeof e.onSaved&&e.onSaved(t),v=null)},error:e.onAjaxError,complete:e.onAjaxComplete})}function t(){var e=!0;e=!0;var t=!/^ *$/.test($("#title").val())&&!/^ *$/.test($("#text").val())&&e&&!x;g.prop("disabled",!t)}function n(){(0,i.default)($("#livesaving"),0),$("#livesaving").hide(),$("#livesave-button, #livesave-button + .e2-unsaved-led").show()}function r(){if(!x){var r=o();if(""!==r.text){if(x=!0,t(),""===r.title){var a,s=r.text;(a=s.indexOf("."))>=0&&(s=s.substr(0,a)),(a=s.indexOf(";"))>=0&&(s=s.substr(0,a)),(a=s.indexOf(","))>=0&&(s=s.substr(0,a)),(a=s.indexOf(")"))>=0&&(s=s.substr(0,a)),0===s.indexOf("((")&&(s=s.substr(2)),s=s.substr(0,1).toUpperCase()+s.substr(1),$("#title").val(s).change()}$("#livesave-button, #livesave-button + .e2-unsaved-led").hide(),$("#livesaving").fadeIn(333),(0,i.default)($("#livesaving"),1),e({onCreated:function(){h=r,$("#e2-drafts")&&$("#e2-drafts-item")&&($("#e2-drafts-item").fadeIn(333),$('<div class="e2-admin-menu-item-frame"></div>').css({position:"absolute",left:$("#e2-note-form-wrapper").offset().left,top:$("#e2-note-form-wrapper").offset().top,width:$("#e2-note-form-wrapper").width(),height:$("#e2-note-form-wrapper").height()}).appendTo("body").animate({left:$("#e2-drafts").offset().left-10,top:$("#e2-drafts").offset().top-5,width:$("#e2-drafts").width()+20,height:$("#e2-drafts").height()+10},667).fadeTo(333,.667).fadeOut(333),$("#e2-drafts-count").html(1*$("#e2-drafts-count").html()+1))},onSaved:function(){h=r},onError:n,onAjaxSuccess:function(){(0,i.default)($("#livesaving"),0),$("#livesaving").fadeOut(333)},onAjaxError:function(e,t){n(t)},onAjaxComplete:function(){x=!1,t()}})}}}function a(){s.isLocalStorageAvailable&&(v?document.e2.localCopies.remove(v):document.e2.localCopies.remove(p.val()),document.e2.localCopies.destroyLocalSaver())}function o(){return{title:$("#title").val(),tags:($("#tags").val()||[]).join(),text:$("#text").val(),alias:$("#alias").val(),stamp:$("#stamp").val()}}function d(e,t){return JSON.stringify(e)===JSON.stringify(t)}var f=$("#form-note");if(f.length){var p=f.find("#note-id"),g=f.find("#submit-button"),v=p.val(),h=o(),y=h?Object.assign({},h):o(),b=!1,w=!1,x=!1;$(window).bind("pageshow",function(e){e.originalEvent.persisted&&window.location.reload()}),document.e2.localCopies.initLocalSaver&&document.e2.localCopies.loadLocalCopy&&(document.e2.localCopies.loadLocalCopy(),document.e2.localCopies.initLocalSaver()),f.on("submit",function(n){function r(e){h=s,(0,i.default)($("#note-saving"),0),$("#note-saving").hide(),$("#note-saved").fadeIn(333),window.location.href=e.data["note-url"]}function a(){f.trigger("ajaxError"),(0,i.default)($("#note-saving"),0),$("#note-saving").hide(),$("#submit-keyboard-shortcut").show()}n.preventDefault();var s=o();x=!0,t(),$("#submit-keyboard-shortcut").hide(),(0,i.default)($("#note-saving"),1),$("#note-saving").show(),e({onCreated:r,onSaved:r,onError:a,onAjaxError:function(e,t){a()},onAjaxComplete:function(){x=!1,t()}})}),$("#title").on("input",function(){$("#alias").attr("placeholder","")});var C="change input keyup keydown keypress mouseup mousedown cut copy paste blur",_=function(){t();var e=o();b=!d(y,e),w=!h||!d(h,e);var n=$("#livesave-button, #livesave-button + .e2-unsaved-led");b&&w&&""!==e.text?(b=!1,$("#livesaving").hide(),document.e2.localCopies.initLocalSaver(),n.fadeIn(333),y=Object.assign({},e)):w||(w=!1,a(),n.fadeOut(333),y=Object.assign({},e));var r=e.title.trim(),i=e.text.trim();$("#e2-uploaded-images .e2-uploaded-image").length||r||i||!n.is(":visible")||n.fadeOut(333)};$("#title").add("#tags").add("#text").add("#alias").add("#stamp").on(C,_),$("#tags").on("liszt:ready",function(){$("#tags_chzn .search-field").on(C,_)}),$("#title").on("keydown",function(e){13===e.which&&$("#text").focus()}),$("#livesave-button").on("click",function(){return r(),!1}),u.default.mac?(0,l.bindKeys)("Cmd+S",r,{prevent:!0}):(0,l.bindKeys)("Ctrl+S",r,{prevent:!0}),$("#text").is(":focus")||$("#title").attr("autofocus",!0).focus().val($("#title").val()),t()}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=r(o),s=n(1),l=n(7),d=n(6),u=r(d),f=n(2),c=r(f),p=n(0),m=r(p);t.default=a},function(e,t,n){"use strict";function r(){$("#form-note-publish").length&&($(".e2-schedule-controls-revealer").on("click",function(){if($(".e2-publish-now-controls").hide(),$(".e2-schedule-controls").show(),$(".e2-post-time-control").slideDown(333,function(){$(".e2-schedule-controls button").prop("disabled",!1)}),""===$("#stamp").val()){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var n=e.getMonth()+1;n<10&&(n="0"+n);var r=e.getFullYear(),a=e.getHours(),o=e.getMinutes();a+=1,59===o&&(a+=1),a<10&&(a="0"+a),$("#stamp").val(t+"."+n+"."+r+" "+a+":00:00"),$("#stamp").trigger("change")}return!1}),$(".e2-schedule-controls-unrevealer").on("click",function(){return $(".e2-schedule-controls").hide(),$(".e2-schedule-controls button").prop("disabled",!0),$(".e2-post-time-control").slideUp(333),$(".e2-publish-now-controls").show(),!1}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(){$("#form-preferences").length&&($("#blog-title").on("input blur cut copy paste keypress",function(){var e=$("#e2-blog-title"),t=$("#e2-blog-title-default").val();e.length&&e.text(this.value?this.value:t)}),$("#blog-author").on("input blur cut copy paste keypress",function(){var e=$("#e2-blog-author"),t=$("#e2-blog-author-default").val();e.length&&e.text(this.value?this.value:t)}),$("#notes-per-page").on("change blur focusout",function(){parseInt(this.value)!==parseInt(this.value)&&(this.value=10),this.value=Math.min(Math.max(this.value,3),100)}),$("#email-notify").on("change",function(){$(this).is(":checked")&&$("#email").focus()}),$(".e2-template-preview-link").addClass("e2-template-preview-link_visible"),$("#e2-template-selector").addClass("e2-template-selector_interactive").find(".e2-template-preview__input").on("change",function(){var e=$(this),t=e.parents(".e2-template-preview");$(".e2-template-preview_current").removeClass("e2-template-preview_current"),t.addClass("e2-template-preview_current"),$(".e2-template-preview-link").attr("href",e.data("preview-url")),e.data("supports-dark-mode")?$("#respond-to-dark-mode").parents(".form-element").eq(0).slideDown(333):$("#respond-to-dark-mode").parents(".form-element").eq(0).slideUp(333)}))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8);!function(e){e&&e.__esModule}(a);t.default=r},function(e,t,n){"use strict";function r(){function e(){/^ *$/.test($("#tag").val())||/^ *$/.test($("#urlname").val())?n.prop("disabled",!0):n.prop("disabled",!1)}var t=$("#form-tag");if(t.length){var n=t.find("#submit-button");$("#tag").on("keydown",function(e){13===e.which&&$("#urlname").focus()}),$("#urlname").on("keydown",function(e){13===e.which&&$("#page-title").focus()}),$("#page-title").on("keydown",function(e){13===e.which&&$("#text").focus()}),$(".required").bind("input blur cut copy paste keypress",e),e()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e,t,n,r,a){var o=$("#e2-uploaded-image-prototype").clone(!0),i=o.find(".e2-uploaded-image-inner_good"),s=i.find("img"),l=o.find(".e2-uploaded-image-inner_bad"),u=l.find(".e2-uploaded-image-noimage"),f=o.find(".e2-popup-menu");return o.removeAttr("id").attr("style","").data("file",t).css("width",""),f.find(".e2-image-popup-menu-filename").text(t).attr("title",t),r&&a?(l.remove(),s.attr("src",e+"?"+(new Date).getTime()).attr("alt",t).attr("width",r).attr("height",a),f.find(".e2-image-popup-menu-filesize").text(n)):(o.addClass("e2-uploaded-image_broken"),i.remove(),u.attr("data-src",e),f.find(".e2-popup-menu-widget-item").filter(":not(.e2-popup-menu-widget-item_info):not(.e2-popup-menu-widget-item_remove)").addClass("e2-popup-menu-widget-item_disabled")),$(document).trigger("E2_ADMIN_ITEM_WITH_POPUP_MENU_INIT",{$popupMenu:f}),-1===$.inArray(t,d)&&d.push(t),o}function t(){if(s.length){var n=_.find("circle.e2-progress"),r=s.shift(),a=$("#e2-file-upload-action").attr("href")+"?";return(0,c.default)(r.name,/^gif|jpe?g|png|svg|mp3|mp4|mov$/i)?(void 0!==$("#note-id").val()?a+="entity=note&entity-id="+$("#note-id").val():void 0!==$("#tag-id").val()?a+="entity=tag&entity-id="+$("#tag-id").val():a=null,a&&r.e2AltKeyPressed&&(a+="&overwrite"),(0,l.default)(_,1),_.removeClass(S),x.addClass(j),(0,v.default)({file:r,url:a,progress:function(e){e.lengthComputable&&(0,u.default)(n,(f+e.loaded)/p)},success:function(n){f+=r.size;var a=$('#e2-uploaded-images img[src="'+n.data.thumb+'"], #e2-uploaded-images img[src^="'+n.data.thumb+'?"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src="'+n.data.thumb+'"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src^="'+n.data.thumb+'?"]'),o=a.parents(".e2-uploaded-image");if(n.data.overwrite)s.length||((0,l.default)(_,0),_.addClass(S),x.removeClass(j)),a.length&&(e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).insertAfter(o),o.remove());else{r.e2DroppedIntoTextarea&&(0,m.default)(n.data["new-name"]);-1!==$.inArray(n.data["new-name"],d)?(s.length||((0,l.default)(_,0),_.addClass(S),x.removeClass(j)),a.length&&(e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).insertAfter(o),o.remove())):e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).appendTo(g).show(333,function(){s.length||((0,l.default)(_,0),_.addClass(S),x.removeClass(j))})}t()},error:function(){s.length||((0,l.default)(_,0),_.addClass(S),x.removeClass(j)),t()},complete:function(){(0,u.default)(n,0)}}),!1):((0,w.default)({message:"er--unsupported-file",debug:{data:{file:r}}}),!1)}return p=0,f=0,!0}function n(e){var n=e.originalEvent.dataTransfer;if(n&&n.files){var r="text"===$(e.target).attr("id");s.length=0;for(var a=0;a<n.files.length;a++)n.files[a].e2AltKeyPressed=e.altKey,n.files[a].e2DroppedIntoTextarea=r,s.push(n.files[a]),p+=n.files[a].size;return t(),!1}}function r(e){if(!e.target.files.length)return!1;s.length=0;for(var n=0;n<e.target.files.length;n++)s.push(e.target.files[n]),p+=e.target.files[n].size;return t(),!1}function a(e){var n=(e.clipboardData||e.originalEvent.clipboardData).files||[];if(n.length){s.length=0;for(var r=0;r<n.length;r++){var a=n[r],o=new Date;a.lastModified===o.getTime()&&"image.png"===a.name&&(a=new File([n[r]],b.data("e2FilenamePrefix")+".png",{lastModified:n[r].lastModified,size:n[r].size,type:n[r].type,webkitRelativePath:n[r].webkitRelativePath})),a.e2DroppedIntoTextarea=!0,s.push(a),p+=a.size}return t(),!1}}if($("#form-tag").length||$("#form-note").length){$(".e2-upload-controls-attach").length>0&&$(document.body).addClass("e2-external-drop-target e2-external-drop-target-body e2-external-drop-target-altable");var o=(0,i.default)(),s=[],d=[],f=0,p=0,g=$(".e2-uploaded-images"),h=g.find(".e2-uploaded-image"),b=$(".e2-upload-controls"),x=b.find(".e2-upload-controls-attach"),C=x.find(".e2-upload-controls-attach-input"),_=b.find(".e2-upload-controls-uploading"),j="e2-upload-controls-attach_hidden",S="e2-upload-controls-uploading_hidden";g.on("click",'[data-e2-js-action*="remove-image"]',function(e){var t=$(e.currentTarget).parents(".e2-uploaded-image"),n=t.data("file");return t.addClass("e2-uploaded-image_deleting"),(0,y.default)({file:n,success:function(){d.splice($.inArray(n,d),1),o?(t.off(o+".e2Delfiles").on(o+".e2Delfiles",function(){t.remove()}),t.addClass("e2-uploaded-image_deleted")):t.remove()},error:function(){t.removeClass("e2-uploaded-image_deleting")}}),!1}).on("click",'[data-e2-js-action*="paste-image"]',function(e){var t=$(e.currentTarget);return(0,m.default)(t.parents(".e2-uploaded-image").data("file")),!1}),h.length&&g.html(function(){var t=[];return h.each(function(){var n,r,a,o,i,s=$(this),l=s.find("img"),d=s.find(".e2-uploaded-image-noimage");l.length?(n=l.attr("src"),r=l.data("filename"),a=l.data("filesize"),o=l.attr("width"),i=l.attr("height")):(n=d.data("src"),r=d.data("filename")),t.push(e(n,r,a,o,i))}),t}()),b.removeClass("e2-upload-controls_hidden"),C.on("change",r),$(".e2-external-drop-target-body, .e2-external-drop-target-textarea").on("drop",n).on("paste",a)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),l=r(s),d=n(5),u=r(d),f=n(12),c=r(f),p=n(30),m=r(p),g=n(11),v=r(g),h=n(31),y=r(h),b=n(0),w=r(b);t.default=a},function(e,t,n){"use strict";function r(e){var t="";if("neasden"===$("#formatter-id").val()&&(t=e+""),t){var n=document.getElementById("text");if(n.focus(),n.selectionStart||"0"===n.selectionStart){var r=n.selectionStart,a=n.selectionEnd,o=t;if(r===a){for(;"\r"!==n.value.charAt(r)&&"\n"!==n.value.charAt(r)&&r>0;)r-=1;for(;"\r"===n.value.charAt(r)||"\n"===n.value.charAt(r);)r+=1;o+="\n\n",a=r}n.value=n.value.substring(0,r)+o+n.value.substring(a,n.value.length),n.selectionStart=n.selectionEnd=r+o.length-2}else n.value+="\r\n\r\n"+t;if("createEvent"in document){var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),n.dispatchEvent(i)}else n.fireEvent("onchange");n.focus()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){var t=$("#e2-file-remove-action").attr("href")+"?";if($("#form-note").length)t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag").length)return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return(0,o.default)({url:t,data:{file:e.file},success:e.success,error:e.error,complete:e.complete,abort:e.abort})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r}])});