$&&$(function(){!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,n){"use strict";function a(e){function t(e){"function"==typeof e?l?(n.off(l+".e2NiceError").on(l+".e2NiceError",function(){n.off(l+".e2NiceError"),e()}),n.addClass(o)):(n.addClass(o),e()):n.addClass(o)}var n=$(".e2-nice-error"),a=n.find(".e2-nice-error-inner"),o="e2-nice-error_hidden",s={en:{"er--js-server-error":"Server error","er--js-appears-offline":"The connection appears to be offline","er--js-connection-timeout":"Server does not respond for too long","er--js-file-upload-not-supported":"The browser does not support file upload","er--js-no-files-to-upload":"No files to upload","er--js-can-upload-only-one-file":"Only one file may be uploaded here","er--js-supported-only-png-jpg-gif":"Only PNG, JPG, and GIF images are supported","er--unsupported-file":"Only PNG, JPG, GIF, & SVG images and MP3 audio files are supported"},ru:{"er--js-server-error":"Ошибка на сервере","er--js-appears-offline":"Похоже, что нет интернета","er--js-connection-timeout":"Сервер не отвечает слишком долго","er--js-file-upload-not-supported":"Браузер не поддерживает загрузку файлов","er--js-no-files-to-upload":"Нет файлов для загрузки","er--js-can-upload-only-one-file":"Можно загрузить только одно изображение","er--js-supported-only-png-jpg-gif":"Поддерживаются только изображения PNG, JPG и GIF","er--unsupported-file":"Поддерживаются только изображения PNG, JPG, GIF, SVG и аудиофайлы MP3"},be:{"er--js-supported-only-png-jpg-gif":"Падтрымлiваюцца толькi выявы PNG, JPG i GIF","er--unsupported-file":"Падтрымлiваюцца толькi выявы PNG, JPG, GIF, SVG i аудыёфайлы MP3"},uk:{"er--js-supported-only-png-jpg-gif":"Підтримуються лише зображення PNG, JPG і GIF","er--unsupported-file":"Підтримуються лише зображення PNG, JPG, GIF, SVG і аудіофайли MP3"}},l=(0,i.default)();!function(){var i=e.message?e.message:"",l=$("html").attr("lang")||"en";if(i&&(void 0!==s[l][e.message]?i=s[l][e.message]:void 0!==s.en[e.message]&&(i=s.en[e.message]),n.hasClass(o)?a.html(i).promise().done(function(){n.removeClass(o),$(document).on("mousedown.e2NiceError keydown.e2NiceError",function(){$(document).off(".e2NiceError"),t()})}):t(function(){a.html(i).promise().done(function(){n.removeClass(o),$(document).on("mousedown.e2NiceError keydown.e2NiceError",function(){$(document).off(".e2NiceError"),t()})})})),"object"===r(e.debug)&&"object"===("undefined"==typeof console?"undefined":r(console))){var d,u;"function"==typeof window.getComputedStyle&&"function"==typeof window.getComputedStyle(document.documentElement).getPropertyValue&&(d=window.getComputedStyle(document.documentElement).getPropertyValue("--errorColor"),u=window.getComputedStyle(document.documentElement).getPropertyValue("--backgroundColor")),"function"==typeof console.log&&("string"==typeof e.debug.message?console.log("%c "+e.debug.message+" ","background: "+(d||"#D20D19")+"; color: "+(u||"#fff")+";"):"string"==typeof i&&console.log("%c "+i+" ","background: "+(d||"#D20D19")+"; color: "+(u||"#fff")+";")),"function"==typeof console.dir&&"function"==typeof console.log&&"object"===r(e.debug.data)&&$.each(e.debug.data,function(e,t){if("object"===(void 0===t?"undefined":r(t))&&t instanceof FormData&&"function"==typeof t.entries){console.log(e);var n=!0,a=!1,o=void 0;try{for(var i,s=t.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;console.dir(l[1])}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}}else console.log(e),console.dir(t)})}}()}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=window.localStorage,r=function(){if(void 0===a)return!1;try{return a.setItem("test","test"),a.removeItem("test"),!0}catch(e){return!1}}();t.localStorage=a,t.isLocalStorageAvailable=r},function(e,t,n){"use strict";function a(e){var t={type:"post",timeout:1e4,dataType:"json",cache:!1},n=e.success,a=e.error,o=e.complete,s=e.abort;delete e.success,delete e.error,delete e.complete,delete e.abort;var l=$.ajax($.extend(t,e));return l.done(function(t,o,s){"object"===(void 0===t?"undefined":r(t))?"boolean"==typeof t.success&&!0===t.success?"function"==typeof n&&n(t,o,s):("object"===r(t.error)&&"string"==typeof t.error.message?(0,i.default)({message:t.error.message,debug:{data:{requestData:e.data}}}):(0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: the response.error object is not available",data:{response:t}}}),"function"==typeof a&&a(s,o)):((0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: the response object is not available",data:{response:t}}}),"function"==typeof a&&a(s,o))}),l.fail(function(e,t){if("object"===(void 0===e?"undefined":r(e))&&"number"==typeof e.status&&"string"==typeof t)if(0===e.status){if("abort"===t)return"function"==typeof s&&s(e,t),!1;"timeout"===t?(0,i.default)({message:"er--js-connection-timeout"}):(0,i.default)({message:"er--js-appears-offline"})}else e.status>=400?(0,i.default)({message:"er--js-server-error",debug:{message:"Server responded with HTTP status code "+e.status,data:{jqXHR:e}}}):200===e.status&&"parsererror"===t?(0,i.default)({message:"er--js-server-error",debug:{message:"Server response is not JSON",data:{jqXHR:e}}}):(0,i.default)({message:"er--js-server-error",debug:{message:"Unexpected server response HTTP status code "+e.status,data:{jqXHR:e}}});else(0,i.default)({message:"er--js-server-error",debug:{message:"Server responce malformed: jqXHR is not an object or it does not contain required fields",data:{jqXHR:e}}});"function"==typeof a&&a(e,t)}),l.always(function(){"function"==typeof o&&o(arguments)}),l}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a},function(e,t,n){"use strict";function a(e,t){var n=e.find("animateTransform");n.length&&(t?(n[0].setAttribute("repeatCount","indefinite"),n[0].beginElement()):n[0].setAttribute("repeatCount","1"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e];return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mac:/Macintosh/.test(navigator.userAgent),iosdevice:/(iPad)|(iPhone)/.test(navigator.userAgent)}},function(e,t,n){"use strict";function a(e,t,n){var a=void 0,r={event:"keydown",target:document,prevent:!1};n=d(n,r),Array.isArray(e)?(a=[],f.default.mac||(e=e.map(function(e){return e.replace("Cmd","Ctrl")})),e.forEach(function(e){return a.push(o(e,t,n))})):(f.default.mac||(e=e.replace("Cmd","Ctrl")),a=o(e,t,n));var i="string"==typeof n.target?document.querySelector(n.target):n.target;Array.isArray(a)?a.forEach(function(a,r){c[e[r]]||(c[e[r]]=[]),i.addEventListener(n.event,a,!1),c[e[r]].push({event:n.event,elem:i,fn:t,realFn:a})}):(c[e]||(c[e]=[]),i.addEventListener(n.event,a,!1),c[e].push({event:n.event,elem:i,fn:t,realFn:a}))}function r(e,t,n){function a(e){c[e]&&c[e].slice().reverse().forEach(function(e,a,r){e.fn!==t||n.target&&e.elem!==n.target||(e.elem.removeEventListener(e.event,e.realFn,!1),r.splice(r.length-1-a,1))})}n=n||{},Array.isArray(e)?e.forEach(a):a(e)}function o(e,t,n){return e=l(e).split("+"),function(a){i(a,e)&&(t(a),n.prevent&&(a.preventDefault(),a.stopPropagation()))}}function i(e,t){var n=s(e.keyCode),a={enter:13},r={},o=["shift","ctrl","alt","cmd"],i=0;o.forEach(function(e){r[e]={wanted:!1,pressed:!1}}),e.shiftKey&&(r.shift.pressed=!0),e.ctrlKey&&(r.ctrl.pressed=!0),e.altKey&&(r.alt.pressed=!0),e.metaKey&&(r.cmd.pressed=!0);for(var l=0;l<t.length;l++){var d=t[l];o.indexOf(d)>-1?(i++,r[d].wanted=!0):(d.length>1&&a[d]===e.keyCode||n===d)&&i++}return t.length===i&&Object.keys(r).reduce(function(e,t){return e&&r[t].wanted===r[t].pressed},!0)}function s(e){switch(e){case 91:case 93:return"MetaKey";case 188:return",";case 190:return".";case 219:return"[";case 221:return"]";default:return String.fromCharCode(e).toLowerCase()}}function l(e){return e.toLowerCase().replace(/\s/g,"")}function d(e,t){if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.unbindKeys=t.bindKeys=void 0;var u=n(5),f=function(e){return e&&e.__esModule?e:{default:e}}(u),c={};t.bindKeys=a,t.unbindKeys=r},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(r).default}})},function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode("::selection { background: transparent; }")),w.forEach(function(a){function r(){function a(){function o(){e.selectionStart=r,e.selectionEnd=i,t.removeChild(n)}t.appendChild(n),setTimeout(o,10),(0,y.unbindKeys)(v,a,{target:e})}var r=e.selectionStart,i=e.selectionEnd,v=["Cmd+Z","Ctrl+Z"];if("inline"!==s||-1===e.value.substring(r,i).indexOf("\n")){var g=d({name:o,pattern:l,text:e.value,start:r,end:i,isConsequent:!0});console.log(g),g.isWrapped?m({name:o,pattern:l,elem:e,start:r,end:i,parsed:g,prefix:u,nextPrefix:f,suffix:c}):p({name:o,pattern:l,elem:e,start:r,end:i,parsed:g,prefix:u,nextPrefix:f,suffix:c}),(0,y.bindKeys)(v,a,{target:e}),$(e).on("input",function(){(0,y.unbindKeys)(v,a,{target:e})})}}var o=a.name,i=a.keys,s=a.type,l=a.regexp,d=a.parse,u=a.prefix,f=a.nextPrefix,c=a.suffix,p=a.wrap,m=a.unwrap;(0,y.bindKeys)(i,r,{target:e,prevent:!0})})}function o(e){var t=e.elem,n=e.text,a=e.start,r=e.end,o=e.nextStart,i=e.nextEnd;t.selectionStart=a,t.selectionEnd=r,document.execCommand("insertText",!1,n),$(t).trigger("input"),t.selectionStart=o,t.selectionEnd=i}function i(e){var t=e.pattern,n=e.text,a=e.start,r=e.end,o=e.isConsequent,i=v({text:n,start:a,end:r}),s=i.value,l=i.start,d=m({text:s,start:a-l,end:r-l,pattern:t,isConsequent:o});if(!d)return{isWrapped:!1};var u=d.value.split(d.unwrappedValue);return h({},d,{isWrapped:!0,realStart:d.start+l,realEnd:d.end+l,prefixLength:u[0].length,suffixLength:u[1].length})}function s(e){var t=e.elem,n=e.start,a=e.end,r=e.prefix,i=e.suffix,s=g({elem:t,start:n,end:a});o({elem:t,text:""+r+s.value+i,start:s.start,end:s.end,nextStart:n+r.length,nextEnd:a+r.length})}function l(e){var t=e.elem,n=e.start,a=e.end,r=e.parsed,i=r.realStart,s=r.realEnd,l=r.unwrappedValue,d=r.prefixLength,u=r.suffixLength;if(!l.length)return void o({elem:t,text:l,start:i,end:s,nextStart:i,nextEnd:i});var f=i+d,c=s-u,p=n-f,m=a-c;p<0&&(m-=p,p=0),m>0&&(m=0),o({elem:t,text:l,start:i,end:s,nextStart:i+p,nextEnd:i+l.length+m})}function d(e){var t=e.elem,n=e.start,a=e.end,r=e.prefix,i=e.suffix,s=g({elem:t,start:n,end:a}),l=s.value,d=void 0;s.value?C.test(s.value)?(l=""+r+s.value+" "+i,d=s.end+r.length+1):(l=r+" "+s.value+i,d=s.start+r.length):(l=r+" "+i,d=n+r.length),o({elem:t,text:l,start:s.start,end:s.end,nextStart:d,nextEnd:d})}function u(e){var t=e.elem,n=e.start,a=e.end,r=e.parsed,o=r.realStart,i=r.unwrappedValue,s=r.prefixLength,d=i.split(" "),u=o+s;d.length>1&&C.test(d[0])?(t.selectionStart=u,t.selectionEnd=u+d[0].length):l({elem:t,start:n,end:a,parsed:r})}function f(e){var t=e.text,n=e.start,r=e.end,o=e.pattern,i=w.filter(function(e){return"block"===e.type}),s=t.split("\n").reduce(function(e,t){var s=e.lastIndex,l=s+t.length;if(!(s<=n&&l>=n||s>=n&&l<=r||s<=r&&l>=r))return h({},e,{lastIndex:l+1});var d=i.reduce(function(e,n){if(e)return e;n.regexp.lastIndex=0;var a=n.regexp.exec(t);if(a){var r=a[0],o=a[1],i=a.index,l=a.index+r.length;return{value:r,wrappedBy:n.name,unwrappedValue:o,prefixLength:r.length-o.length,start:i+s,end:l+s}}},null),u=d||{value:t,start:s,end:l};return o.lastIndex=0,{lines:[].concat(a(e.lines),[u]),lastIndex:l+1,isWrapped:e.isWrapped&&o.test(u.value)}},{lines:[],lastIndex:0,isWrapped:!0});return delete s.lastIndex,s}function c(e){var t=e.elem,n=e.start,r=e.end,i=e.prefix,s=e.pattern,l=e.nextPrefix,d=e.parsed.lines,u=d.reduce(function(e,t){var n=""+i+t.value;return s.lastIndex=0,s.test(t.value)&&l?n=""+l+t.value:t.unwrappedValue&&(n=""+i+t.unwrappedValue),[].concat(a(e),[n])},[]).join("\n"),f=d[0].start,c=d[d.length-1].end,p=n-f,m=r-c;m<f-c&&(m+=f-c-m);var v=f,g=f+u.length;o({elem:t,text:u,start:f,end:c,nextStart:v+p+i.length,nextEnd:g+m})}function p(e){var t=e.elem,n=e.start,r=e.end,i=e.pattern,s=e.parsed.lines,l=s.reduce(function(e,t){return i.lastIndex=0,[].concat(a(e),[i.test(t.value)?t.unwrappedValue:t.value])},[]).join("\n"),d=s[0].start,u=s[s.length-1].end,f=d+s[0].prefixLength,c=u,p=n-f,m=r-c;p<0&&(p=0),m<f-c&&(m+=f-c-m),o({elem:t,text:l,start:d,end:u,nextStart:d+p,nextEnd:d+l.length+m})}function m(e){var t=e.text,n=e.start,a=e.end,r=e.pattern,o=e.isConsequent,i=void 0,s=[];for(console.log(t,n,a),r.lastIndex=0;null!==(i=r.exec(t));){console.log(i);var l=i[0],d=i[1],u=i.index,f=i.index+l.length;u<=n&&f>=a&&s.push({value:l,unwrappedValue:d,start:u,end:f}),o&&(r.lastIndex=i.index+1)}return s.length?(s.sort(function(e,t){return e.value.length-t.value.length}),s[0]):null}function v(e){var t=e.text,n=e.start,a=e.end;for(n-=1;"\n"!==t[n]&&n>0;)n--;for(0!==n&&n++;"\n"!==t[a]&&a<t.length;)a++;return{value:t.substring(n,a),start:n,end:a}}function g(e){var t=e.elem,n=e.start,a=e.end,r=n,o=a,i=t.value.substr(n,a-n);if(n===a){var s=v({text:t.value,start:n,end:a}),l=s.value,d=s.start,u=m({text:l,start:n-d,end:a-d,pattern:/[^\s]+/g});u&&(r=u.start+d,o=u.end+d,i=u.value)}return{start:r,end:o,value:i}}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y=n(6),b={type:"inline",parse:i,wrap:s,unwrap:l},x={type:"block",parse:f,wrap:c,unwrap:p},w=[h({},b,{name:"bold",keys:"Cmd+B",regexp:/\*\*([^\s]{0,2}|[^\s].*?[^\s])\*\*/g,prefix:"**",suffix:"**"}),h({},b,{name:"italic",keys:"Cmd+I",regexp:/\/\/([^\s]{0,2}|[^\s].*?[^\s])\/\//g,prefix:"//",suffix:"//"}),h({},b,{name:"link",keys:"Cmd+K",regexp:/\(\(\s*(.*?)\s*\)\)/g,prefix:"((",suffix:"))",wrap:d,unwrap:u}),h({},x,{name:"header",keys:"Cmd+Alt+1",regexp:/^[^\S\n]*#[^\S\n]*([^#].*)$/g,prefix:"# "}),h({},x,{name:"subheader",keys:"Cmd+Alt+2",regexp:/^[^\S\n]*##[^\S\n]*([^#].*)$/g,prefix:"## "}),h({},x,{name:"remove headers",keys:"Cmd+Alt+0",regexp:/^[^\S\n]*#{1,2}[^\S\n]*([^#].*)$/g,wrap:p}),h({},x,{name:"increase quote level",keys:"Cmd+]",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",nextPrefix:">",unwrap:c}),h({},x,{name:"decrease quote level",keys:"Cmd+[",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",wrap:function(){}})],C=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!\/\\\w]*))?)/;t.default=r},,function(e,t,n){"use strict";function a(e,t){var n=Math.max(Math.min(t,.9),.1),a=Math.floor(245-245*n);e.style.strokeDashoffset=a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(window.FormData){var t=new window.FormData;t.append("file",e.file),(0,i.default)({url:e.url,data:t,timeout:0,contentType:!1,processData:!1,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&"function"==typeof e.progress&&t.upload.addEventListener("progress",e.progress,!1),t},success:e.success,error:e.error})}else(0,l.default)({message:"er--js-file-upload-not-supported"})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),s=n(0),l=a(s);t.default=r},function(e,t,n){"use strict";function a(e,t){var n="",a=e.lastIndexOf("."),o="object"===(void 0===t?"undefined":r(t))?t:/^gif|jpe?g|png|svg|mp3$/i;return-1!==a&&(n=e.substr(a+1)),o.test(n)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a},,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),i=n(20),s=a(i),l=n(2),d=a(l),u=n(10),f=a(u),c=n(3),p=a(c),m=n(21),v=a(m),g=n(22),h=a(g),y=n(23),b=a(y),x=n(24),w=a(x),C=n(25),_=a(C),S=n(26),j=a(S),E=n(11),P=a(E),O=n(27),k=a(O),M=n(0),I=a(M),A=n(12),T=a(A);"undefined"!=typeof $&&$(function(){(0,s.default)(),(0,h.default)(),(0,v.default)(),(0,b.default)(),(0,k.default)(),(0,w.default)(),(0,_.default)(),(0,j.default)(),function(){function e(e){var t=e.originalEvent.dataTransfer;if(t&&(!t.types.contains||t.types.contains("Files"))&&(!t.types.indexOf||-1!==t.types.indexOf("Files"))){t.dropEffect&&(t.dropEffect="copy");var n=$(this);return n.addClass("e2-external-drop-target-dragover"),n.hasClass("e2-external-drop-target-altable")&&e.altKey?n.addClass("e2-external-drop-target-dragover-alt"):n.removeClass("e2-external-drop-target-dragover-alt"),!1}}function t(){var e=$(this);return e.removeClass("e2-external-drop-target-dragover"),e.removeClass("e2-external-drop-target-dragover-alt"),!1}function n(e){var t=e.originalEvent.dataTransfer,n=$(".e2-user-picture-container"),a=n.filter("[data-href]").eq(0).data("href"),r="e2-user-picture-container_uploading";if(!t||!t.files)return(0,I.default)({message:"er--js-no-files-to-upload",debug:{data:{event:e,dataTransfer:t}}}),!1;if(t.files.length>1)return(0,I.default)({message:"er--js-can-upload-only-one-file",debug:{data:{event:e,files:t.files}}}),!1;var o=t.files[0];if(!(0,T.default)(o.name,/^gif|jpe?g|png$/i))return(0,I.default)({message:"er--js-supported-only-png-jpg-gif",debug:{data:{file:o}}}),!1;n.each(function(){var e=$(this),t=e.find("a");(0,p.default)(e,1),e.addClass(r),t.attr("data-href",t.attr("href")).removeAttr("href")}),(0,P.default)({file:o,url:a,progress:function(e){e.lengthComputable&&n.each(function(){var t=$(this),n=t.find("circle.e2-progress");(0,f.default)(n[0],e.loaded/e.total)})},success:function(e){if(n.each(function(){var t=$(this),n=t.find("a"),a=t.find("circle.e2-progress");(0,f.default)(a[0],0),(0,p.default)(t,0),void 0!==e.data&&void 0!==e.data["new-image-src"]||(t.removeClass(r),n.attr("href",n.attr("data-href")))}),void 0===e.data||void 0===e.data["new-image-src"])return(0,I.default)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:e}}}),!1;n.each(function(){var t=$(this),n=t.find("a");t.find("img").on("load",function(){t.removeClass(r),n.attr("href",n.attr("data-href")).removeAttr("data-href")}).attr("src",e.data["new-image-src"]+"?"+Date.now())}),$(".e2-set-userpic-by-dragging").slideUp(333,function(){})},error:function(){n.each(function(){var e=$(this),t=e.find("a"),n=e.find("circle.e2-progress");e.removeClass(r),t.attr("href",t.attr("data-href")),(0,f.default)(n[0],0)})}})}$(".e2-external-drop-target").on("dragover dragenter",e).on("dragleave drop",t),$(".e2-user-picture-container").on("drop",n),function(){if(o.isLocalStorageAvailable){var e=$("#e2-drafts-item"),t=e.find(".e2-unsaved-led"),n=$("#e2-new-note-item .e2-unsaved-led"),a=$("#e2-notes-unsaved"),r=$("#e2-nothing-message"),i=$("#form-note"),s=document.e2.localCopies.getList(),l=document.e2.localCopies.doesCopyExist("new"),d=i?$("#note-id").val():null,u="new"!==d&&document.e2.localCopies.doesCopyExist(d),f=Object.keys(s).length;if(l&&f--,u&&f--,t&&f>0&&(e.show(),t.show()),n&&l&&n.show(),a&&r){var c=document.e2.localCopies.getName("new");s.hasOwnProperty(c)&&delete s[c];for(var p in s)"false"===s[p].isPublished&&($("#e2-draft-"+p+" .e2-unsaved-led").show(),delete s[p]);if(Object.keys(s).length){for(var m in s){var v=document.e2.localCopies.get(m);if(v){var g=$("#e2-unsaved-note-prototype").clone(!0);g.attr("id",null),$(".e2-admin-link",g).attr("href",v.link),$("u",g).html(v.title),g.attr("style",""),a.append(g)}}a.show(),r.hide()}}}}()}(),function(){var e=function(e,t){t?(e.addClass("e2-admin-item_thinking"),(0,p.default)(e,1)):((0,p.default)(e,0),e.removeClass("e2-admin-item_thinking"))},t=function(e,t){t?e.addClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled"):e.removeClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled")},n=function(n,a,r){if(n.blur(),n.hasClass("e2-admin-item_disabled"))return!0;if(n.hasClass("e2-popup-menu-widget-item_disabled"))return!0;var o=n.hasClass("e2-admin-item_on")?"on":"off",i=void 0!==n.data("e2-js-action")&&n.data("e2-js-action").indexOf("couple-trigger")>=0;n.removeClass("e2-admin-item_on"),e(n,1),t(n,1),(0,d.default)({url:n.attr("href"),data:"result=ajaxresult",success:function(e){if(void 0===e.data||void 0===e.data["flag-now-on"])return(0,I.default)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:e}}}),"on"===o&&n.addClass("e2-admin-item_on"),!1;e.data["flag-now-on"]?(n.addClass("e2-admin-item_on"),a(n,e.data["new-href"])):(n.removeClass("e2-admin-item_on"),r(n,e.data["new-href"]))},error:function(){"on"===o&&n.addClass("e2-admin-item_on"),i&&n.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM")},complete:function(){e(n,0),t(n,0)}})},a=function(e){var t={"toggle-favourite":function(){n(e,function(e,t){e.attr("href",t).parents(".e2-note").addClass("e2-note-favourite")},function(e,t){e.attr("href",t).parents(".e2-note").removeClass("e2-note-favourite")})},"toggle-pinned":function(){n(e,function(e,t){e.attr("href",t)},function(e,t){e.attr("href",t)})},"toggle-important":function(){n(e,function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").addClass("e2-comment-piece-marked")},function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").removeClass("e2-comment-piece-marked")})},"removed-href":function(){n(e,function(e,t){},function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-author").addClass("e2-comment-author-removed"),n.find(".e2-comment-meta, .e2-comment-content").slideUp(333),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideUp(333),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"removed"})})},"replaced-href":function(){n(e,function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-content, .e2-comment-meta").slideDown(333),n.find(".e2-comment-author").removeClass("e2-comment-author-removed"),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideDown(333),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"recovered"})},function(e,t){})},"couple-trigger":function(){e.trigger("E2_ADMIN_COUPLE_WILL_THINK")}},a=!0,r=e.data("e2-js-action");return r&&$.each(r.split(","),function(e,n){"function"==typeof t[n]&&(a=!1,t[n]())}),a};$(".e2-admin-item").add(".e2-popup-menu-widget-item").on("click",function(){return a($(this))})}(),function(){var e=function(e){if(e.length){var t=e.find(".e2-admin-couple-item");e.find('[data-e2-js-action*="couple-trigger"]').on("E2_ADMIN_COUPLE_CHANGE_ITEM",function(n,a){(0,p.default)(e.find(".e2-admin-couple-spinner"),0),"object"===(void 0===a?"undefined":r(a))&&"string"==typeof a.response&&(t.addClass("e2-admin-couple-item_hidden"),e.find(".e2-admin-couple-item_"+a.response).removeClass("e2-admin-couple-item_hidden")),e.removeClass("e2-admin-couple_thinking")}).on("E2_ADMIN_COUPLE_WILL_THINK",function(){(0,p.default)(e.find(".e2-admin-couple-spinner"),1),e.addClass("e2-admin-couple_thinking")})}};$(".e2-admin-couple").each(function(){e($(this))}),$(document).on("E2_ADMIN_COUPLE_INIT",function(t,n){void 0!==n.$couple&&e(n.$couple)})}()})},function(e,t,n){"use strict";function a(){r.isLocalStorageAvailable&&(document.e2.localCopies={_lsKey:"copies-info",_lsPrefix:"copy-",_cookieName:document.e2.cookiePrefix+"local_copies",getListName:function(){return this._lsKey},getPrefix:function(){return this._lsPrefix},getName:function(e){return this._lsPrefix+e},save:function(e,t){r.localStorage.setItem(this.getName(e),JSON.stringify(t)),this.addToList(e,t)},remove:function(e){r.localStorage.removeItem(this.getName(e)),this.removeFromList(e)},get:function(e,t,n){var a=!1;try{if(!(a=JSON.parse(r.localStorage.getItem(this.getName(e)))))return!1}catch(e){return!1}return n&&t&&this.isCopyOutdated(a,t,n)?(this.remove(e),!1):a},getList:function(){try{return JSON.parse(r.localStorage.getItem(this._lsKey))||{}}catch(e){return{}}},addToList:function(e,t){var n=this.getList();n.hasOwnProperty(e)||(n[e]={isPublished:t.isPublished,timestamp:t.timestamp},r.localStorage.setItem(this._lsKey,JSON.stringify(n)),this.updateCookie(n))},removeFromList:function(e){var t=this.getList();t.hasOwnProperty(e)&&(delete t[e],r.localStorage.setItem(this._lsKey,JSON.stringify(t)),this.updateCookie(t))},doesCopyExist:function(e){return r.localStorage.hasOwnProperty(this.getName(e))},isCopyOutdated:function(e,t,n){if(!t||!n)return!1;var a=+e.timestamp,r=(new Date).getTime(),o=n-r;return Math.abs(o)>216e6&&(t-=o),a<=t},checkOutdatedCopies:function(){var e=document.e2.noteLastModifiedsById||{},t=this.getList();for(var n in t)"new"!==n&&(e.hasOwnProperty(n)?this.isCopyOutdated(t[n],1e3*e[n],1e3*document.e2.serverTime)&&this.remove(n):this.remove(n))},generateCookie:function(){document.cookie.match(new RegExp("(?:^|; )"+this._cookieName.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"))||this.updateCookie()},updateCookie:function(e){e=e||this.getList();var t=[];for(var n in e)"new"!==n&&t.push(n);if(t.length)document.cookie=this._cookieName+"="+t.join(",")+";path=/";else{var a=new Date;a.setTime(a.getTime()-1),document.cookie=this._cookieName+'="";path=/;expires='+a.toUTCString()}}},document.e2.localCopies.checkOutdatedCopies(),document.e2.localCopies.generateCookie())}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);document.e2=document.e2||{},t.default=a},function(e,t,n){"use strict";function a(){var e=$(".e2-note");e.length&&r.isLocalStorageAvailable&&function(e){for(var t=0;t<e.length;t++){var n=e[t].id.replace("e2-note-","");document.e2.localCopies.doesCopyExist(n)&&$("#e2-note-"+n+" .e2-unsaved-led").show()}}(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=a},function(e,t,n){"use strict";function a(){function e(){S||(l.off("ajaxError",e),j=setInterval(i,3e3),window.addEventListener("beforeunload",i),window.addEventListener("pagehide",n),l.on("submit",t).on("ajaxError",e),m.on("input",a),S=!0)}function t(){clearInterval(j),n(),window.removeEventListener("pagehide",n),l.off("submit",t),m.off("input",a),S=!1}function n(){window.removeEventListener("beforeunload",i)}function a(){m[0].selectionEnd&&(_=m[0].selectionEnd)}function o(){var e=document.e2.localCopies.get(d.val(),b,x);if(e){e.caretPosition&&m.one("autosized",function(){if("function"==typeof window.getCaretCoordinates){var t=window.getCaretCoordinates(m[0],e.caretPosition);window.scrollTo(0,m.position().top+t.top-15)}}),document.queryCommandSupported("insertText")?(p.focus().select(),document.execCommand("insertText",!1,e.title),p.trigger("input"),m.focus().select(),document.execCommand("insertText",!1,e.text),m.trigger("input")):(p.val(e.title).trigger("input"),m.val(e.text).trigger("input"));var t=e.tags?e.tags.slice():[];if(t.length&&v.find("option").each(function(e,n){var a=t.indexOf(n.text);a>-1&&t.splice(a,1)}),t.length){var n=void 0,a=function e(){if(!v.hasClass("chzn-done"))return void(n=setTimeout(e,500));clearTimeout(n);var a=$("#tags_chzn .search-field input");t.forEach(function(e){a.val(e+","),a.trigger({type:"keyup",which:191})})};n=setTimeout(a,500)}v.val(e.tags).trigger("input"),y.empty().html(e.images.reduce(function(e,t){return void 0!==t.src&&t.src?e+'<div class="e2-uploaded-image"><div class="e2-uploaded-image-inner"><img src="'+t.src+'" alt="'+t.alt+'" width="'+t.width+'" height="'+t.height+'"></div></div>':""},"")),(e.alias&&g.val()!==e.alias||h.val()!==e.stamp)&&(g.val(e.alias),h.val(e.stamp),$(".e2-note-time-and-url").slideToggle()),f.show(),c.show(),e.caretPosition&&(m.focus(),m[0].selectionStart=m[0].selectionEnd=_=e.caretPosition)}}function i(){var e=f.is(":visible");if(e||C){C=e;var t=s();if(!t.images.length&&!t.title.trim()&&!t.text.trim())return void document.e2.localCopies.remove(t.id);document.e2.localCopies.save(t.id,t)}}function s(){for(var e=y.find(".e2-uploaded-image"),t=d.val(),n=p.val(),a=m.val(),r=[],o=void 0,i=0;i<e.length;i++)o=e.eq(i).find("img"),r.push({src:o.attr("src"),alt:o.attr("alt"),width:o.width(),height:o.height()});return{id:t,title:n,text:a,tags:v.val(),images:r,alias:"new"!==w&&g.val(),stamp:h.val(),timestamp:(new Date).getTime(),link:window.location.pathname,isPublished:u.val(),caretPosition:_}}var l=$("#form-note");if(r.isLocalStorageAvailable&&l){var d=$("#note-id"),u=$("#is-note-published"),f=$("#livesave-button"),c=$("#livesave-button + .e2-unsaved-led"),p=$("#title"),m=$("#text"),v=$("#tags"),g=$("#alias"),h=$("#stamp"),y=$("#e2-uploaded-images"),b=1e3*+$("#note-timestamp").val(),x=1e3*+$("#server-time").val(),w=d.val(),C=f.is(":visible"),_=null,S=!1,j=null;document.e2.localCopies.loadLocalCopy=o,document.e2.localCopies.initLocalSaver=e,document.e2.localCopies.destroyLocalSaver=t}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){e=e||{},(0,c.default)({url:f.find("#e2-note-livesave-action").attr("href"),data:f.serialize(),success:function(t){if(void 0===t.data||void 0===t.data.status)return(0,m.default)({message:"er--js-server-error",debug:{message:"Server response malformed",data:{response:t}}}),!1;"function"==typeof e.onAjaxSuccess&&e.onAjaxSuccess(),"created"===t.data.status?(window.history.replaceState&&(window.history.replaceState(null,"",t.data["note-edit-url"]),$(".e2-admin-menu-new-selected").hide(),$(".e2-admin-menu-new").show()),p.val(t.data.id),r(),"function"==typeof e.onCreated&&e.onCreated(t),g=null):"saved"===t.data.status&&($("#alias").val(t.data["new-alias"]),window.history.replaceState&&window.history.replaceState(null,"",t.data["note-edit-url"]),r(),"function"==typeof e.onSaved&&e.onSaved(t),g=null)},error:e.onAjaxError,complete:e.onAjaxComplete})}function t(){$("#stamp").val()&&C.test($("#stamp").val()),/^ *$/.test($("#title").val())||/^ *$/.test($("#text").val())||w?v.prop("disabled",!0):v.prop("disabled",!1)}function n(e){(0,i.default)($("#livesaving"),0),$("#livesaving").hide(),$("#livesave-button, #livesave-button + .e2-unsaved-led").show()}function a(){if(!w){var a=o();if(""!==a.text){if(w=!0,t(),""===a.title){var r,s=a.text;(r=s.indexOf("."))>=0&&(s=s.substr(0,r)),(r=s.indexOf(";"))>=0&&(s=s.substr(0,r)),(r=s.indexOf(","))>=0&&(s=s.substr(0,r)),(r=s.indexOf(")"))>=0&&(s=s.substr(0,r)),0===s.indexOf("((")&&(s=s.substr(2)),s=s.substr(0,1).toUpperCase()+s.substr(1),$("#title").val(s).change()}$("#livesave-button, #livesave-button + .e2-unsaved-led").hide(),$("#livesaving").fadeIn(333),(0,i.default)($("#livesaving"),1),e({onCreated:function(e){h=a,$("#e2-drafts")&&$("#e2-drafts-item")&&($("#e2-drafts-item").fadeIn(333),$('<div class="e2-admin-menu-item-frame"></div>').css({position:"absolute",left:$("#e2-note-form-wrapper").offset().left,top:$("#e2-note-form-wrapper").offset().top,width:$("#e2-note-form-wrapper").width(),height:$("#e2-note-form-wrapper").height()}).appendTo("body").animate({left:$("#e2-drafts").offset().left-10,top:$("#e2-drafts").offset().top-5,width:$("#e2-drafts").width()+20,height:$("#e2-drafts").height()+10},667).fadeTo(333,.667).fadeOut(333),$("#e2-drafts-count").html(1*$("#e2-drafts-count").html()+1))},onSaved:function(e){h=a},onError:n,onAjaxSuccess:function(){(0,i.default)($("#livesaving"),0),$("#livesaving").fadeOut(333)},onAjaxError:function(e,t){n(t)},onAjaxComplete:function(){w=!1,t()}})}}}function r(){s.isLocalStorageAvailable&&(g?document.e2.localCopies.remove(g):document.e2.localCopies.remove(p.val()),document.e2.localCopies.destroyLocalSaver())}function o(){return{title:$("#title").val(),tags:($("#tags").val()||[]).join(),text:$("#text").val(),alias:$("#alias").val(),stamp:$("#stamp").val()}}function d(e,t){return JSON.stringify(e)===JSON.stringify(t)}var f=$("#form-note");if(f.length){var p=f.find("#note-id"),v=f.find("#submit-button"),g=p.val(),h=o(),y=h?Object.assign({},h):o(),b=!1,x=!1,w=!1,C=/^ *(\d{1,2})\.(\d{1,2})\.(\d{2}|\d{4}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/;$(window).bind("pageshow",function(e){e.originalEvent.persisted&&window.location.reload()}),document.e2.localCopies.initLocalSaver&&document.e2.localCopies.loadLocalCopy&&(document.e2.localCopies.loadLocalCopy(),document.e2.localCopies.initLocalSaver()),f.on("submit",function(n){function a(e){h=s,(0,i.default)($("#note-saving"),0),$("#note-saving").hide(),$("#note-saved").fadeIn(333),window.location.href=e.data["note-url"]}function r(e){f.trigger("ajaxError"),(0,i.default)($("#note-saving"),0),$("#note-saving").hide(),$("#submit-keyboard-shortcut").show()}n.preventDefault();var s=o();w=!0,t(),$("#submit-keyboard-shortcut").hide(),(0,i.default)($("#note-saving"),1),$("#note-saving").show(),e({onCreated:a,onSaved:a,onError:r,onAjaxError:function(e,t){r(t)},onAjaxComplete:function(){w=!1,t()}})}),$("#title").bind("input",function(){$("#alias").attr("placeholder","")});var _="change input keyup keydown keypress mouseup mousedown cut copy paste blur",S=function(){$("#stamp").val()&&$("#stamp").toggleClass("input-error",null===$("#stamp").val().match(C)),t();var e=o();b=!d(y,e),x=!h||!d(h,e);var n=$("#livesave-button, #livesave-button + .e2-unsaved-led");b&&x&&""!==e.text?(b=!1,$("#livesaving").hide(),document.e2.localCopies.initLocalSaver(),n.fadeIn(333),y=Object.assign({},e)):x||(x=!1,r(),n.fadeOut(333),y=Object.assign({},e));var a=e.title.trim(),i=e.text.trim();$("#e2-uploaded-images .e2-uploaded-image").length||a||i||!n.is(":visible")||n.fadeOut(333)};$("#title").add("#tags").add("#text").add("#alias").add("#stamp").on(_,S),$("#tags").on("liszt:ready",function(){$("#tags_chzn .search-field").on(_,S)}),$("#title").on("keydown",function(e){13===e.keyCode&&$("#text").focus()}),$("#livesave-button").on("click",function(){return a(),!1}),u.default.mac?(0,l.bindKeys)("Cmd+S",a,{prevent:!0}):(0,l.bindKeys)("Ctrl+S",a,{prevent:!0}),$("#text").is(":focus")||$("#title").attr("autofocus",!0).focus().val($("#title").val()),t()}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=a(o),s=n(1),l=n(6),d=n(5),u=a(d),f=n(2),c=a(f),p=n(0),m=a(p);t.default=r},function(e,t,n){"use strict";function a(){$("#form-note-publish").length&&($(".e2-schedule-controls-revealer").on("click",function(){$(".e2-publish-now-controls").hide(),$(".e2-schedule-controls").show(),$(".e2-post-time-control").slideDown(333,function(){$(".e2-schedule-controls button").prop("disabled",!1)});var e=new Date,t=e.getDate();t<10&&(t="0"+t);var n=e.getMonth()+1;n<10&&(n="0"+n);var a=e.getFullYear(),r=e.getHours(),o=e.getMinutes();return r+=1,59===o&&(r+=1),r<10&&(r="0"+r),$("#stamp").val(t+"."+n+"."+a+" "+r+":00:00"),$("#stamp").trigger("change"),!1}),$(".e2-schedule-controls-unrevealer").on("click",function(){return $(".e2-schedule-controls").hide(),$(".e2-schedule-controls button").prop("disabled",!0),$(".e2-post-time-control").slideUp(333),$(".e2-publish-now-controls").show(),!1}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(){$("#form-preferences").length&&((0,o.default)(document.getElementById("blog-description")),$("#e2-template-selector").show(),$("#blog-title").bind("input blur cut copy paste keypress",function(){var e=$("#e2-blog-title");e&&e.text(this.value?this.value:$("#e2-blog-title-default").val())}),$("#blog-author").bind("input blur cut copy paste keypress",function(){var e=$("#e2-blog-author");e&&e.text(this.value?this.value:$("#e2-blog-author-default").val())}),$("#notes-per-page").bind("change blur",function(){parseInt(this.value)!==parseInt(this.value)&&(this.value=10),this.value=Math.min(Math.max(this.value,3),100)}),$("#email-notify").bind("change",function(){$("#email").focus()}),$("#email").bind("input change blur",function(){this.value||$("#email-notify").prop("checked",!1)}),$(".e2-template-preview").click(function(){var e=$(this);$(".e2-template-preview").attr("class","e2-template-preview"),e.addClass("e2-current-template-preview"),$("#template").val(e.attr("value")),$(".e2-template-preview-link").attr("href",e.data("preview-url"))}))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a},function(e,t,n){"use strict";function a(){function e(){/^ *$/.test($("#tag").val())||/^ *$/.test($("#urlname").val())?n.prop("disabled",!0):n.prop("disabled",!1)}var t=$("#form-tag");if(!t.length){var n=t.find("#submit-button");$(".required").bind("input blur cut copy paste keypress",e),e()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e,t,n,a,r){var o=$("#e2-uploaded-image-prototype").clone(!0),i=o.find(".e2-uploaded-image-inner_good"),l=i.find("img"),d=o.find(".e2-uploaded-image-inner_bad"),u=d.find(".e2-uploaded-image-noimage"),f=o.find(".e2-popup-menu");return o.removeAttr("id").attr("style","").data("file",t).css("width",""),f.find(".e2-image-popup-menu-filename").text(t).attr("title",t),a&&r?(d.remove(),l.attr("src",e+"?"+(new Date).getTime()).attr("alt",t).attr("width",a).attr("height",r),f.find(".e2-image-popup-menu-filesize").text(n)):(o.addClass("e2-uploaded-image_broken"),i.remove(),u.attr("data-src",e),f.find(".e2-popup-menu-widget-item").filter(":not(.e2-popup-menu-widget-item_info):not(.e2-popup-menu-widget-item_remove)").addClass("e2-popup-menu-widget-item_disabled")),$(document).trigger("E2_ADMIN_ITEM_WITH_POPUP_MENU_INIT",{$popupMenu:f}),-1===$.inArray(t,s)&&s.push(t),o}function t(){if(o.length){var n=C.find("circle.e2-progress")[0],a=o.shift(),r=$("#e2-file-upload-action").attr("href")+"?";return(0,c.default)(a.name,/^gif|jpe?g|png|svg|mp3$/i)?(void 0!==$("#note-id").val()?r+="entity=note&entity-id="+$("#note-id").val():void 0!==$("#tag-id").val()?r+="entity=tag&entity-id="+$("#tag-id").val():r=null,r&&a.e2AltKeyPressed&&(r+="&overwrite"),(0,u.default)(n,0),(0,l.default)(C,1),C.removeClass(S),b.addClass(_),(0,g.default)({file:a,url:r,progress:function(e){if(e.lengthComputable){var t=(d+e.loaded)/f;(0,u.default)(n,t)}},success:function(n){d+=a.size;var r=$('#e2-uploaded-images img[src="'+n.data.thumb+'"], #e2-uploaded-images img[src^="'+n.data.thumb+'?"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src="'+n.data.thumb+'"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src^="'+n.data.thumb+'?"]'),o=r.parents(".e2-uploaded-image");if(n.data.overwrite)(0,l.default)(C,0),C.addClass(S),b.removeClass(_),r.length&&(e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).insertAfter(o),o.remove());else{a.e2DroppedIntoTextarea&&(0,m.default)(n.data["new-name"]);-1!==$.inArray(n.data["new-name"],s)?((0,l.default)(C,0),C.addClass(S),b.removeClass(_),r.length&&(e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).insertAfter(o),o.remove())):e(n.data.thumb,n.data["new-name"],n.data.filesize,n.data.width,n.data.height).appendTo(p).show(333,function(){(0,l.default)(C,0),C.addClass(S),b.removeClass(_)})}t()},error:function(){(0,l.default)(C,0),C.addClass(S),b.removeClass(_),t()},complete:function(){(0,u.default)(n,0)}}),!1):((0,x.default)({message:"er--unsupported-file",debug:{data:{file:a}}}),!1)}return f=0,d=0,!0}function n(e){var n=e.originalEvent.dataTransfer;if(n&&n.files){var a="text"===$(e.target).attr("id");o.length=0;for(var r=0;r<n.files.length;r++)n.files[r].e2AltKeyPressed=e.altKey,n.files[r].e2DroppedIntoTextarea=a,o.push(n.files[r]),d=0,f+=n.files[r].size;return t(),!1}}function a(e){if(!e.target.files.length)return!1;o.length=0;for(var n=0;n<e.target.files.length;n++)o.push(e.target.files[n]),d=0,f+=e.target.files[n].size;return t(),!1}if($("#form-tag").length||$("#form-note").length){$(".e2-upload-controls-attach").length>0&&$(document.body).addClass("e2-external-drop-target e2-external-drop-target-body e2-external-drop-target-altable");var r=(0,i.default)(),o=[],s=[],d=0,f=0,p=$("#e2-uploaded-images"),v=p.find(".e2-uploaded-image"),h=$(".e2-upload-controls"),b=h.find(".e2-upload-controls-attach"),w=b.find(".e2-upload-controls-attach-input"),C=h.find(".e2-upload-controls-uploading"),_="e2-upload-controls-attach_hidden",S="e2-upload-controls-uploading_hidden";p.on("click",'[data-e2-js-action*="remove-image"]',function(e){var t=$(e.currentTarget).parents(".e2-uploaded-image"),n=t.data("file");return t.addClass("e2-uploaded-image_deleting"),(0,y.default)({file:n,success:function(){s.splice($.inArray(n,s),1),r?(t.off(r+".e2Delfiles").on(r+".e2Delfiles",function(){t.remove()}),t.addClass("e2-uploaded-image_deleted")):t.remove()},error:function(){t.removeClass("e2-uploaded-image_deleting")}}),!1}).on("click",'[data-e2-js-action*="paste-image"]',function(e){var t=$(e.currentTarget);return(0,m.default)(t.parents(".e2-uploaded-image").data("file")),!1}),v.length&&p.html(function(){var t=[];return v.each(function(){var n,a,r,o,i,s=$(this),l=s.find("img"),d=s.find(".e2-uploaded-image-noimage");l.length?(n=l.attr("src"),a=l.data("filename"),r=l.data("filesize"),o=l.attr("width"),i=l.attr("height")):(n=d.data("src"),a=d.data("filename")),t.push(e(n,a,r,o,i))}),t}()),h.removeClass("e2-upload-controls_hidden"),w.on("change",a),$(".e2-external-drop-target-body, .e2-external-drop-target-textarea").on("drop",n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=a(o),s=n(3),l=a(s),d=n(10),u=a(d),f=n(12),c=a(f),p=n(28),m=a(p),v=n(11),g=a(v),h=n(29),y=a(h),b=n(0),x=a(b);t.default=r},function(e,t,n){"use strict";function a(e){var t="";if("calliope"===$("#formatter-id").val()&&(t="(("+e+"))"),"neasden"===$("#formatter-id").val()&&(t=e+""),t){var n=document.getElementById("text");if(n.focus(),n.selectionStart||"0"===n.selectionStart){var a=n.selectionStart,r=n.selectionEnd,o=t;if(a===r){for(;"\r"!==n.value.charAt(a)&&"\n"!==n.value.charAt(a)&&a>0;)a-=1;for(;"\r"===n.value.charAt(a)||"\n"===n.value.charAt(a);)a+=1;o+="\n\n",r=a}n.value=n.value.substring(0,a)+o+n.value.substring(r,n.value.length),n.selectionStart=n.selectionEnd=a+o.length-2}else n.value+="\r\n\r\n"+t;if("createEvent"in document){var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),n.dispatchEvent(i)}else n.fireEvent("onchange");n.focus()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(e){var t=$("#e2-file-remove-action").attr("href")+"?";if($("#form-note"))t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag"))return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return(0,o.default)({url:t,data:{file:e.file},success:e.success,error:e.error,complete:e.complete,abort:e.abort})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a}])});