$&&$((function(){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=68)}([function(e,t,n){"use strict";var r=n(10);t.a=function(e){var t,n,o,a,i=$(".e2-nice-error"),s=i.find(".e2-nice-error-inner"),l={en:{"er--js-server-error":"Server error","er--js-appears-offline":"The connection appears to be offline","er--js-connection-timeout":"Server does not respond for too long","er--js-file-upload-not-supported":"The browser does not support file upload","er--js-no-files-to-upload":"No files to upload","er--js-can-upload-only-one-file":"Only one file may be uploaded here","er--supported-only-png-jpg-gif":"Only png, webp, jpg, & gif images are supported","er--unsupported-file":"Only png, webp, jpg, gif, & svg images, mp4 & mov videos, and mp3 audio files are supported"},ru:{"er--js-server-error":"Ошибка на сервере","er--js-appears-offline":"Похоже, что нет интернета","er--js-connection-timeout":"Сервер не отвечает слишком долго","er--js-file-upload-not-supported":"Браузер не поддерживает загрузку файлов","er--js-no-files-to-upload":"Нет файлов для загрузки","er--js-can-upload-only-one-file":"Можно загрузить только одно изображение","er--supported-only-png-jpg-gif":"Поддерживаются только изображения png, webp, jpg и gif","er--unsupported-file":"Поддерживаются только изображения png, webp, jpg, gif и svg, видео mp4 и mov и аудиофайлы mp3"},fr:{"er--js-server-error":"Erreur sur le serveur","er--js-appears-offline":"La connexion semble être hors ligne","er--js-connection-timeout":"Le serveur ne répond pas trop longtemps","er--js-file-upload-not-supported":"Le navigateur ne prend pas en charge le téléchargement de fichiers","er--js-no-files-to-upload":"Aucun fichier à télécharger","er--js-can-upload-only-one-file":"Un seul fichier peut être téléchargé ici","er--supported-only-png-jpg-gif":"Seules les images png, webp, jpg et gif sont prises en charge","er--unsupported-file":"Seuls les images png, webp, jpg, gif et svg, vidéos mp4 et mov et les fichiers audio mp3 sont pris en charge"},it:{"er--js-server-error":"Errore sul server","er--js-appears-offline":"La connessione sembra di mancare","er--js-connection-timeout":"Il server non risponde per troppo tempo","er--js-file-upload-not-supported":"Il navigatore web non supporta caricamento dei fili","er--js-no-files-to-upload":"Non ci sono fili da caricare","er--js-can-upload-only-one-file":"Solo un file può essere caricato qui","er--supported-only-png-jpg-gif":"Sono supportati solo immagini png, webp, jpg e gif","er--unsupported-file":"Sono supportati solo immagini png, webp, jpg, gif e svg, video mp4 e mov, e fili audio mp3"},be:{"er--js-server-error":"Памылка на серверы","er--js-appears-offline":"Падобна на тое, што няма інтэрнэту","er--js-connection-timeout":"Сервер не адказвае занадта доўга","er--js-file-upload-not-supported":"Браўзэр не падтрымлівае загрузку файлаў","er--js-no-files-to-upload":"Няма файлаў для загрузкі","er--js-can-upload-only-one-file":"Можна загрузіць толькі адна выява","er--supported-only-png-jpg-gif":"Падтрымлiваюцца толькi выявы png, webp, jpg i gif","er--unsupported-file":"Падтрымлiваюцца толькi выявы png, webp, jpg, gif i svg, відэа mp4 і mov i аудыёфайлы mp3"},uk:{"er--js-server-error":"Помилка на сервері","er--js-appears-offline":"Схоже, що немає інтернету","er--js-connection-timeout":"Сервер не відповідає занадто довго","er--js-file-upload-not-supported":"Браузер не підтримує завантаження файлів","er--js-no-files-to-upload":"Немає файлів для завантаження","er--js-can-upload-only-one-file":"Можна завантажити лише одне зображення","er--supported-only-png-jpg-gif":"Підтримуються лише зображення png, webp, jpg і gif","er--unsupported-file":"Підтримуються лише зображення png, webp, jpg, gif і svg, відео mp4 і mov і аудіофайли mp3"}},c=Object(r.a)();function u(e){"function"==typeof e?c?(i.off(c+".e2NiceError").on(c+".e2NiceError",(function(){i.off(c+".e2NiceError"),e()})),i.addClass("e2-nice-error_hidden")):(i.addClass("e2-nice-error_hidden"),e()):i.addClass("e2-nice-error_hidden")}o=e.message?e.message:"",a=$("html").attr("lang")||"en",o&&(void 0!==l[a][e.message]?o=l[a][e.message]:void 0!==l.en[e.message]&&(o=l.en[e.message]),i.hasClass("e2-nice-error_hidden")?s.html(o).promise().done((function(){i.removeClass("e2-nice-error_hidden"),$(document).on("mousedown.e2NiceError keydown.e2NiceError",(function(){$(document).off(".e2NiceError"),u()}))})):u((function(){s.html(o).promise().done((function(){i.removeClass("e2-nice-error_hidden"),$(document).on("mousedown.e2NiceError keydown.e2NiceError",(function(){$(document).off(".e2NiceError"),u()}))}))}))),"object"==typeof e.debug&&"object"==typeof console&&("function"==typeof window.getComputedStyle&&"function"==typeof window.getComputedStyle(document.documentElement).getPropertyValue&&(t=window.getComputedStyle(document.documentElement).getPropertyValue("--errorColor"),n=window.getComputedStyle(document.documentElement).getPropertyValue("--backgroundColor")),"function"==typeof console.log&&("string"==typeof e.debug.message?console.log("%c "+e.debug.message+" ","background: "+(t||"#D20D19")+"; color: "+(n||"#fff")+";"):"string"==typeof o&&console.log("%c "+o+" ","background: "+(t||"#D20D19")+"; color: "+(n||"#fff")+";")),"function"==typeof console.dir&&"function"==typeof console.log&&"object"==typeof e.debug.data&&$.each(e.debug.data,(function(e,t){if("object"==typeof t&&t instanceof FormData&&"function"==typeof t.entries)for(var n of(console.log(e),t.entries()))console.dir(n[1]);else console.log(e),console.dir(t)})))}},function(e,t,n){"use strict";var r=n(8);t.a=function(e,t){const n=e.find("animateTransform"),o=e.find("circle.e2-progress");n.length&&(t?"indefinite"!==n[0].getAttribute("repeatCount")&&(n[0].setAttribute("repeatCount","indefinite"),n[0].beginElement()):n[0].setAttribute("repeatCount","1"),o.length&&Object(r.a)(o,0,!0))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const r=window.localStorage,o=(()=>{if(void 0===r)return!1;try{return r.setItem("test","test"),r.removeItem("test"),!0}catch(e){return!1}})()},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(39))},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e.success,n=e.error,o=e.complete,a=e.abort;delete e.success,delete e.error,delete e.complete,delete e.abort;var i=$.ajax($.extend({type:"post",timeout:1e4,dataType:"json",cache:!1},e));return i.done((function(o,a,i){"object"==typeof o?!0===o.success?"function"==typeof t&&t(o,a,i):("object"==typeof o.error?"string"==typeof o.error.message?Object(r.a)({message:o.error.message,debug:{data:{requestData:e.data,response:o}}}):Object(r.a)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response.error.message` is not available",data:{requestData:e.data,response:o}}}):Object(r.a)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response.error` is not an object",data:{requestData:e.data,response:o}}}),"function"==typeof n&&n(i,a)):(Object(r.a)({message:"er--js-server-error",debug:{message:"Server responce malformed: `response` is not an object",data:{requestData:e.data,response:o}}}),"function"==typeof n&&n(i,a))})),i.fail((function(e,t){if("object"==typeof e&&"number"==typeof e.status&&"string"==typeof t)if(0===e.status){if("abort"===t)return"function"==typeof a&&a(e,t),!1;"timeout"===t?Object(r.a)({message:"er--js-connection-timeout"}):Object(r.a)({message:"er--js-appears-offline"})}else e.status>=400?Object(r.a)({message:"er--js-server-error",debug:{message:"Server responded with HTTP status code "+e.status,data:{jqXHR:e}}}):200===e.status&&"parsererror"===t?Object(r.a)({message:"er--js-server-error",debug:{message:"Server response is not JSON",data:{jqXHR:e}}}):Object(r.a)({message:"er--js-server-error",debug:{message:"Unexpected server response HTTP status code "+e.status,data:{jqXHR:e}}});else Object(r.a)({message:"er--js-server-error",debug:{message:"Server responce malformed: jqXHR is not an object or it does not contain required fields",data:{jqXHR:e}}});"function"==typeof n&&n(e,t)})),i.always((function(){"function"==typeof o&&o(arguments)})),i}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));n(17);var r=n(9);const o={};function a(e,t,n){let a;const i={event:"keydown",target:document,prevent:!1};n=function(e,t){if(e){for(let n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t}(n,i),Array.isArray(e)?(a=[],r.a.mac||(e=e.map(e=>e.replace("Cmd","Ctrl"))),e.forEach(e=>a.push(s(e,t,n)))):(r.a.mac||(e=e.replace("Cmd","Ctrl")),a=s(e,t,n));const l="string"==typeof n.target?document.querySelector(n.target):n.target;Array.isArray(a)?a.forEach((r,a)=>{o[e[a]]||(o[e[a]]=[]),l.addEventListener(n.event,r,!1),o[e[a]].push({event:n.event,elem:l,fn:t,realFn:r})}):(o[e]||(o[e]=[]),l.addEventListener(n.event,a,!1),o[e].push({event:n.event,elem:l,fn:t,realFn:a}))}function i(e,t,n){function r(e){o[e]&&o[e].slice().reverse().forEach((e,r,o)=>{e.fn!==t||n.target&&e.elem!==n.target||(e.elem.removeEventListener(e.event,e.realFn,!1),o.splice(o.length-1-r,1))})}n=n||{},Array.isArray(e)?e.forEach(r):r(e)}function s(e,t,n){var r;return e=(r=e,r.toLowerCase().replace(/\s/g,"")).split("+"),r=>{(function(e,t){const n=function(e){switch(e){case 91:case 93:return"MetaKey";case 188:return",";case 190:return".";case 219:return"[";case 221:return"]";default:return String.fromCharCode(e).toLowerCase()}}(e.keyCode),r={enter:13},o={},a=["shift","ctrl","alt","cmd"];let i=0;a.forEach(e=>{o[e]={wanted:!1,pressed:!1}}),e.shiftKey&&(o.shift.pressed=!0);e.ctrlKey&&(o.ctrl.pressed=!0);e.altKey&&(o.alt.pressed=!0);e.metaKey&&(o.cmd.pressed=!0);for(let s=0;s<t.length;s++){const l=t[s];a.indexOf(l)>-1?(i++,o[l].wanted=!0):(l.length>1&&r[l]===e.keyCode||n===l)&&i++}return t.length===i&&Object.keys(o).reduce((e,t)=>e&&o[t].wanted===o[t].pressed,!0)})(r,e)&&(t(r),n.prevent&&(r.preventDefault(),r.stopPropagation()))}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";t.a=function(e,t,n){if("number"!=typeof t)return;const r=Math.max(Math.min(t,.9),.1);n&&e.attr("class","e2-progress e2-progress_notransition"),e[0].style.strokeDashoffset=Math.floor(245-245*r),n&&e.attr("class","e2-progress")}},function(e,t,n){"use strict";t.a={mac:/Macintosh/.test(navigator.userAgent),iosdevice:/(iPad)|(iPhone)/.test(navigator.userAgent),touchdevice:function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;return function(e){return"function"==typeof window.matchMedia&&window.matchMedia(e).matches}(["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join(""))}()}},function(e,t,n){"use strict";t.a=function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e];return!1}},function(e,t,n){var r=n(12),o=n(27),a=n(23);e.exports=r?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(5);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(14);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(36),o=n(15),a=n(33),i=n(16),s=n(13),l=n(62),c=n(64),u=n(66),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,r){var o=s(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!p&&h||"string"==typeof r&&-1===r.indexOf(g)){var s=n(t,e,this,r);if(s.done)return s.value}var m=o(e),v=String(this),b="function"==typeof r;b||(r=String(r));var y=m.global;if(y){var w=m.unicode;m.lastIndex=0}for(var x=[];;){var C=u(m,v);if(null===C)break;if(x.push(C),!y)break;""===String(C[0])&&(m.lastIndex=l(v,a(m.lastIndex),w))}for(var E,_="",S=0,$=0;$<x.length;$++){C=x[$];for(var j=String(C[0]),O=d(f(i(C.index),v.length),0),T=[],D=1;D<C.length;D++)T.push(void 0===(E=C[D])?E:String(E));var I=C.groups;if(b){var k=[j].concat(T,O,v);void 0!==I&&k.push(I);var P=String(r.apply(void 0,k))}else P=c(j,v,O,T,I,r);O>=S&&(_+=v.slice(S,O)+P,S=O+j.length)}return _+v.slice(S)}]}))},function(e,t,n){var r=n(41),o=n(13);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(3),o=n(11);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(3),o=n(19),a=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=a},function(e,t,n){"use strict";var r,o,a=n(58),i=n(59),s=RegExp.prototype.exec,l=String.prototype.replace,c=s,u=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),d=i.UNSUPPORTED_Y||i.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(u||f||d)&&(c=function(e){var t,n,r,o,i=this,c=d&&i.sticky,p=a.call(i),h=i.source,g=0,m=e;return c&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,g++),n=new RegExp("^(?:"+h+")",p)),f&&(n=new RegExp("^"+h+"$(?!\\s)",p)),u&&(t=i.lastIndex),r=s.call(c?n:i,m),c?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:u&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),f&&r&&r.length>1&&l.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},function(e,t,n){var r=n(12),o=n(40),a=n(23),i=n(18),s=n(25),l=n(7),c=n(26),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=i(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(12),o=n(5),a=n(42);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(12),o=n(26),a=n(15),i=n(25),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=i(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(3),o=n(11),a=n(7),i=n(19),s=n(29),l=n(43),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var l,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||o(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(c?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:o(e,t,n)):f?e[t]=n:i(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t,n){var r=n(20),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(46),o=n(20);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(16),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(5);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(6);const o={type:"inline",parse:function({pattern:e,text:t,start:n,end:r,isConsequent:o}){const{value:a,start:i}=p({text:t,start:n,end:r}),s=f({text:a,start:n-i,end:r-i,pattern:e,isConsequent:o});if(!s)return{isWrapped:!1};const l=s.value.split(s.unwrappedValue);return{...s,isWrapped:!0,realStart:s.start+i,realEnd:s.end+i,prefixLength:l[0].length,suffixLength:l[1].length}},wrap:function({elem:e,start:t,end:n,prefix:r,suffix:o}){const a=h({elem:e,start:t,end:n});l({elem:e,text:`${r}${a.value}${o}`,start:a.start,end:a.end,nextStart:t+r.length,nextEnd:n+r.length})},unwrap:c},a={type:"block",parse:function({text:e,start:t,end:n,pattern:r}){const o=i.filter(e=>"block"===e.type),a=e.split("\n").reduce((e,a)=>{const i=e.lastIndex,s=i+a.length;if(!(i<=t&&s>=t||i>=t&&s<=n||i<=n&&s>=n))return{...e,lastIndex:s+1};const l=o.reduce((e,t)=>{if(e)return e;t.regexp.lastIndex=0;const n=t.regexp.exec(a);if(n){const e=n[0],r=n[1],o=n.index,a=n.index+e.length;return{value:e,wrappedBy:t.name,unwrappedValue:r,prefixLength:e.length-r.length,start:o+i,end:a+i}}},null),c=l||{value:a,start:i,end:s};return r.lastIndex=0,{lines:[...e.lines,c],lastIndex:s+1,isWrapped:e.isWrapped&&r.test(c.value)}},{lines:[],lastIndex:0,isWrapped:!0});return delete a.lastIndex,a},wrap:u,unwrap:d},i=[{...o,name:"bold",keys:"Cmd+B",regexp:/\*\*([^\s]{0,2}|[^\s].*?[^\s])\*\*/g,prefix:"**",suffix:"**"},{...o,name:"italic",keys:"Cmd+I",regexp:/\/\/([^\s]{0,2}|[^\s].*?[^\s])\/\//g,prefix:"//",suffix:"//"},{...o,name:"link",keys:"Cmd+K",regexp:/\(\(\s*(.*?)\s*\)\)/g,prefix:"((",suffix:"))",wrap:function({elem:e,start:t,end:n,prefix:r,suffix:o}){const a=h({elem:e,start:t,end:n});let i,c=a.value;a.value?s.test(a.value)?(c=`${r}${a.value} ${o}`,i=a.end+r.length+1):(c=`${r} ${a.value}${o}`,i=a.start+r.length):(c=`${r} ${o}`,i=t+r.length);l({elem:e,text:c,start:a.start,end:a.end,nextStart:i,nextEnd:i})},unwrap:function({elem:e,start:t,end:n,parsed:r}){const{realStart:o,unwrappedValue:a,prefixLength:i}=r,l=a.split(" "),u=o+i;l.length>1&&s.test(l[0])?(e.selectionStart=u,e.selectionEnd=u+l[0].length):c({elem:e,start:t,end:n,parsed:r})}},{...a,name:"header",keys:"Cmd+Alt+1",regexp:/^[^\S\n]*#[^\S\n]*([^#].*)$/g,prefix:"# "},{...a,name:"subheader",keys:"Cmd+Alt+2",regexp:/^[^\S\n]*##[^\S\n]*([^#].*)$/g,prefix:"## "},{...a,name:"remove headers",keys:"Cmd+Alt+0",regexp:/^[^\S\n]*#{1,2}[^\S\n]*([^#].*)$/g,wrap:d},{...a,name:"increase quote level",keys:"Cmd+]",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",nextPrefix:">",unwrap:u},{...a,name:"decrease quote level",keys:"Cmd+[",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",wrap(){}}],s=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/;function l({elem:e,text:t,start:n,end:r,nextStart:o,nextEnd:a}){e.selectionStart=n,e.selectionEnd=r,document.execCommand("insertText",!1,t),$(e).trigger("input"),e.selectionStart=o,e.selectionEnd=a}function c({elem:e,start:t,end:n,parsed:{realStart:r,realEnd:o,unwrappedValue:a,prefixLength:i,suffixLength:s}}){if(!a.length)return void l({elem:e,text:a,start:r,end:o,nextStart:r,nextEnd:r});let c=t-(r+i),u=n-(o-s);c<0&&(u-=c,c=0),u>0&&(u=0);l({elem:e,text:a,start:r,end:o,nextStart:r+c,nextEnd:r+a.length+u})}function u({elem:e,start:t,end:n,prefix:r,pattern:o,nextPrefix:a,parsed:{lines:i}}){const s=i.reduce((e,t)=>{let n=`${r}${t.value}`;return o.lastIndex=0,o.test(t.value)&&a?n=`${a}${t.value}`:t.unwrappedValue&&(n=`${r}${t.unwrappedValue}`),[...e,n]},[]).join("\n"),c=i[0].start,u=i[i.length-1].end;let d=t-c,f=n-u;f<c-u&&(f+=c-u-f);const p=c,h=c+s.length;l({elem:e,text:s,start:c,end:u,nextStart:p+d+r.length,nextEnd:h+f})}function d({elem:e,start:t,end:n,pattern:r,parsed:{lines:o}}){const a=o.reduce((e,t)=>(r.lastIndex=0,[...e,r.test(t.value)?t.unwrappedValue:t.value]),[]).join("\n"),i=o[0].start,s=o[o.length-1].end,c=i+o[0].prefixLength;let u=t-c,d=n-s;u<0&&(u=0),d<c-s&&(d+=c-s-d);l({elem:e,text:a,start:i,end:s,nextStart:i+u,nextEnd:i+a.length+d})}function f({text:e,start:t,end:n,pattern:r,isConsequent:o}){let a,i=[];for(console.log(e,t,n),r.lastIndex=0;null!==(a=r.exec(e));){console.log(a);const e=a[0],s=a[1],l=a.index,c=a.index+e.length;l<=t&&c>=n&&i.push({value:e,unwrappedValue:s,start:l,end:c}),o&&(r.lastIndex=a.index+1)}return i.length?(i.sort((e,t)=>e.value.length-t.value.length),i[0]):null}function p({text:e,start:t,end:n}){for(t-=1;"\n"!==e[t]&&t>0;)t--;for(0!==t&&t++;"\n"!==e[n]&&n<e.length;)n++;return{value:e.substring(t,n),start:t,end:n}}function h({elem:e,start:t,end:n}){let r=t,o=n,a=e.value.substr(t,n-t);if(t===n){const{value:i,start:s}=p({text:e.value,start:t,end:n}),l=f({text:i,start:t-s,end:n-s,pattern:/[^\s]+/g});l&&(r=l.start+s,o=l.end+s,a=l.value)}return{start:r,end:o,value:a}}var g=function(){let e=this;const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode("::selection { background: transparent; }")),i.forEach(({name:o,keys:a,type:i,regexp:s,parse:l,prefix:c,nextPrefix:u,suffix:d,wrap:f,unwrap:p})=>{Object(r.a)(a,(function(){const a=e.selectionStart,h=e.selectionEnd,g=["Cmd+Z","Ctrl+Z"];if("inline"===i&&-1!==e.value.substring(a,h).indexOf("\n"))return;const m=l({name:o,pattern:s,text:e.value,start:a,end:h,isConsequent:!0});console.log(m),m.isWrapped?p({name:o,pattern:s,elem:e,start:a,end:h,parsed:m,prefix:c,nextPrefix:u,suffix:d}):f({name:o,pattern:s,elem:e,start:a,end:h,parsed:m,prefix:c,nextPrefix:u,suffix:d});function v(){t.appendChild(n),setTimeout((function(){e.selectionStart=a,e.selectionEnd=h,t.removeChild(n)}),10),Object(r.b)(g,v,{target:e})}Object(r.a)(g,v,{target:e}),$(e).on("input",(function(){Object(r.b)(g,v,{target:e})}))}),{target:e,prevent:!0})})}},function(e,t,n){"use strict";n(37);var r=n(28),o=n(5),a=n(60),i=n(21),s=n(11),l=a("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=a("replace"),f=!!/./[d]&&""===/./[d]("a","$0"),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var h=a(e),g=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=g&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!g||!m||"replace"===e&&(!c||!u||f)||"split"===e&&!p){var v=/./[h],b=n(h,""[e],(function(e,t,n,r,o){return t.exec===i?g&&!o?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),y=b[0],w=b[1];r(String.prototype,e,y),r(RegExp.prototype,h,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}d&&s(RegExp.prototype[h],"sham",!0)}},function(e,t,n){"use strict";var r=n(38),o=n(21);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){var r=n(3),o=n(22).f,a=n(11),i=n(28),s=n(19),l=n(47),c=n(57);e.exports=function(e,t){var n,u,d,f,p,h=e.target,g=e.global,m=e.stat;if(n=g?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(u in t){if(f=t[u],d=e.noTargetGet?(p=o(n,u))&&p.value:n[u],!c(g?u:h+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),i(n,u,f,e)}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(5),o=n(24),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(3),o=n(14),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,n){var r,o,a,i=n(44),s=n(3),l=n(14),c=n(11),u=n(7),d=n(20),f=n(45),p=n(32),h=s.WeakMap;if(i){var g=d.state||(d.state=new h),m=g.get,v=g.has,b=g.set;r=function(e,t){return t.facade=e,b.call(g,e,t),t},o=function(e){return m.call(g,e)||{}},a=function(e){return v.call(g,e)}}else{var y=f("state");p[y]=!0,r=function(e,t){return t.facade=e,c(e,y,t),t},o=function(e){return u(e,y)?e[y]:{}},a=function(e){return u(e,y)}}e.exports={set:r,get:o,has:a,enforce:function(e){return a(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(3),o=n(29),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},function(e,t,n){var r=n(30),o=n(31),a=r("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(7),o=n(48),a=n(22),i=n(27);e.exports=function(e,t){for(var n=o(t),s=i.f,l=a.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||s(e,u,l(t,u))}}},function(e,t,n){var r=n(49),o=n(51),a=n(56),i=n(15);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(i(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(50),o=n(3),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(3);e.exports=r},function(e,t,n){var r=n(52),o=n(55).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(7),o=n(18),a=n(53).indexOf,i=n(32);e.exports=function(e,t){var n,s=o(e),l=0,c=[];for(n in s)!r(i,n)&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var r=n(18),o=n(33),a=n(54),i=function(e){return function(t,n,i){var s,l=r(t),c=o(l.length),u=a(i,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},function(e,t,n){var r=n(16),o=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):a(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(5),o=/#|\.prototype\./,a=function(e,t){var n=s[i(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},i=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){"use strict";var r=n(15);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(5);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(3),o=n(30),a=n(7),i=n(31),s=n(34),l=n(61),c=o("wks"),u=r.Symbol,d=l?u:u&&u.withoutSetter||i;e.exports=function(e){return a(c,e)||(s&&a(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,t,n){var r=n(34);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(63).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(16),o=n(13),a=function(e){return function(t,n){var a,i,s=String(o(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?e?s.charAt(l):a:e?s.slice(l,l+2):i-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){var r=n(65),o=Math.floor,a="".replace,i=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,c,u){var d=n+e.length,f=l.length,p=s;return void 0!==c&&(c=r(c),p=i),a.call(u,p,(function(r,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":i=c[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>f){var u=o(s/10);return 0===u?r:u<=f?void 0===l[u-1]?a.charAt(1):l[u-1]+a.charAt(1):r}i=l[s-1]}return void 0===i?"":i}))}},function(e,t,n){var r=n(13);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(24),o=n(21);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},,function(e,t,n){"use strict";n.r(t);var r=n(2);n(17);var o=function(){if(r.a){const e={getItem(e){const t=document.e2.cookiePrefix+e;return r.b.hasOwnProperty(t)?r.b.getItem(t):r.b.getItem(e)},setItem(e,t){const n=document.e2.cookiePrefix+e;r.b.setItem(n,t)},removeItem(e){const t=document.e2.cookiePrefix+e;r.b.removeItem(t),r.b.removeItem(e)},hasOwnProperty(e){const t=document.e2.cookiePrefix+e;return r.b.hasOwnProperty(t)||r.b.hasOwnProperty(e)}};document.e2.localCopies={_lsKey:"copies-info",_lsPrefix:"copy-",_cookieName:document.e2.cookiePrefix+"local_copies",getName(e){return this._lsPrefix+e},save(t,n){e.setItem(this.getName(t),JSON.stringify(n)),this.addToList(t,n)},remove(t){e.removeItem(this.getName(t)),this.removeFromList(t)},get(t,n,r){let o=!1;try{if(o=JSON.parse(e.getItem(this.getName(t))),!o)return!1}catch(e){return!1}return r&&n&&this.isCopyOutdated(o,n,r)?(this.remove(t),!1):o},getList(){try{return JSON.parse(e.getItem(this._lsKey))||{}}catch(e){return{}}},addToList(t,n){const r=this.getList();r.hasOwnProperty(t)||(r[t]={isPublished:n.isPublished,timestamp:n.timestamp},e.setItem(this._lsKey,JSON.stringify(r)),this.updateCookie(r))},removeFromList(t){const n=this.getList();n.hasOwnProperty(t)&&(delete n[t],e.setItem(this._lsKey,JSON.stringify(n)),this.updateCookie(n))},doesCopyExist(t){return e.hasOwnProperty(this.getName(t))},isCopyOutdated(e,t,n){if(!t||!n)return!1;const r=+e.timestamp,o=n-(new Date).getTime();return Math.abs(o)>216e6&&(t-=o),r<=t},checkOutdatedCopies(){const e=document.e2.noteLastModifiedsById||{},t=this.getList();for(let n in t)"new"!==n&&(e.hasOwnProperty(n)?this.isCopyOutdated(t[n],1e3*e[n],1e3*document.e2.serverTime)&&this.remove(n):this.remove(n))},generateCookie(){document.cookie.match(new RegExp("(?:^|; )"+this._cookieName.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"))||this.updateCookie()},updateCookie(e){e=e||this.getList();const t=[];for(let n in e)"new"!==n&&t.push(n);if(t.length)document.cookie=this._cookieName+"="+t.join(",")+";path=/";else{const e=new Date;e.setTime(e.getTime()-1),document.cookie=this._cookieName+'="";path=/;expires='+e.toUTCString()}}},document.e2.localCopies.checkOutdatedCopies(),document.e2.localCopies.generateCookie()}},a=n(10),i=n(4),s=n(8),l=n(1);var c=function(){const e=$(".e2-note");e.length&&r.a&&function(e){for(let t=0;t<e.length;t++){const n=e.eq(t).data("note-id").toString();document.e2.localCopies.doesCopyExist(n)&&$(`.e2-note[data-note-id="${n}"] .js-unsaved-led`).show()}}(e)};var u=function(){const e=$("#form-note");if(!r.a||!e)return;const t=$("#note-id"),n=$("#is-note-published"),o=$("#livesave-button"),a=$("#livesave-button + .js-unsaved-led"),i=$("#title"),s=$("#text"),l=$("#tags"),c=$("#alias"),u=$("#stamp"),d=$("#summary"),f=$("#e2-uploaded-images"),p=1e3*+$("#note-timestamp").val(),h=1e3*+$("#server-time").val(),g=t.val();let m=o.is(":visible"),v=null,b=!1,y=null;function w(){clearInterval(y),x(),window.removeEventListener("pagehide",x),e.off("submit",w),s.off("input",C),b=!1}function x(){window.removeEventListener("beforeunload",E)}function C(){s[0].selectionEnd&&(v=s[0].selectionEnd)}function E(){const e=o.is(":visible");if(e||m){m=e;const r=function(){const e=f.find(".e2-uploaded-image"),r=t.val(),o=i.val(),a=s.val(),p=[];let h;for(let t=0;t<e.length;t++)h=e.eq(t).find("img"),p.push({src:h.attr("src"),alt:h.attr("alt"),width:h.width(),height:h.height()});return{id:r,title:o,text:a,tags:l.val(),images:p,alias:"new"!==g&&c.val(),stamp:u.val(),summary:d.val(),timestamp:(new Date).getTime(),link:window.location.pathname,isPublished:n.val(),caretPosition:v}}();if(!r.images.length&&!r.title.trim()&&!r.text.trim())return void document.e2.localCopies.remove(r.id);document.e2.localCopies.save(r.id,r)}}document.e2.localCopies.loadLocalCopy=function(){const e=document.e2.localCopies.get(t.val(),p,h);if(!e)return;e.caretPosition&&s.one("autosized",(function(){if("function"!=typeof window.getCaretCoordinates)return;const t=window.getCaretCoordinates(s[0],e.caretPosition);window.scrollTo(0,s.position().top+t.top-15)}));document.queryCommandSupported("insertText")?(i.focus().select(),document.execCommand("insertText",!1,e.title),i.trigger("input"),s.addClass("e2-textarea-autosize_off").focus().select(),document.execCommand("insertText",!1,e.text),s.removeClass("e2-textarea-autosize_off").trigger("input")):(i.val(e.title).trigger("input"),s.val(e.text).trigger("input"));const n=e.tags?e.tags.slice():[];n.length&&l.find("option").each((e,t)=>{const r=n.indexOf(t.text);r>-1&&n.splice(r,1)});if(n.length){let e;const t=()=>{if(!l.hasClass("chzn-done"))return void(e=setTimeout(t,500));clearTimeout(e);const r=$("#tags_chzn .search-field input");n.forEach(e=>{r.val(e+","),r.trigger({type:"keyup",which:191})})};e=setTimeout(t,500)}l.val(e.tags).trigger("input"),d.val(e.summary),f.empty().html(e.images.reduce((e,t)=>void 0!==t.src&&t.src?`${e}<div class="e2-uploaded-image"><div class="e2-uploaded-image-inner"><img src="${t.src}" alt="${t.alt}" width="${t.width}" height="${t.height}"></div></div>`:"","")),(e.alias&&c.val()!==e.alias||u.val()!==e.stamp)&&(c.val(e.alias).trigger("change"),u.val(e.stamp).trigger("change"),$(".e2-note-time-and-url").slideToggle());o.show(),a.show(),e.caretPosition&&(s.focus(),s[0].selectionStart=s[0].selectionEnd=v=e.caretPosition)},document.e2.localCopies.initLocalSaver=function t(){if(b)return;e.off("ajaxError",t),y=setInterval(E,3e3),window.addEventListener("beforeunload",E),window.addEventListener("pagehide",x),e.on("submit",w).on("ajaxError",t),s.on("input",C),b=!0},document.e2.localCopies.destroyLocalSaver=w},d=n(6),f=n(9),p=n(0);var h=function(){var e=$("#form-note");if(e.length){var t=e.find("#note-id"),n=e.find("#submit-button"),o=t.val(),a=C(),s=a?Object.assign({},a):C(),c=!1,u=!1,h=!1;$(window).bind("pageshow",(function(e){e.originalEvent.persisted&&window.location.reload()})),document.e2.localCopies.initLocalSaver&&document.e2.localCopies.loadLocalCopy&&(document.e2.localCopies.loadLocalCopy(),document.e2.localCopies.initLocalSaver()),e.on("submit",(function(t){t.preventDefault();var n=C();function r(e){a=n,Object(l.a)($("#note-saving"),0),$("#note-saving").hide(),$("#note-saved").fadeIn(200),window.location.href=e.data["note-url"]}function o(){e.trigger("ajaxError"),Object(l.a)($("#note-saving"),0),$("#note-saving").hide(),$("#submit-keyboard-shortcut").show()}h=!0,b(),$("#submit-keyboard-shortcut").hide(),Object(l.a)($("#note-saving"),1),$("#note-saving").show(),v({onCreated:r,onSaved:r,onError:o,onAjaxError:function(e,t){o()},onAjaxComplete:function(){h=!1,b()}})})),$("#title").on("input",(function(){$("#alias").attr("placeholder","")}));var g="change input keyup keydown keypress mouseup mousedown cut copy paste blur",m=function(){b();var e=C();c=!E(s,e),u=!a||!E(a,e);var t=$("#livesave-button, #livesave-button + .js-unsaved-led");c&&u&&""!==e.text?(c=!1,$("#livesaving").hide(),document.e2.localCopies.initLocalSaver(),t.fadeIn(200),s=Object.assign({},e)):u||(u=!1,x(),t.fadeOut(200),s=Object.assign({},e));var n=e.title.trim(),r=e.text.trim();$("#e2-uploaded-images .e2-uploaded-image").length||n||r||!t.is(":visible")||t.fadeOut(200)};$("#title").add("#tags").add("#text").add("#alias").add("#stamp").on(g,m),$("#tags").on("liszt:ready",(function(){$("#tags_chzn .search-field").on(g,m)})),$("#title").on("keydown",(function(e){13===e.which&&$("#text").focus()})),$("#livesave-button").on("click",(function(){return w(),!1})),f.a.mac?Object(d.a)("Cmd+S",w,{prevent:!0}):Object(d.a)("Ctrl+S",w,{prevent:!0}),$("#text").is(":focus")||$("#title").attr("autofocus",!0).focus().val($("#title").val()),b()}function v(n){n=n||{},Object(i.a)({url:e.find("#e2-note-livesave-action").attr("href"),data:e.serialize(),success:function(e){if(void 0===e.data||void 0===e.data.status)return Object(p.a)({message:"er--js-server-error",debug:{message:"Server response malformed",data:{response:e}}}),!1;"function"==typeof n.onAjaxSuccess&&n.onAjaxSuccess(),"created"===e.data.status?(window.history.replaceState&&(window.history.replaceState(null,"",e.data["note-edit-url"]),$(".e2-admin-menu-new-selected").hide(),$(".e2-admin-menu-new").show()),t.val(e.data.id),x(),"function"==typeof n.onCreated&&n.onCreated(e),o=null):"saved"===e.data.status&&($("#alias").val(e.data["new-alias"]),window.history.replaceState&&window.history.replaceState(null,"",e.data["note-edit-url"]),x(),"function"==typeof n.onSaved&&n.onSaved(e),o=null)},error:n.onAjaxError,complete:n.onAjaxComplete})}function b(){var e=!/^ *$/.test($("#title").val())&&!/^ *$/.test($("#text").val())&&!h;n.prop("disabled",!e),n.hide().show(0)}function y(){Object(l.a)($("#livesaving"),0),$("#livesaving").hide(),$("#livesave-button, #livesave-button + .js-unsaved-led").show()}function w(){if(!h){var e=C();if(""!==e.text){if(h=!0,b(),""===e.title){var t,n=e.text;(t=n.indexOf("."))>=0&&(n=n.substr(0,t)),(t=n.indexOf(";"))>=0&&(n=n.substr(0,t)),(t=n.indexOf(","))>=0&&(n=n.substr(0,t)),(t=n.indexOf(")"))>=0&&(n=n.substr(0,t)),0===n.indexOf("((")&&(n=n.substr(2)),n=n.substr(0,1).toUpperCase()+n.substr(1),$("#title").val(n).change()}$("#livesave-button, #livesave-button + .js-unsaved-led").hide(),$("#livesaving").fadeIn(200),Object(l.a)($("#livesaving"),1),v({onCreated:function(){a=e,$("#e2-drafts")&&$("#e2-drafts-item")&&($("#e2-drafts-item").fadeIn(200),$('<div class="e2-admin-menu-item-frame"></div>').css({position:"absolute",left:$("#e2-note-form-wrapper").offset().left,top:$("#e2-note-form-wrapper").offset().top,width:$("#e2-note-form-wrapper").width(),height:$("#e2-note-form-wrapper").height()}).appendTo("body").animate({left:$("#e2-drafts").offset().left-10,top:$("#e2-drafts").offset().top-5,width:$("#e2-drafts").width()+20,height:$("#e2-drafts").height()+10},667).fadeTo(200,.667).fadeOut(200),$("#e2-drafts-count").html(1*$("#e2-drafts-count").html()+1))},onSaved:function(){a=e},onError:y,onAjaxSuccess:function(){Object(l.a)($("#livesaving"),0),$("#livesaving").fadeOut(200)},onAjaxError:function(e,t){y()},onAjaxComplete:function(){h=!1,b()}})}}}function x(){r.a&&(o?document.e2.localCopies.remove(o):document.e2.localCopies.remove(t.val()),document.e2.localCopies.destroyLocalSaver())}function C(){return{title:$("#title").val(),tags:($("#tags").val()||[]).join(),text:$("#text").val(),alias:$("#alias").val(),stamp:$("#stamp").val()}}function E(e,t){return JSON.stringify(e)===JSON.stringify(t)}};var g=function(){$("#form-note-publish").length&&($(".e2-schedule-controls-revealer").on("click",(function(){if($(".e2-publish-now-controls").hide(),$(".e2-schedule-controls").show(),$(".e2-post-time-control").slideDown(200,(function(){$(".e2-schedule-controls button").prop("disabled",!1)})),""===$("#stamp").val()){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var n=e.getMonth()+1;n<10&&(n="0"+n);var r=e.getFullYear(),o=e.getHours();o+=1,59===e.getMinutes()&&(o+=1),o<10&&(o="0"+o),$("#stamp").val(t+"."+n+"."+r+" "+o+":00:00"),$("#stamp").trigger("change")}return!1})),$(".e2-schedule-controls-unrevealer").on("click",(function(){return $(".e2-schedule-controls").hide(),$(".e2-schedule-controls button").prop("disabled",!0),$(".e2-post-time-control").slideUp(200),$(".e2-publish-now-controls").show(),!1})))};n(35);var m=function(){$("#form-preferences").length&&($("#blog-title").on("input blur cut copy paste keypress",(function(){var e=$("#e2-blog-title"),t=$("#e2-blog-title-default").val();e.length&&e.text(this.value?this.value:t)})),$("#blog-author").on("input blur cut copy paste keypress",(function(){var e=$("#e2-blog-author"),t=$("#e2-blog-author-default").val();e.length&&e.text(this.value?this.value:t)})),$("#notes-per-page").on("change blur focusout",(function(){parseInt(this.value)!=parseInt(this.value)&&(this.value=10),this.value=Math.min(Math.max(this.value,3),100)})),$("#email-notify").on("change",(function(){$(this).is(":checked")&&$("#email").focus()})),$("#show-main-menu").on("change",(function(){$(this).is(":checked")?$("#main-menu-items").slideDown(200):$("#main-menu-items").slideUp(200)})),$(".e2-template-preview-link").addClass("e2-template-preview-link_visible"),$("#e2-template-selector").addClass("e2-template-selector_interactive").find(".e2-template-preview__input").on("change",(function(){var e=$(this),t=e.parents(".e2-template-preview");$(".e2-template-preview_current").removeClass("e2-template-preview_current"),t.addClass("e2-template-preview_current"),$(".e2-template-preview-link").attr("href",e.data("preview-url")),e.data("supports-dark-mode")?$("#respond-to-dark-mode").parents(".form-element").eq(0).slideDown(200):$("#respond-to-dark-mode").parents(".form-element").eq(0).slideUp(200)})))};var v=function(){var e=$("#form-tag");if(e.length){var t=e.find("#submit-button");$("#tag").on("keydown",(function(e){13===e.which&&$("#urlname").focus()})),$("#urlname").on("keydown",(function(e){13===e.which&&$("#page-title").focus()})),$("#page-title").on("keydown",(function(e){13===e.which&&$("#text").focus()})),$(".required").bind("input blur cut copy paste keypress",n),n()}function n(){/^(\.|\s)*$/.test($("#tag").val())||/^ *$/.test($("#urlname").val())?(t.prop("disabled",!0),t.hide().show(0)):(t.prop("disabled",!1),t.hide().show(0))}};var b=function(e){if(window.FormData){var t=new window.FormData;t.append("file",e.file),Object(i.a)({url:e.url,data:t,timeout:0,contentType:!1,processData:!1,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&"function"==typeof e.progress&&t.upload.addEventListener("progress",e.progress,!1),t},success:e.success,error:e.error})}else Object(p.a)({message:"er--js-file-upload-not-supported"})};var y=function(e,t){var n="",r=e.lastIndexOf(".");return-1!==r&&(n=e.substr(r+1)),t.test(n)};var w=function(e){var t="";if("neasden"===$("#formatter-id").val()&&(t=e+""),t){var n=document.getElementById("text");if(n.focus(),n.selectionStart||"0"===n.selectionStart){var r=n.selectionStart,o=n.selectionEnd,a=t;if(r===o){for(;"\r"!==n.value.charAt(r)&&"\n"!==n.value.charAt(r)&&r>0;)r-=1;for(;"\r"===n.value.charAt(r)||"\n"===n.value.charAt(r);)r+=1;a+="\n\n",o=r}n.value=n.value.substring(0,r)+a+n.value.substring(o,n.value.length),n.selectionStart=n.selectionEnd=r+a.length-2}else n.value+="\r\n\r\n"+t;if("createEvent"in document){var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),n.dispatchEvent(i)}else n.fireEvent("onchange");n.focus()}};var x=function(e){var t=$("#e2-file-remove-action").attr("href");if(-1==t.indexOf("?go=")?t+="?":t+="&",$("#form-note").length)t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag").length)return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return Object(i.a)({url:t,data:{file:e.file},success:e.success,error:e.error,complete:e.complete,abort:e.abort})};var C=function(e){var t=$("#e2-file-rename-action").attr("href");if(-1==t.indexOf("?go=")?t+="?":t+="&",$("#form-note").length)t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag").length)return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return Object(i.a)({url:t,data:{file:e.file,"new-name":e.newName},success:e.success,error:e.error,complete:e.complete,abort:e.abort})};var E=function(){if($("#form-tag").length||$("#form-note").length){$(".e2-upload-controls-attach").length>0&&$(document.body).addClass("e2-external-drop-target e2-external-drop-target-body e2-external-drop-target-altable");var e,t=Object(a.a)(),n=[],r=[],o=0,i=0,c=$(".e2-uploaded-images"),u=c.find(".e2-uploaded-image"),d=$(".e2-upload-controls"),f=d.find(".e2-upload-controls-attach"),h=f.find(".e2-upload-controls-attach-input"),g=d.find(".e2-upload-controls-uploading");c.on("click",'[data-e2-js-action*="rename-image"]',(function(e){var t=$(e.currentTarget).parents(".e2-uploaded-image"),n=t.find("#e2-spinner-renaming"),o=t.data("file"),a=prompt("",o);return null===a||""===(a=a.trim())||o===a||(n.fadeIn(200),Object(l.a)(n,1),C({file:o,newName:a,success:function(e){var n=e.data["new-name"];t.find(".e2-image-popup-menu-filename").text(n).attr("title",n),t.data("file",n);var a=r.indexOf(o);-1!==a&&(r[a]=n);var i=document.getElementById("text").value;const s=new RegExp("^"+o+"\\b","gm");i=i.replace(s,n),document.getElementById("text").value=i,document.getElementById("text").dispatchEvent(new Event("input"))},complete:function(){Object(l.a)(n,0),n.hide()}})),!1})).on("click",'[data-e2-js-action*="remove-image"]',(function(e){var n=$(e.currentTarget).parents(".e2-uploaded-image"),o=n.data("file");return n.addClass("e2-uploaded-image_deleting"),x({file:o,success:function(){r.splice($.inArray(o,r),1),t?(n.off(t+".e2DeleteFile").on(t+".e2DeleteFile",(function(){n.remove()})),n.addClass("e2-uploaded-image_deleted")):n.remove()},error:function(){n.removeClass("e2-uploaded-image_deleting")}}),!1})).on("click",'[data-e2-js-action*="paste-image"]',(function(e){var t=$(e.currentTarget);return w(t.parents(".e2-uploaded-image").data("file")),!1})),u.length&&c.html((e=[],u.each((function(){var t,n,r,o,a,i=$(this),s=i.find("img"),l=i.find(".e2-uploaded-image-noimage");s.length?(t=s.attr("src"),n=s.data("filename"),r=s.data("filesize"),o=s.attr("width"),a=s.attr("height")):(t=l.data("src"),n=l.data("filename")),e.push(m(t,n,r,o,a))})),e)),d.removeClass("e2-upload-controls_hidden"),h.on("change",(function(e){if(!e.target.files.length)return!1;n.length=0;for(var t=0;t<e.target.files.length;t++)n.push(e.target.files[t]),i+=e.target.files[t].size;return v(),!1})),$(".e2-external-drop-target-body, .e2-external-drop-target-textarea").on("drop",(function(e){var t=e.originalEvent.dataTransfer;if(t&&t.files){var r="text"===$(e.target).attr("id");n.length=0;for(var o=0;o<t.files.length;o++)t.files[o].e2AltKeyPressed=e.altKey,t.files[o].e2DroppedIntoTextarea=r,n.push(t.files[o]),i+=t.files[o].size;return v(),!1}})).on("paste",(function(e){const t=(e.clipboardData||e.originalEvent.clipboardData).files||[];if(t.length){n.length=0;for(let e=0;e<t.length;e++){var r=t[e],o=new Date;r.lastModified===o.getTime()&&"image.png"===r.name&&(r=new File([t[e]],d.data("e2FilenamePrefix")+".png",{lastModified:t[e].lastModified,size:t[e].size,type:t[e].type,webkitRelativePath:t[e].webkitRelativePath})),r.e2DroppedIntoTextarea=!0,n.push(r),i+=r.size}return v(),!1}}))}function m(e,t,n,o,a){var i=$("#e2-uploaded-image-prototype").clone(!0),s=i.find(".e2-uploaded-image-inner_good"),l=s.find("img"),c=i.find(".e2-uploaded-image-inner_bad"),u=c.find(".e2-uploaded-image-noimage"),d=i.find(".e2-popup-menu");return i.removeAttr("id").attr("style","").data("file",t).css("width",""),d.find(".e2-image-popup-menu-filename").text(t).attr("title",t),o&&a?(c.remove(),l.attr("src",e+"?"+(new Date).getTime()).attr("width",o).attr("height",a),d.find(".e2-image-popup-menu-filesize").text(n)):(i.addClass("e2-uploaded-image_broken"),s.remove(),u.attr("data-src",e),d.find(".e2-popup-menu-widget-item").filter(":not(.e2-popup-menu-widget-item_info):not(.e2-popup-menu-widget-item_remove)").addClass("e2-popup-menu-widget-item_disabled")),$(document).trigger("E2_ADMIN_ITEM_WITH_POPUP_MENU_INIT",{$popupMenu:d}),-1===$.inArray(t,r)&&r.push(t),i}function v(){if(n.length){var e=g.find("circle.e2-progress"),t=n.shift(),a=$("#e2-file-upload-action").attr("href");return-1==a.indexOf("?go=")?a+="?":a+="&",y(t.name,/^(gif|jpe?g|png|webp|svg|mp3|mp4|mov)$/i)?(void 0!==$("#note-id").val()?a+="entity=note&entity-id="+$("#note-id").val():void 0!==$("#tag-id").val()?a+="entity=tag&entity-id="+$("#tag-id").val():a=null,a&&t.e2AltKeyPressed&&(a+="&overwrite"),console.log(a),Object(l.a)(g,1),g.removeClass("e2-upload-controls-uploading_hidden"),f.addClass("e2-upload-controls-attach_hidden"),b({file:t,url:a,progress:function(t){t.lengthComputable&&Object(s.a)(e,(o+t.loaded)/i)},success:function(e){o+=t.size;var a=$('#e2-uploaded-images img[src="'+e.data.thumb+'"], #e2-uploaded-images img[src^="'+e.data.thumb+'?"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src="'+e.data.thumb+'"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src^="'+e.data.thumb+'?"]'),i=a.parents(".e2-uploaded-image");e.data.overwrite?(n.length||(Object(l.a)(g,0),g.addClass("e2-upload-controls-uploading_hidden"),f.removeClass("e2-upload-controls-attach_hidden")),a.length&&(m(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).insertAfter(i),i.remove())):(t.e2DroppedIntoTextarea&&w(e.data["new-name"]),-1!==$.inArray(e.data["new-name"],r)?(n.length||(Object(l.a)(g,0),g.addClass("e2-upload-controls-uploading_hidden"),f.removeClass("e2-upload-controls-attach_hidden")),a.length&&(m(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).insertAfter(i),i.remove())):m(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).appendTo(c).show(200,(function(){n.length||(Object(l.a)(g,0),g.addClass("e2-upload-controls-uploading_hidden"),f.removeClass("e2-upload-controls-attach_hidden"))})));v()},error:function(){n.length||(Object(l.a)(g,0),g.addClass("e2-upload-controls-uploading_hidden"),f.removeClass("e2-upload-controls-attach_hidden")),v()},complete:function(){Object(s.a)(e,0)}}),!1):(Object(p.a)({message:"er--unsupported-file",debug:{data:{file:t}}}),!1)}return i=0,o=0,!0}};
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var I=D(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),k=D(/Edge/i),P=D(/firefox/i),A=D(/safari/i)&&!D(/chrome/i)&&!D(/android/i),N=D(/iP(ad|od|hone)/i),M=D(/chrome/i)&&D(/android/i),L={capture:!1,passive:!1};function R(e,t,n){e.addEventListener(t,n,!I&&L)}function F(e,t,n){e.removeEventListener(t,n,!I&&L)}function X(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function z(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function B(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&X(e,t):X(e,t))||r&&e===n)return e;if(e===n)break}while(e=z(e))}return null}var U,Y=/\s+/g;function H(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Y," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Y," ")}}function q(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function W(e,t){var n="";if("string"==typeof e)n=e;else do{var r=q(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function K(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,a=r.length;if(n)for(;o<a;o++)n(r[o],o);return r}return[]}function V(){var e=document.scrollingElement;return e||document.documentElement}function G(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var a,i,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==V()?(i=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!I))do{if(o&&o.getBoundingClientRect&&("none"!==q(o,"transform")||n&&"static"!==q(o,"position"))){var f=o.getBoundingClientRect();i-=f.top+parseInt(q(o,"border-top-width")),s-=f.left+parseInt(q(o,"border-left-width")),l=i+a.height,c=s+a.width;break}}while(o=o.parentNode);if(r&&e!==window){var p=W(o||e),h=p&&p.a,g=p&&p.d;p&&(l=(i/=g)+(u/=g),c=(s/=h)+(d/=h))}return{top:i,left:s,bottom:l,right:c,width:d,height:u}}}function J(e,t,n){for(var r=ne(e,!0),o=G(e)[t];r;){var a=G(r)[n];if(!("top"===n||"left"===n?o>=a:o<=a))return r;if(r===V())break;r=ne(r,!1)}return!1}function Z(e,t,n){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==at.ghost&&a[o]!==at.dragged&&B(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function Q(e,t){for(var n=e.lastElementChild;n&&(n===at.ghost||"none"===q(n,"display")||t&&!X(n,t));)n=n.previousElementSibling;return n||null}function ee(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===at.clone||t&&!X(e,t)||n++;return n}function te(e){var t=0,n=0,r=V();if(e)do{var o=W(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function ne(e,t){if(!e||!e.getBoundingClientRect)return V();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=q(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return V();if(r||t)return n;r=!0}}}while(n=n.parentNode);return V()}function re(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function oe(e,t){return function(){if(!U){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),U=setTimeout((function(){U=void 0}),t)}}}function ae(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ie(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var se="Sortable"+(new Date).getTime();function le(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==q(e,"display")&&e!==at.ghost){t.push({target:e,rect:G(e)});var n=O({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=W(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,a=0;t.forEach((function(e){var t=0,n=e.target,i=n.fromRect,s=G(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=W(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&re(l,s)&&!re(i,s)&&(u.top-s.top)/(u.left-s.left)==(i.top-s.top)/(i.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,r.options)),re(s,i)||(n.prevFromRect=i,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){q(e,"transition",""),q(e,"transform","");var o=W(this.el),a=o&&o.a,i=o&&o.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(i||1);e.animatingX=!!s,e.animatingY=!!l,q(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),q(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),q(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){q(e,"transition",""),q(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var ce=[],ue={initializeByDefault:!0},de={mount:function(e){for(var t in ue)ue.hasOwnProperty(t)&&!(t in e)&&(e[t]=ue[t]);ce.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ce.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";ce.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](O({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](O({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in ce.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,j(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return ce.forEach((function(r){"function"==typeof r.eventProperties&&j(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return ce.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};function fe(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,a=e.cloneEl,i=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[se]){var g,m=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||I||k?(g=document.createEvent("Event")).initEvent(r,!0,!0):g=new CustomEvent(r,{bubbles:!0,cancelable:!0}),g.to=i||n,g.from=s||n,g.item=o||n,g.clone=a,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var b=O({},h,de.getEventProperties(r,t));for(var y in b)g[y]=b[y];n&&n.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=T(n,["evt"]);de.pluginEvent.bind(at)(e,t,O({dragEl:ge,parentEl:me,ghostEl:ve,rootEl:be,nextEl:ye,lastDownEl:we,cloneEl:xe,cloneHidden:Ce,dragStarted:Ne,putSortable:Oe,activeSortable:at.active,originalEvent:r,oldIndex:Ee,oldDraggableIndex:Se,newIndex:_e,newDraggableIndex:$e,hideGhostForTarget:tt,unhideGhostForTarget:nt,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(e){he({sortable:t,name:e,originalEvent:r})}},o))};function he(e){fe(O({putSortable:Oe,cloneEl:xe,targetEl:ge,rootEl:be,oldIndex:Ee,oldDraggableIndex:Se,newIndex:_e,newDraggableIndex:$e},e))}var ge,me,ve,be,ye,we,xe,Ce,Ee,_e,Se,$e,je,Oe,Te,De,Ie,ke,Pe,Ae,Ne,Me,Le,Re,Fe,Xe=!1,ze=!1,Be=[],Ue=!1,Ye=!1,He=[],qe=!1,We=[],Ke="undefined"!=typeof document,Ve=N,Ge=k||I?"cssFloat":"float",Je=Ke&&!M&&!N&&"draggable"in document.createElement("div"),Ze=function(){if(Ke){if(I)return!1;document.createElement("x")}}(),Qe=function(e,t){var n=q(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Z(e,0,t),a=Z(e,1,t),i=o&&q(o),s=a&&q(a),l=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+G(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+G(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||l>=r&&"none"===n[Ge]||a&&"none"===n[Ge]&&l+c>r)?"vertical":"horizontal"},et=function(e){function t(e,n){return function(r,o,a,i){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,a,i),n)(r,o,a,i);var l=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==_(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},tt=function(){!Ze&&ve&&q(ve,"display","none")},nt=function(){!Ze&&ve&&q(ve,"display","")};Ke&&document.addEventListener("click",(function(e){if(ze)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ze=!1,!1}),!0);var rt=function(e){if(ge){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,a=e.clientY,Be.some((function(e){if(!Q(e)){var t=G(e),n=e[se].options.emptyInsertThreshold,r=o>=t.left-n&&o<=t.right+n,s=a>=t.top-n&&a<=t.bottom+n;return n&&r&&s?i=e:void 0}})),i);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[se]._onDragOver(n)}}var o,a,i},ot=function(e){ge&&ge.parentNode[se]._isOutsideThisEl(e.target)};function at(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=j({},t),e[se]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==at.supportPointer&&"PointerEvent"in window&&!A,emptyInsertThreshold:5};for(var r in de.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in et(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Je,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?R(e,"pointerdown",this._onTapStart):(R(e,"mousedown",this._onTapStart),R(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(R(e,"dragover",this),R(e,"dragenter",this)),Be.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),j(this,le())}function it(e,t,n,r,o,a,i,s){var l,c,u=e[se],d=u.options.onMove;return!window.CustomEvent||I||k?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=a||G(t),l.willInsertAfter=s,l.originalEvent=i,e.dispatchEvent(l),d&&(c=d.call(u,l,i)),c}function st(e){e.draggable=!1}function lt(){qe=!1}function ct(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function ut(e){return setTimeout(e,0)}function dt(e){return clearTimeout(e)}at.prototype={constructor:at,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Me=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,ge):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,a=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(i||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){We.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&We.push(r)}}(n),!ge&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!A||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=B(s,r.draggable,n,!1))&&s.animated||we===s)){if(Ee=ee(s),Se=ee(s,r.draggable),"function"==typeof c){if(c.call(this,e,s,this))return he({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),pe("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=B(l,r.trim(),n,!1))return he({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),pe("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());r.handle&&!B(l,r.handle,n,!1)||this._prepareDragStart(e,i,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,a=o.el,i=o.options,s=a.ownerDocument;if(n&&!ge&&n.parentNode===a){var l=G(n);if(be=a,me=(ge=n).parentNode,ye=ge.nextSibling,we=n,je=i.group,at.dragged=ge,Te={target:ge,clientX:(t||e).clientX,clientY:(t||e).clientY},Pe=Te.clientX-l.left,Ae=Te.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ge.style["will-change"]="all",r=function(){pe("delayEnded",o,{evt:e}),at.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!P&&o.nativeDraggable&&(ge.draggable=!0),o._triggerDragStart(e,t),he({sortable:o,name:"choose",originalEvent:e}),H(ge,i.chosenClass,!0))},i.ignore.split(",").forEach((function(e){K(ge,e.trim(),st)})),R(s,"dragover",rt),R(s,"mousemove",rt),R(s,"touchmove",rt),R(s,"mouseup",o._onDrop),R(s,"touchend",o._onDrop),R(s,"touchcancel",o._onDrop),P&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ge.draggable=!0),pe("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(k||I))r();else{if(at.eventCanceled)return void this._onDrop();R(s,"mouseup",o._disableDelayedDrag),R(s,"touchend",o._disableDelayedDrag),R(s,"touchcancel",o._disableDelayedDrag),R(s,"mousemove",o._delayedDragTouchMoveHandler),R(s,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&R(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ge&&st(ge),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?R(document,"pointermove",this._onTouchMove):R(document,t?"touchmove":"mousemove",this._onTouchMove):(R(ge,"dragend",this),R(be,"dragstart",this._onDragStart));try{document.selection?ut((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Xe=!1,be&&ge){pe("dragStarted",this,{evt:t}),this.nativeDraggable&&R(document,"dragover",ot);var n=this.options;!e&&H(ge,n.dragClass,!1),H(ge,n.ghostClass,!0),at.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,tt();for(var e=document.elementFromPoint(De.clientX,De.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY))!==t;)t=e;if(ge.parentNode[se]._isOutsideThisEl(e),t)do{if(t[se]){if(t[se]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);nt()}},_onTouchMove:function(e){if(Te){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=ve&&W(ve,!0),i=ve&&a&&a.a,s=ve&&a&&a.d,l=Ve&&Fe&&te(Fe),c=(o.clientX-Te.clientX+r.x)/(i||1)+(l?l[0]-He[0]:0)/(i||1),u=(o.clientY-Te.clientY+r.y)/(s||1)+(l?l[1]-He[1]:0)/(s||1);if(!at.active&&!Xe){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ve){a?(a.e+=c-(Ie||0),a.f+=u-(ke||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");q(ve,"webkitTransform",d),q(ve,"mozTransform",d),q(ve,"msTransform",d),q(ve,"transform",d),Ie=c,ke=u,De=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ve){var e=this.options.fallbackOnBody?document.body:be,t=G(ge,!0,Ve,!0,e),n=this.options;if(Ve){for(Fe=e;"static"===q(Fe,"position")&&"none"===q(Fe,"transform")&&Fe!==document;)Fe=Fe.parentNode;Fe!==document.body&&Fe!==document.documentElement?(Fe===document&&(Fe=V()),t.top+=Fe.scrollTop,t.left+=Fe.scrollLeft):Fe=V(),He=te(Fe)}H(ve=ge.cloneNode(!0),n.ghostClass,!1),H(ve,n.fallbackClass,!0),H(ve,n.dragClass,!0),q(ve,"transition",""),q(ve,"transform",""),q(ve,"box-sizing","border-box"),q(ve,"margin",0),q(ve,"top",t.top),q(ve,"left",t.left),q(ve,"width",t.width),q(ve,"height",t.height),q(ve,"opacity","0.8"),q(ve,"position",Ve?"absolute":"fixed"),q(ve,"zIndex","100000"),q(ve,"pointerEvents","none"),at.ghost=ve,e.appendChild(ve),q(ve,"transform-origin",Pe/parseInt(ve.style.width)*100+"% "+Ae/parseInt(ve.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;pe("dragStart",this,{evt:e}),at.eventCanceled?this._onDrop():(pe("setupClone",this),at.eventCanceled||((xe=ie(ge)).draggable=!1,xe.style["will-change"]="",this._hideClone(),H(xe,this.options.chosenClass,!1),at.clone=xe),n.cloneId=ut((function(){pe("clone",n),at.eventCanceled||(n.options.removeCloneOnHide||be.insertBefore(xe,ge),n._hideClone(),he({sortable:n,name:"clone"}))})),!t&&H(ge,o.dragClass,!0),t?(ze=!0,n._loopId=setInterval(n._emulateDragOver,50)):(F(document,"mouseup",n._onDrop),F(document,"touchend",n._onDrop),F(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,ge)),R(document,"drop",n),q(ge,"transform","translateZ(0)")),Xe=!0,n._dragStartId=ut(n._dragStarted.bind(n,t,e)),R(document,"selectstart",n),Ne=!0,A&&q(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,a=this.el,i=e.target,s=this.options,l=s.group,c=at.active,u=je===l,d=s.sort,f=Oe||c,p=this,h=!1;if(!qe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=B(i,s.draggable,a,!0),T("dragOver"),at.eventCanceled)return h;if(ge.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return I(!1);if(ze=!1,c&&!s.disabled&&(u?d||(r=!be.contains(ge)):Oe===this||(this.lastPutMode=je.checkPull(this,c,ge,e))&&l.checkPut(this,c,ge,e))){if(o="vertical"===this._getDirection(e,i),t=G(ge),T("dragOverValid"),at.eventCanceled)return h;if(r)return me=be,D(),this._hideClone(),T("revert"),at.eventCanceled||(ye?be.insertBefore(ge,ye):be.appendChild(ge)),I(!0);var g=Q(a,s.draggable);if(!g||function(e,t,n){var r=G(Q(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,o,this)&&!g.animated){if(g===ge)return I(!1);if(g&&a===e.target&&(i=g),i&&(n=G(i)),!1!==it(be,a,ge,t,i,n,e,!!i))return D(),a.appendChild(ge),me=a,k(),I(!0)}else if(i.parentNode===a){n=G(i);var m,v,b,y=ge.parentNode!==a,w=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,i=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===i||o===s||r+a/2===i+l/2}(ge.animated&&ge.toRect||t,i.animated&&i.toRect||n,o),x=o?"top":"left",C=J(i,"top","top")||J(ge,"top","top"),E=C?C.scrollTop:void 0;if(Me!==i&&(v=n[x],Ue=!1,Ye=!w&&s.invertSwap||y),0!==(m=function(e,t,n,r,o,a,i,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!i)if(s&&Re<c*o){if(!Ue&&(1===Le?l>u+c*a/2:l<d-c*a/2)&&(Ue=!0),Ue)f=!0;else if(1===Le?l<u+Re:l>d-Re)return-Le}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(e){return ee(ge)<ee(e)?1:-1}(t);if((f=f||i)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,i,n,o,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ye,Me===i))){var _=ee(ge);do{_-=m,b=me.children[_]}while(b&&("none"===q(b,"display")||b===ve))}if(0===m||b===i)return I(!1);Me=i,Le=m;var S=i.nextElementSibling,$=!1,j=it(be,a,ge,t,i,n,e,$=1===m);if(!1!==j)return 1!==j&&-1!==j||($=1===j),qe=!0,setTimeout(lt,30),D(),$&&!S?a.appendChild(ge):i.parentNode.insertBefore(ge,$?S:i),C&&ae(C,0,E-C.scrollTop),me=ge.parentNode,void 0===v||Ye||(Re=Math.abs(v-G(i)[x])),k(),I(!0)}if(a.contains(ge))return I(!1)}return!1}function T(s,l){pe(s,p,O({evt:e,isOwner:u,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:i,completed:I,onMove:function(n,r){return it(be,a,ge,t,n,G(n),e,r)},changed:k},l))}function D(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function I(t){return T("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==f&&(H(ge,Oe?Oe.options.ghostClass:c.options.ghostClass,!1),H(ge,s.ghostClass,!0)),Oe!==p&&p!==at.active?Oe=p:p===at.active&&Oe&&(Oe=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===ge&&!ge.animated||i===a&&!i.animated)&&(Me=null),s.dragoverBubble||e.rootEl||i===document||(ge.parentNode[se]._isOutsideThisEl(e.target),!t&&rt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function k(){_e=ee(ge),$e=ee(ge,s.draggable),he({sortable:p,name:"change",toEl:a,newIndex:_e,newDraggableIndex:$e,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",rt),F(document,"mousemove",rt),F(document,"touchmove",rt)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;_e=ee(ge),$e=ee(ge,n.draggable),pe("drop",this,{evt:e}),me=ge&&ge.parentNode,_e=ee(ge),$e=ee(ge,n.draggable),at.eventCanceled||(Xe=!1,Ye=!1,Ue=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),dt(this.cloneId),dt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),A&&q(document.body,"user-select",""),q(ge,"transform",""),e&&(Ne&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ve&&ve.parentNode&&ve.parentNode.removeChild(ve),(be===me||Oe&&"clone"!==Oe.lastPutMode)&&xe&&xe.parentNode&&xe.parentNode.removeChild(xe),ge&&(this.nativeDraggable&&F(ge,"dragend",this),st(ge),ge.style["will-change"]="",Ne&&!Xe&&H(ge,Oe?Oe.options.ghostClass:this.options.ghostClass,!1),H(ge,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:me,newIndex:null,newDraggableIndex:null,originalEvent:e}),be!==me?(_e>=0&&(he({rootEl:me,name:"add",toEl:me,fromEl:be,originalEvent:e}),he({sortable:this,name:"remove",toEl:me,originalEvent:e}),he({rootEl:me,name:"sort",toEl:me,fromEl:be,originalEvent:e}),he({sortable:this,name:"sort",toEl:me,originalEvent:e})),Oe&&Oe.save()):_e!==Ee&&_e>=0&&(he({sortable:this,name:"update",toEl:me,originalEvent:e}),he({sortable:this,name:"sort",toEl:me,originalEvent:e})),at.active&&(null!=_e&&-1!==_e||(_e=Ee,$e=Se),he({sortable:this,name:"end",toEl:me,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pe("nulling",this),be=ge=me=ve=ye=xe=we=Ce=Te=De=Ne=_e=$e=Ee=Se=Me=Le=Oe=je=at.dragged=at.ghost=at.clone=at.active=null,We.forEach((function(e){e.checked=!0})),We.length=Ie=ke=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ge&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)B(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||ct(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var o=r.children[t];B(o,this.options.draggable,r,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return B(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=de.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&et(n)},destroy:function(){pe("destroy",this);var e=this.el;e[se]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Be.splice(Be.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(pe("hideClone",this),at.eventCanceled)return;q(xe,"display","none"),this.options.removeCloneOnHide&&xe.parentNode&&xe.parentNode.removeChild(xe),Ce=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ce){if(pe("showClone",this),at.eventCanceled)return;ge.parentNode!=be||this.options.group.revertClone?ye?be.insertBefore(xe,ye):be.appendChild(xe):be.insertBefore(xe,ge),this.options.group.revertClone&&this.animate(ge,xe),q(xe,"display",""),Ce=!1}}else this._hideClone()}},Ke&&R(document,"touchmove",(function(e){(at.active||Xe)&&e.cancelable&&e.preventDefault()})),at.utils={on:R,off:F,css:q,find:K,is:function(e,t){return!!B(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:oe,closest:B,toggleClass:H,clone:ie,index:ee,nextTick:ut,cancelNextTick:dt,detectDirection:Qe,getChild:Z},at.get=function(e){return e[se]},at.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(at.utils=O({},at.utils,e.utils)),de.mount(e)}))},at.create=function(e,t){return new at(e,t)},at.version="1.13.0";var ft,pt,ht,gt,mt,vt,bt=[],yt=!1;function wt(){bt.forEach((function(e){clearInterval(e.pid)})),bt=[]}function xt(){clearInterval(vt)}var Ct=oe((function(e,t,n,r){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=V(),u=!1;pt!==n&&(pt=n,wt(),ft=t.scroll,o=t.scrollFn,!0===ft&&(ft=ne(n,!0)));var d=0,f=ft;do{var p=f,h=G(p),g=h.top,m=h.bottom,v=h.left,b=h.right,y=h.width,w=h.height,x=void 0,C=void 0,E=p.scrollWidth,_=p.scrollHeight,S=q(p),$=p.scrollLeft,j=p.scrollTop;p===c?(x=y<E&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),C=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(x=y<E&&("auto"===S.overflowX||"scroll"===S.overflowX),C=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY));var O=x&&(Math.abs(b-a)<=s&&$+y<E)-(Math.abs(v-a)<=s&&!!$),T=C&&(Math.abs(m-i)<=s&&j+w<_)-(Math.abs(g-i)<=s&&!!j);if(!bt[d])for(var D=0;D<=d;D++)bt[D]||(bt[D]={});bt[d].vx==O&&bt[d].vy==T&&bt[d].el===p||(bt[d].el=p,bt[d].vx=O,bt[d].vy=T,clearInterval(bt[d].pid),0==O&&0==T||(u=!0,bt[d].pid=setInterval(function(){r&&0===this.layer&&at.active._onTouchMove(mt);var t=bt[this.layer].vy?bt[this.layer].vy*l:0,n=bt[this.layer].vx?bt[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(at.dragged.parentNode[se],n,t,e,mt,bt[this.layer].el)||ae(bt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=ne(f,!1)));yt=u}}),30),Et=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,i=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;i();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function _t(){}function St(){}_t.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Z(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Et},j(_t,{pluginName:"revertOnSpill"}),St.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Et},j(St,{pluginName:"removeOnSpill"});at.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?R(document,"dragover",this._handleAutoScroll):this.options.supportPointer?R(document,"pointermove",this._handleFallbackAutoScroll):t.touches?R(document,"touchmove",this._handleFallbackAutoScroll):R(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),xt(),wt(),clearTimeout(U),U=void 0},nulling:function(){mt=pt=ft=yt=vt=ht=gt=null,bt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,o);if(mt=e,t||k||I||A){Ct(e,this.options,a,t);var i=ne(a,!0);!yt||vt&&r===ht&&o===gt||(vt&&xt(),vt=setInterval((function(){var a=ne(document.elementFromPoint(r,o),!0);a!==i&&(i=a,wt()),Ct(e,n.options,a,t)}),10),ht=r,gt=o)}else{if(!this.options.bubbleScroll||ne(a,!0)===V())return void wt();Ct(e,this.options,ne(a,!1),!1)}}},j(e,{pluginName:"scroll",initializeByDefault:!0})}),at.mount(St,_t);var $t=at;var jt,Ot,Tt,Dt,It=function(){$(".e2-js-menu-reorderable").each((function(){var e=$(this),t=e.data("sortable"),n={draggable:".e2-js-menu-reorderable-item",ghostClass:"e2-js-menu-reorderable-item-ghost",chosenClass:"e2-js-menu-reorderable-item-chosen",dragClass:"e2-js-menu-reorderable-item-drag",animation:400,forceFallback:!0,dataIdAttr:"data-id",fallbackOnBody:!0,fallbackTolerance:4,onStart:function(e){e.from.classList.add("e2-js-menu-reorderable-in-process")},onEnd:function(e){e.from.classList.remove("e2-js-menu-reorderable-in-process")},currentOrder:[],store:{set:function(t){var n=t.toArray();Object(i.a)({url:e.attr("data-action-save-order"),data:{order:n},success:function(e){t.options.currentOrder=n,console.log(e)},error:function(e){t.sort(t.options.currentOrder,!0)}})},get:function(e){var t=e.toArray();return e.options.currentOrder=t,[]}}};t||(t=new $t(this,n),e.data("sortable",t))}))};o(),u(),c(),h(),E(),g(),m(),v(),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||It(),$(".e2-external-drop-target").on("dragover dragenter",(function(e){var t=e.originalEvent.dataTransfer;if(t&&(!t.types.contains||t.types.contains("Files"))&&(!t.types.indexOf||-1!==t.types.indexOf("Files"))){t.dropEffect&&(t.dropEffect="copy");var n=$(this);return n.addClass("e2-external-drop-target-dragover"),n.hasClass("e2-external-drop-target-altable")&&e.altKey?n.addClass("e2-external-drop-target-dragover-alt"):n.removeClass("e2-external-drop-target-dragover-alt"),!1}})).on("dragleave drop",(function(){return $(this).removeClass("e2-external-drop-target-dragover e2-external-drop-target-dragover-alt"),!1})),function(){var e=Object(a.a)(),t=$(".e2-user-picture-container"),n="e2-user-picture-container_uploading",r=!t.eq(0).hasClass("e2-user-picture-container_empty");function o(o,a){var i=o.data("href");r=!o.hasClass("e2-user-picture-container_empty"),t.each((function(){var t=$(this),a=t.find(".e2-user-picture-container-link"),i=r?t.find(".e2-user-picture-image"):t.find(".e2-user-picture-placeholder"),s=t.find(".e2-user-picture-spinner");t[0]===o[0]?e?(i.off(e+".uploadUserPic").one(e+".uploadUserPic",(function(){t.hasClass(n)&&(t.addClass("e2-user-picture-container_showspinner"),Object(l.a)(s,1))})),t.addClass(n)):t.hasClass(n)&&(t.addClass("e2-user-picture-container_showspinner"),Object(l.a)(s,1)):t.addClass(n),a.attr("data-href",a.attr("href")).removeAttr("href")})),b({file:a,url:i,progress:function(e){e.lengthComputable&&t.each((function(){var t=$(this),n=t.find("circle.e2-progress");t[0]===o[0]&&Object(s.a)(n,e.loaded/e.total)}))},success:function(e){if(t.each((function(){var t=$(this),r=t.find(".e2-user-picture-container-link"),a=t.find(".e2-user-picture-spinner");void 0!==e.data&&void 0!==e.data["new-image-src"]||(t.removeClass(n),r.attr("href",r.attr("data-href")).removeAttr("data-href"),t[0]===o[0]&&(t.removeClass("e2-user-picture-container_showspinner"),Object(l.a)(a,0)))})),void 0===e.data||void 0===e.data["new-image-src"])return Object(p.a)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:e}}}),!1;var a;r=!0,t.each((function(){var t=$(this),r=t.find(".e2-user-picture-container-link"),i=t.find("img"),s=t.find(".e2-user-picture-spinner");void 0===a?(i.one("load",(function(){t.removeClass("e2-user-picture-container_empty").removeClass(n),r.attr("href",r.attr("data-href")).removeAttr("data-href"),t[0]===o[0]&&(t.removeClass("e2-user-picture-container_showspinner"),Object(l.a)(s,0))})),i.attr("src",e.data["new-image-src"]+"?"+Date.now()),a=i):a.one("load",(function(){i.attr("src",a.attr("src")),t.removeClass("e2-user-picture-container_empty").removeClass(n),r.attr("href",r.attr("data-href")).removeAttr("data-href"),t[0]===o[0]&&(t.removeClass("e2-user-picture-container_showspinner"),Object(l.a)(s,0))}))}))},error:function(){t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link"),r=e.find(".e2-user-picture-spinner");e.removeClass(n),t.attr("href",t.attr("data-href")).removeAttr("data-href"),e[0]===o[0]&&(e.removeClass("e2-user-picture-container_showspinner"),Object(l.a)(r,0))}))}})}t.on("drop",(function(e){var t,n=e.originalEvent.dataTransfer;return n&&n.files?n.files.length>1?(Object(p.a)({message:"er--js-can-upload-only-one-file",debug:{data:{event:e,files:n.files}}}),!1):(t=n.files[0],y(t.name,/^gif|jpe?g|png$/i)?void o($(this),t):(Object(p.a)({message:"er--supported-only-png-jpg-gif",debug:{data:{file:t}}}),!1)):(Object(p.a)({message:"er--js-no-files-to-upload",debug:{data:{event:e,dataTransfer:n}}}),!1)})),t.on("change",".e2-user-picture-input",(function(e){return!!e.target.files.length&&(o($(e.delegateTarget),e.target.files[0]),!1)})),t.on("click",".e2-user-picture-remove",(function(n){var o=$(n.delegateTarget),a=$(n.currentTarget).attr("data-href");t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link");o[0]===e[0]&&e.addClass("e2-user-picture-container_deleting"),t.attr("data-href",t.attr("href")).removeAttr("href")})),Object(i.a)({url:a,success:function(){r=!1,t.each((function(){var t=$(this),n=t.find(".e2-user-picture-container-link"),r=t.find("img");function o(){t.addClass("e2-user-picture-container_empty").removeClass("e2-user-picture-container_deleted").removeClass("e2-user-picture-container_deleting"),r.attr("src",""),n.attr("href",n.attr("data-href")).removeAttr("data-href")}e?(t.off(e+".removeUserPic").one(e+".removeUserPic",(function(){o()})),t.addClass("e2-user-picture-container_deleted")):o()}))},error:function(){t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link");e.removeClass("e2-user-picture-container_deleting"),t.attr("href",t.attr("data-href")).removeAttr("data-href")}))}})}))}(),function(){if(!r.a||!document.e2.localCopies)return;const e=$("#e2-drafts-item"),t=e.find(".js-unsaved-led"),n=$("#e2-new-note-item .js-unsaved-led"),o=$("#e2-notes-unsaved"),a=$("#form-note"),i=document.e2.localCopies.getList(),s=document.e2.localCopies.doesCopyExist("new"),l=a?$("#note-id").val():null,c="new"!==l&&document.e2.localCopies.doesCopyExist(l);let u=Object.keys(i).length;if(s&&u--,c&&u--,t&&u>0&&(e.show(),t.show()),n&&s&&n.show(),o){const e=document.e2.localCopies.getName("new");Object.prototype.hasOwnProperty.call(i,e)&&delete i[e];for(const e in i)"false"===i[e].isPublished&&($("#e2-draft-"+e+" .js-unsaved-led").show(),delete i[e]);if(Object.keys(i).length){for(const e in i){const t=document.e2.localCopies.get(e);if(!t)continue;const n=$("#e2-unsaved-note-prototype").clone(!0);n.attr("id",null),$(".e2-admin-link",n).attr("href",t.link),$("u",n).html(t.title),n.attr("style",""),o.append(n)}o.show()}}}(),jt=function(e,t){t?(e.addClass("e2-admin-item_thinking"),Object(l.a)(e,1)):(Object(l.a)(e,0),e.removeClass("e2-admin-item_thinking"))},Ot=function(e,t){t?e.addClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled"):e.removeClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled")},Tt=function(e,t,n){if(e.blur(),e.hasClass("e2-admin-item_disabled"))return!0;if(e.hasClass("e2-popup-menu-widget-item_disabled"))return!0;var r=e.hasClass("e2-admin-item_on")?"on":"off",o=void 0!==e.data("e2-js-action")&&e.data("e2-js-action").indexOf("couple-trigger")>=0;e.removeClass("e2-admin-item_on"),jt(e,1),Ot(e,1),Object(i.a)({url:e.attr("href"),data:"token="+e.data("e2-js-action-token")+"&result=ajaxresult",success:function(o){if(void 0===o.data||void 0===o.data["flag-now-on"])return Object(p.a)({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:o}}}),"on"===r&&e.addClass("e2-admin-item_on"),!1;o.data["flag-now-on"]?(e.addClass("e2-admin-item_on"),t(e,o.data["new-href"])):(e.removeClass("e2-admin-item_on"),n(e,o.data["new-href"]))},error:function(){"on"===r&&e.addClass("e2-admin-item_on"),o&&e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM")},complete:function(){jt(e,0),Ot(e,0)}})},$(".e2-admin-item").add(".e2-popup-menu-widget-item").on("click",(function(){return e=$(this),t={"toggle-favourite":function(){Tt(e,(function(e,t){e.attr("href",t).parents(".e2-note").addClass("e2-note-favourite")}),(function(e,t){e.attr("href",t).parents(".e2-note").removeClass("e2-note-favourite")}))},"toggle-pinned":function(){Tt(e,(function(e,t){e.attr("href",t)}),(function(e,t){e.attr("href",t)}))},"toggle-important":function(){Tt(e,(function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").addClass("e2-comment-piece-marked")}),(function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").removeClass("e2-comment-piece-marked")}))},"removed-href":function(){Tt(e,(function(e,t){}),(function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-author").addClass("e2-comment-author-removed"),n.find(".e2-comment-meta, .e2-comment-content").slideUp(200),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideUp(200),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"removed"})}))},"replaced-href":function(){Tt(e,(function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-content, .e2-comment-meta").slideDown(200),n.find(".e2-comment-author").removeClass("e2-comment-author-removed"),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideDown(200),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"recovered"})}),(function(e,t){}))},"couple-trigger":function(){e.trigger("E2_ADMIN_COUPLE_WILL_THINK")}},n=!0,(r=e.data("e2-js-action"))&&$.each(r.split(","),(function(e,r){"function"==typeof t[r]&&(n=!1,t[r]())})),n;var e,t,n,r})),Dt=function(e){if(e.length){var t=e.find(".e2-admin-couple-item");e.find('[data-e2-js-action*="couple-trigger"]').on("E2_ADMIN_COUPLE_CHANGE_ITEM",(function(n,r){Object(l.a)(e.find(".e2-admin-couple-spinner"),0),"object"==typeof r&&"string"==typeof r.response&&(t.addClass("e2-admin-couple-item_hidden"),e.find(".e2-admin-couple-item_"+r.response).removeClass("e2-admin-couple-item_hidden")),e.removeClass("e2-admin-couple_thinking")})).on("E2_ADMIN_COUPLE_WILL_THINK",(function(){Object(l.a)(e.find(".e2-admin-couple-spinner"),1),e.addClass("e2-admin-couple_thinking")}))}},$(".e2-admin-couple").each((function(){Dt($(this))})),$(document).on("E2_ADMIN_COUPLE_INIT",(function(e,t){void 0!==t.$couple&&Dt(t.$couple)}))}])}));